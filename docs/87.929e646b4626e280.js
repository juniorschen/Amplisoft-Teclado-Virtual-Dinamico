(self.webpackChunkamplisoft_dasher=self.webpackChunkamplisoft_dasher||[]).push([[87],{2087:(We,Oe,P)=>{"use strict";P.r(Oe),P.d(Oe,{DasherOnScreenModule:()=>rt});var G=P(6895),Ce=P(9814),U=P(284),q=P(9549),I=P(4006),e=P(4650),z=P(3238),C=P(1281);const D=["determinateSpinner"];function R(l,o){if(1&l&&(e.O4$(),e.TgZ(0,"svg",11),e._UZ(1,"circle",12),e.qZA()),2&l){const t=e.oxw();e.uIk("viewBox",t._viewBox()),e.xp6(1),e.Udp("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),e.uIk("r",t._circleRadius())}}const V=(0,z.pj)(class{constructor(l){this._elementRef=l}},"primary"),$=new e.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function Z(){return{diameter:Q}}}),Q=100;let ce=(()=>{class l extends V{constructor(t,n,s){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=Q,this._noopAnimations="NoopAnimations"===n&&!!s&&!s._forceAnimations,s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,(0,C.su)(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=(0,C.su)(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=(0,C.su)(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.SBq),e.Y36(e.QbO,8),e.Y36($))},l.\u0275cmp=e.Xpm({type:l,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,n){if(1&t&&e.Gf(D,5),2&t){let s;e.iGM(s=e.CRH())&&(n._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(t,n){2&t&&(e.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===n.mode?n.value:null)("mode",n.mode),e.Udp("width",n.diameter,"px")("height",n.diameter,"px"),e.ekj("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===n.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[e.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,n){if(1&t&&(e.YNc(0,R,2,8,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1,2),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"circle",4),e.qZA()(),e.kcU(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7),e.GkF(9,8),e.qZA(),e.TgZ(10,"div",9),e.GkF(11,8),e.qZA(),e.TgZ(12,"div",10),e.GkF(13,8),e.qZA()()()),2&t){const s=e.MAs(1);e.xp6(4),e.uIk("viewBox",n._viewBox()),e.xp6(1),e.Udp("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),e.uIk("r",n._circleRadius()),e.xp6(4),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("ngTemplateOutlet",s)}},dependencies:[G.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),l})(),ae=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[G.ez,z.BQ]}),l})();var Ve=P(7392),Re=P(4883),J=P(3353),Qe=P(2687),H=P(7579),se=P(727),T=P(4986),Ee=P(5963),xe=P(6406),_e=P(9751),F=P(6451),Me=P(2722),N=P(4004),x=P(5698),Le=P(8675),at=P(8505),mt=P(3900),lt=P(445);function ze(l,o,t){for(let n in o)if(o.hasOwnProperty(n)){const s=o[n];s?l.setProperty(n,s,t?.has(n)?"important":""):l.removeProperty(n)}return l}function Se(l,o){const t=o?"":"none";ze(l.style,{"touch-action":o?"":"none","-webkit-user-drag":o?"":"none","-webkit-tap-highlight-color":o?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Fe(l,o,t){ze(l.style,{position:o?"":"fixed",top:o?"":"0",opacity:o?"":"0",left:o?"":"-999em"},t)}function Be(l,o){return o&&"none"!=o?l+" "+o:l}function pe(l){const o=l.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(l)*o}function we(l,o){return l.getPropertyValue(o).split(",").map(n=>n.trim())}function Ne(l){const o=l.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}function he(l,o,t){const{top:n,bottom:s,left:c,right:p}=l;return t>=n&&t<=s&&o>=c&&o<=p}function be(l,o,t){l.top+=o,l.bottom=l.top+l.height,l.left+=t,l.right=l.left+l.width}function je(l,o,t,n){const{top:s,right:c,bottom:p,left:f,width:_,height:y}=l,A=_*o,O=y*o;return n>s-O&&n<p+O&&t>f-A&&t<c+A}class i{constructor(o){this._document=o,this.positions=new Map}clear(){this.positions.clear()}cache(o){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),o.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Ne(t)})})}handleScroll(o){const t=(0,J.sA)(o),n=this.positions.get(t);if(!n)return null;const s=n.scrollPosition;let c,p;if(t===this._document){const y=this.getViewportScrollPosition();c=y.top,p=y.left}else c=t.scrollTop,p=t.scrollLeft;const f=s.top-c,_=s.left-p;return this.positions.forEach((y,A)=>{y.clientRect&&t!==A&&t.contains(A)&&be(y.clientRect,f,_)}),s.top=c,s.left=p,{top:f,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function r(l){const o=l.cloneNode(!0),t=o.querySelectorAll("[id]"),n=l.nodeName.toLowerCase();o.removeAttribute("id");for(let s=0;s<t.length;s++)t[s].removeAttribute("id");return"canvas"===n?u(l,o):("input"===n||"select"===n||"textarea"===n)&&d(l,o),a("canvas",l,o,u),a("input, textarea, select",l,o,d),o}function a(l,o,t,n){const s=o.querySelectorAll(l);if(s.length){const c=t.querySelectorAll(l);for(let p=0;p<s.length;p++)n(s[p],c[p])}}let h=0;function d(l,o){"file"!==o.type&&(o.value=l.value),"radio"===o.type&&o.name&&(o.name=`mat-clone-${o.name}-${h++}`)}function u(l,o){const t=o.getContext("2d");if(t)try{t.drawImage(l,0,0)}catch{}}const g=(0,J.i$)({passive:!0}),m=(0,J.i$)({passive:!1}),w=new Set(["position"]);class b{constructor(o,t,n,s,c,p){this._config=t,this._document=n,this._ngZone=s,this._viewportRuler=c,this._dragDropRegistry=p,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new H.x,this._pointerMoveSubscription=se.w0.EMPTY,this._pointerUpSubscription=se.w0.EMPTY,this._scrollSubscription=se.w0.EMPTY,this._resizeSubscription=se.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new H.x,this.started=new H.x,this.released=new H.x,this.ended=new H.x,this.entered=new H.x,this.exited=new H.x,this.dropped=new H.x,this.moved=this._moveEvents,this._pointerDown=f=>{if(this.beforeStarted.next(),this._handles.length){const _=this._getTargetHandle(f);_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,f)}else this.disabled||this._initializeDragSequence(this._rootElement,f)},this._pointerMove=f=>{const _=this._getPointerPositionOnPage(f);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const j=Date.now()>=this._dragStartTime+this._getDragStartDelay(f),ie=this._dropContainer;if(!j)return void this._endDragSequence(f);(!ie||!ie.isDragging()&&!ie.isReceiving())&&(f.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(f)))}return}f.preventDefault();const y=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(y),this._dropContainer)this._updateActiveDropContainer(y,_);else{const A=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,O=this._activeTransform;O.x=y.x-A.x+this._passiveTransform.x,O.y=y.y-A.y+this._passiveTransform.y,this._applyRootElementTransform(O.x,O.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:y,event:f,distance:this._getDragDistance(y),delta:this._pointerDirectionDelta})})},this._pointerUp=f=>{this._endDragSequence(f)},this._nativeDragStart=f=>{if(this._handles.length){const _=this._getTargetHandle(f);_&&!this._disabledHandles.has(_)&&!this.disabled&&f.preventDefault()}else this.disabled||f.preventDefault()},this.withRootElement(o).withParent(t.parentDragRef||null),this._parentPositions=new i(n),p.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(o){const t=(0,C.Ig)(o);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>Se(n,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(o){this._handles=o.map(n=>(0,C.fI)(n)),this._handles.forEach(n=>Se(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(o){return this._previewTemplate=o,this}withPlaceholderTemplate(o){return this._placeholderTemplate=o,this}withRootElement(o){const t=(0,C.fI)(o);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,m),t.addEventListener("touchstart",this._pointerDown,g),t.addEventListener("dragstart",this._nativeDragStart,m)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(o){return this._boundaryElement=o?(0,C.fI)(o):null,this._resizeSubscription.unsubscribe(),o&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(o){return this._parentDragRef=o,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(o){!this._disabledHandles.has(o)&&this._handles.indexOf(o)>-1&&(this._disabledHandles.add(o),Se(o,!0))}enableHandle(o){this._disabledHandles.has(o)&&(this._disabledHandles.delete(o),Se(o,this.disabled))}withDirection(o){return this._direction=o,this}_withDropContainer(o){this._dropContainer=o}getFreeDragPosition(){const o=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:o.x,y:o.y}}setFreeDragPosition(o){return this._activeTransform={x:0,y:0},this._passiveTransform.x=o.x,this._passiveTransform.y=o.y,this._dropContainer||this._applyRootElementTransform(o.x,o.y),this}withPreviewContainer(o){return this._previewContainer=o,this}_sortFromLastPointerPosition(){const o=this._lastKnownPointerPosition;o&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(o),o)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(o){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:o}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(o),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(o);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:o})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(o){k(o)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,s=n.parentNode,c=this._placeholder=this._createPlaceholderElement(),p=this._anchor=this._anchor||this._document.createComment(""),f=this._getShadowRoot();s.insertBefore(p,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Fe(n,!1,w),this._document.body.appendChild(s.replaceChild(c,n)),this._getPreviewInsertionPoint(s,f).appendChild(this._preview),this.started.next({source:this,event:o}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:o}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(o,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),s=k(t),c=!s&&0!==t.button,p=this._rootElement,f=(0,J.sA)(t),_=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),y=s?(0,Qe.yG)(t):(0,Qe.X6)(t);if(f&&f.draggable&&"mousedown"===t.type&&t.preventDefault(),n||c||_||y)return;if(this._handles.length){const M=p.style;this._rootElementTapHighlight=M.webkitTapHighlightColor||"",M.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(M=>this._updateOnScroll(M)),this._boundaryElement&&(this._boundaryRect=Ne(this._boundaryElement));const A=this._previewTemplate;this._pickupPositionInElement=A&&A.template&&!A.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,o,t);const O=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:O.x,y:O.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(o){Fe(this._rootElement,!0,w),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),s=this._getPointerPositionOnPage(o),c=this._getDragDistance(s),p=t._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:c,dropPoint:s,event:o}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:p,distance:c,dropPoint:s,event:o}),t.drop(this,n,this._initialIndex,this._initialContainer,p,c,s,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:o,y:t},{x:n,y:s}){let c=this._initialContainer._getSiblingContainerFromPosition(this,o,t);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(o,t)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=c,this._dropContainer.enter(this,o,t,c===this._initialContainer&&c.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:c,currentIndex:c.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,s),this._dropContainer._sortItem(this,o,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(o,t):this._applyPreviewTransform(o-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const o=this._previewTemplate,t=this.previewClass,n=o?o.template:null;let s;if(n&&o){const c=o.matchSize?this._initialClientRect:null,p=o.viewContainer.createEmbeddedView(n,o.context);p.detectChanges(),s=L(p,this._document),this._previewRef=p,o.matchSize?Y(s,c):s.style.transform=E(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else s=r(this._rootElement),Y(s,this._initialClientRect),this._initialTransform&&(s.style.transform=this._initialTransform);return ze(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},w),Se(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(c=>s.classList.add(c)):s.classList.add(t)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const o=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(o.left,o.top);const t=function fe(l){const o=getComputedStyle(l),t=we(o,"transition-property"),n=t.find(f=>"transform"===f||"all"===f);if(!n)return 0;const s=t.indexOf(n),c=we(o,"transition-duration"),p=we(o,"transition-delay");return pe(c[s])+pe(p[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const s=p=>{(!p||(0,J.sA)(p)===this._preview&&"transform"===p.propertyName)&&(this._preview?.removeEventListener("transitionend",s),n(),clearTimeout(c))},c=setTimeout(s,1.5*t);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){const o=this._placeholderTemplate,t=o?o.template:null;let n;return t?(this._placeholderRef=o.viewContainer.createEmbeddedView(t,o.context),this._placeholderRef.detectChanges(),n=L(this._placeholderRef,this._document)):n=r(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(o,t,n){const s=t===this._rootElement?null:t,c=s?s.getBoundingClientRect():o,p=k(n)?n.targetTouches[0]:n,f=this._getViewportScrollPosition();return{x:c.left-o.left+(p.pageX-c.left-f.left),y:c.top-o.top+(p.pageY-c.top-f.top)}}_getPointerPositionOnPage(o){const t=this._getViewportScrollPosition(),n=k(o)?o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0}:o,s=n.pageX-t.left,c=n.pageY-t.top;if(this._ownerSVGElement){const p=this._ownerSVGElement.getScreenCTM();if(p){const f=this._ownerSVGElement.createSVGPoint();return f.x=s,f.y=c,f.matrixTransform(p.inverse())}}return{x:s,y:c}}_getConstrainedPointerPosition(o){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:s}=this.constrainPosition?this.constrainPosition(o,this,this._initialClientRect,this._pickupPositionInElement):o;if("x"===this.lockAxis||"x"===t?s=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:c,y:p}=this._pickupPositionInElement,f=this._boundaryRect,{width:_,height:y}=this._getPreviewRect(),A=f.top+p,O=f.bottom-(y-p);n=S(n,f.left+c,f.right-(_-c)),s=S(s,A,O)}return{x:n,y:s}}_updatePointerDirectionDelta(o){const{x:t,y:n}=o,s=this._pointerDirectionDelta,c=this._pointerPositionAtLastDirectionChange,p=Math.abs(t-c.x),f=Math.abs(n-c.y);return p>this._config.pointerDirectionChangeThreshold&&(s.x=t>c.x?1:-1,c.x=t),f>this._config.pointerDirectionChangeThreshold&&(s.y=n>c.y?1:-1,c.y=n),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const o=this._handles.length>0||!this.isDragging();o!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=o,Se(this._rootElement,o))}_removeRootElementListeners(o){o.removeEventListener("mousedown",this._pointerDown,m),o.removeEventListener("touchstart",this._pointerDown,g),o.removeEventListener("dragstart",this._nativeDragStart,m)}_applyRootElementTransform(o,t){const n=E(o,t),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=Be(n,this._initialTransform)}_applyPreviewTransform(o,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,s=E(o,t);this._preview.style.transform=Be(s,n)}_getDragDistance(o){const t=this._pickupPositionOnPage;return t?{x:o.x-t.x,y:o.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:o,y:t}=this._passiveTransform;if(0===o&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),s=this._boundaryElement.getBoundingClientRect();if(0===s.width&&0===s.height||0===n.width&&0===n.height)return;const c=s.left-n.left,p=n.right-s.right,f=s.top-n.top,_=n.bottom-s.bottom;s.width>n.width?(c>0&&(o+=c),p>0&&(o-=p)):o=0,s.height>n.height?(f>0&&(t+=f),_>0&&(t-=_)):t=0,(o!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:o})}_getDragStartDelay(o){const t=this.dragStartDelay;return"number"==typeof t?t:k(o)?t.touch:t?t.mouse:0}_updateOnScroll(o){const t=this._parentPositions.handleScroll(o);if(t){const n=(0,J.sA)(o);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&be(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,J.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(o,t){const n=this._previewContainer||"global";if("parent"===n)return o;if("global"===n){const s=this._document;return t||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return(0,C.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(o){return this._handles.find(t=>o.target&&(o.target===t||t.contains(o.target)))}}function E(l,o){return`translate3d(${Math.round(l)}px, ${Math.round(o)}px, 0)`}function S(l,o,t){return Math.max(o,Math.min(t,l))}function k(l){return"t"===l.type[0]}function L(l,o){const t=l.rootNodes;if(1===t.length&&t[0].nodeType===o.ELEMENT_NODE)return t[0];const n=o.createElement("div");return t.forEach(s=>n.appendChild(s)),n}function Y(l,o){l.style.width=`${o.width}px`,l.style.height=`${o.height}px`,l.style.transform=E(o.left,o.top)}function X(l,o){return Math.max(0,Math.min(o,l))}class ue{constructor(o,t){this._element=o,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(o){this.withItems(o)}sort(o,t,n,s){const c=this._itemPositions,p=this._getItemIndexFromPointerPosition(o,t,n,s);if(-1===p&&c.length>0)return null;const f="horizontal"===this.orientation,_=c.findIndex(ne=>ne.drag===o),y=c[p],O=y.clientRect,M=_>p?1:-1,j=this._getItemOffsetPx(c[_].clientRect,O,M),ie=this._getSiblingOffsetPx(_,c,M),ge=c.slice();return function te(l,o,t){const n=X(o,l.length-1),s=X(t,l.length-1);if(n===s)return;const c=l[n],p=s<n?-1:1;for(let f=n;f!==s;f+=p)l[f]=l[f+p];l[s]=c}(c,_,p),c.forEach((ne,De)=>{if(ge[De]===ne)return;const ot=ne.drag===o,Ue=ot?j:ie,st=ot?o.getPlaceholderElement():ne.drag.getRootElement();ne.offset+=Ue,f?(st.style.transform=Be(`translate3d(${Math.round(ne.offset)}px, 0, 0)`,ne.initialTransform),be(ne.clientRect,0,Ue)):(st.style.transform=Be(`translate3d(0, ${Math.round(ne.offset)}px, 0)`,ne.initialTransform),be(ne.clientRect,Ue,0))}),this._previousSwap.overlaps=he(O,t,n),this._previousSwap.drag=y.drag,this._previousSwap.delta=f?s.x:s.y,{previousIndex:_,currentIndex:p}}enter(o,t,n,s){const c=null==s||s<0?this._getItemIndexFromPointerPosition(o,t,n):s,p=this._activeDraggables,f=p.indexOf(o),_=o.getPlaceholderElement();let y=p[c];if(y===o&&(y=p[c+1]),!y&&(null==c||-1===c||c<p.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(y=p[0]),f>-1&&p.splice(f,1),y&&!this._dragDropRegistry.isDragging(y)){const A=y.getRootElement();A.parentElement.insertBefore(_,A),p.splice(c,0,o)}else(0,C.fI)(this._element).appendChild(_),p.push(o);_.style.transform="",this._cacheItemPositions()}withItems(o){this._activeDraggables=o.slice(),this._cacheItemPositions()}withSortPredicate(o){this._sortPredicate=o}reset(){this._activeDraggables.forEach(o=>{const t=o.getRootElement();if(t){const n=this._itemPositions.find(s=>s.drag===o)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(o){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===o)}updateOnScroll(o,t){this._itemPositions.forEach(({clientRect:n})=>{be(n,o,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const o="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:Ne(n)}}).sort((t,n)=>o?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(o,t,n){const s="horizontal"===this.orientation;let c=s?t.left-o.left:t.top-o.top;return-1===n&&(c+=s?t.width-o.width:t.height-o.height),c}_getSiblingOffsetPx(o,t,n){const s="horizontal"===this.orientation,c=t[o].clientRect,p=t[o+-1*n];let f=c[s?"width":"height"]*n;if(p){const _=s?"left":"top",y=s?"right":"bottom";-1===n?f-=p.clientRect[_]-c[y]:f+=c[_]-p.clientRect[y]}return f}_shouldEnterAsFirstChild(o,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,s="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const p=n[n.length-1].clientRect;return s?o>=p.right:t>=p.bottom}{const p=n[0].clientRect;return s?o<=p.left:t<=p.top}}_getItemIndexFromPointerPosition(o,t,n,s){const c="horizontal"===this.orientation,p=this._itemPositions.findIndex(({drag:f,clientRect:_})=>{if(f===o)return!1;if(s){const y=c?s.x:s.y;if(f===this._previousSwap.drag&&this._previousSwap.overlaps&&y===this._previousSwap.delta)return!1}return c?t>=Math.floor(_.left)&&t<Math.floor(_.right):n>=Math.floor(_.top)&&n<Math.floor(_.bottom)});return-1!==p&&this._sortPredicate(p,o)?p:-1}}class Ze{constructor(o,t,n,s,c){this._dragDropRegistry=t,this._ngZone=s,this._viewportRuler=c,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new H.x,this.entered=new H.x,this.exited=new H.x,this.dropped=new H.x,this.sorted=new H.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=se.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new H.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function me(l=0,o=T.z){return l<0&&(l=0),(0,Ee.H)(l,l,o)}(0,xe.Z).pipe((0,Me.R)(this._stopScrollTimers)).subscribe(()=>{const p=this._scrollNode,f=this.autoScrollStep;1===this._verticalScrollDirection?p.scrollBy(0,-f):2===this._verticalScrollDirection&&p.scrollBy(0,f),1===this._horizontalScrollDirection?p.scrollBy(-f,0):2===this._horizontalScrollDirection&&p.scrollBy(f,0)})},this.element=(0,C.fI)(o),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new i(n),this._sortStrategy=new ue(this.element,t),this._sortStrategy.withSortPredicate((p,f)=>this.sortPredicate(p,f,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(o,t,n,s){this._draggingStarted(),null==s&&this.sortingDisabled&&(s=this._draggables.indexOf(o)),this._sortStrategy.enter(o,t,n,s),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:o,container:this,currentIndex:this.getItemIndex(o)})}exit(o){this._reset(),this.exited.next({item:o,container:this})}drop(o,t,n,s,c,p,f,_={}){this._reset(),this.dropped.next({item:o,currentIndex:t,previousIndex:n,container:this,previousContainer:s,isPointerOverContainer:c,distance:p,dropPoint:f,event:_})}withItems(o){const t=this._draggables;return this._draggables=o,o.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(s=>s.isDragging()).every(s=>-1===o.indexOf(s))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(o){return this._sortStrategy.direction=o,this}connectedTo(o){return this._siblings=o.slice(),this}withOrientation(o){return this._sortStrategy.orientation=o,this}withScrollableParents(o){const t=(0,C.fI)(this.element);return this._scrollableElements=-1===o.indexOf(t)?[t,...o]:o.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(o){return this._isDragging?this._sortStrategy.getItemIndex(o):this._draggables.indexOf(o)}isReceiving(){return this._activeSiblings.size>0}_sortItem(o,t,n,s){if(this.sortingDisabled||!this._clientRect||!je(this._clientRect,.05,t,n))return;const c=this._sortStrategy.sort(o,t,n,s);c&&this.sorted.next({previousIndex:c.previousIndex,currentIndex:c.currentIndex,container:this,item:o})}_startScrollingIfNecessary(o,t){if(this.autoScrollDisabled)return;let n,s=0,c=0;if(this._parentPositions.positions.forEach((p,f)=>{f===this._document||!p.clientRect||n||je(p.clientRect,.05,o,t)&&([s,c]=function Mt(l,o,t,n){const s=_t(o,n),c=vt(o,t);let p=0,f=0;if(s){const _=l.scrollTop;1===s?_>0&&(p=1):l.scrollHeight-_>l.clientHeight&&(p=2)}if(c){const _=l.scrollLeft;1===c?_>0&&(f=1):l.scrollWidth-_>l.clientWidth&&(f=2)}return[p,f]}(f,p.clientRect,o,t),(s||c)&&(n=f))}),!s&&!c){const{width:p,height:f}=this._viewportRuler.getViewportSize(),_={width:p,height:f,top:0,right:p,bottom:f,left:0};s=_t(_,t),c=vt(_,o),n=window}n&&(s!==this._verticalScrollDirection||c!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=c,this._scrollNode=n,(s||c)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const o=(0,C.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=o.msScrollSnapType||o.scrollSnapType||"",o.scrollSnapType=o.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const o=(0,C.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(o).clientRect}_reset(){this._isDragging=!1;const o=(0,C.fI)(this.element).style;o.scrollSnapType=o.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(o,t){return null!=this._clientRect&&he(this._clientRect,o,t)}_getSiblingContainerFromPosition(o,t,n){return this._siblings.find(s=>s._canReceive(o,t,n))}_canReceive(o,t,n){if(!this._clientRect||!he(this._clientRect,t,n)||!this.enterPredicate(o,this))return!1;const s=this._getShadowRoot().elementFromPoint(t,n);if(!s)return!1;const c=(0,C.fI)(this.element);return s===c||c.contains(s)}_startReceiving(o,t){const n=this._activeSiblings;!n.has(o)&&t.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(n.add(o),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(o){this._activeSiblings.delete(o),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(o=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(o);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const o=(0,J.kV)((0,C.fI)(this.element));this._cachedShadowRoot=o||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const o=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,o))}}function _t(l,o){const{top:t,bottom:n,height:s}=l,c=.05*s;return o>=t-c&&o<=t+c?1:o>=n-c&&o<=n+c?2:0}function vt(l,o){const{left:t,right:n,width:s}=l,c=.05*s;return o>=t-c&&o<=t+c?1:o>=n-c&&o<=n+c?2:0}const Xe=(0,J.i$)({passive:!1,capture:!0});let Lt=(()=>{class l{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new H.x,this.pointerUp=new H.x,this.scroll=new H.x,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Xe)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Xe)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const s=n.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:c=>this.pointerUp.next(c),options:!0}).set("scroll",{handler:c=>this.scroll.next(c),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Xe}),s||this._globalListeners.set("mousemove",{handler:c=>this.pointerMove.next(c),options:Xe}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((c,p)=>{this._document.addEventListener(p,c.handler,c.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new _e.y(s=>this._ngZone.runOutsideAngular(()=>{const p=f=>{this._activeDragInstances.length&&s.next(f)};return t.addEventListener("scroll",p,!0),()=>{t.removeEventListener("scroll",p,!0)}}))),(0,F.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return l.\u0275fac=function(t){return new(t||l)(e.LFG(e.R0b),e.LFG(G.K0))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const zt={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let yt=(()=>{class l{constructor(t,n,s,c){this._document=t,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=c}createDrag(t,n=zt){return new b(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Ze(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return l.\u0275fac=function(t){return new(t||l)(e.LFG(G.K0),e.LFG(e.R0b),e.LFG(Re.rL),e.LFG(Lt))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const Ct=new e.OlP("CDK_DRAG_PARENT"),Ft=new e.OlP("CDK_DRAG_CONFIG"),Bt=new e.OlP("CdkDropList"),xt=new e.OlP("CdkDragHandle"),Nt=new e.OlP("CdkDragPlaceholder"),Zt=new e.OlP("CdkDragPreview");let wt=(()=>{class l{constructor(t,n,s,c,p,f,_,y,A,O,M){this.element=t,this.dropContainer=n,this._ngZone=c,this._viewContainerRef=p,this._dir=_,this._changeDetectorRef=A,this._selfHandle=O,this._parentDrag=M,this._destroyed=new H.x,this.started=new e.vpe,this.released=new e.vpe,this.ended=new e.vpe,this.entered=new e.vpe,this.exited=new e.vpe,this.dropped=new e.vpe,this.moved=new _e.y(j=>{const ie=this._dragRef.moved.pipe((0,N.U)(ge=>({source:this,pointerPosition:ge.pointerPosition,event:ge.event,delta:ge.delta,distance:ge.distance}))).subscribe(j);return()=>{ie.unsubscribe()}}),this._dragRef=y.createDrag(t,{dragStartThreshold:f&&null!=f.dragStartThreshold?f.dragStartThreshold:5,pointerDirectionChangeThreshold:f&&null!=f.pointerDirectionChangeThreshold?f.pointerDirectionChangeThreshold:5,zIndex:f?.zIndex}),this._dragRef.data=this,l._dragInstances.push(this),f&&this._assignDefaults(f),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,C.Ig)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,x.q)(1),(0,Me.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,s=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=l._dragInstances.indexOf(this);t>-1&&l._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,C.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,s=this.dragStartDelay,c=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,p=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof s&&s?s:(0,C.su)(s),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(c).withPreviewTemplate(p).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,x.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(l._dragInstances.find(s=>s.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:s,constrainPosition:c,previewClass:p,boundaryElement:f,draggingDisabled:_,rootElementSelector:y,previewContainer:A}=t;this.disabled=_??!1,this.dragStartDelay=s||0,n&&(this.lockAxis=n),c&&(this.constrainPosition=c),p&&(this.previewClass=p),f&&(this.boundaryElement=f),y&&(this.rootElementSelector=y),A&&(this.previewContainer=A)}_setupHandlesListener(){this._handles.changes.pipe((0,Le.O)(this._handles),(0,at.b)(t=>{const n=t.filter(s=>s._parentDrag===this).map(s=>s.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,mt.w)(t=>(0,F.T)(...t.map(n=>n._stateChanges.pipe((0,Le.O)(n))))),(0,Me.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,s=t.element.nativeElement;t.disabled?n.disableHandle(s):n.enableHandle(s)})}}return l._dragInstances=[],l.\u0275fac=function(t){return new(t||l)(e.Y36(e.SBq),e.Y36(Bt,12),e.Y36(G.K0),e.Y36(e.R0b),e.Y36(e.s_b),e.Y36(Ft,8),e.Y36(lt.Is,8),e.Y36(yt),e.Y36(e.sBO),e.Y36(xt,10),e.Y36(Ct,12))},l.\u0275dir=e.lG2({type:l,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,s){if(1&t&&(e.Suo(s,Zt,5),e.Suo(s,Nt,5),e.Suo(s,xt,5)),2&t){let c;e.iGM(c=e.CRH())&&(n._previewTemplate=c.first),e.iGM(c=e.CRH())&&(n._placeholderTemplate=c.first),e.iGM(c=e.CRH())&&(n._handles=c)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e._Bn([{provide:Ct,useExisting:l}]),e.TTD]}),l})(),Vt=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({providers:[yt],imports:[Re.ZD]}),l})();const Jt=["dialogPopup"],Ht=["hueSlider"],Gt=["alphaSlider"];function Kt(l,o){if(1&l&&e._UZ(0,"div"),2&l){const t=e.oxw();e.Gre("arrow arrow-",t.cpUsePosition,""),e.Udp("left",t.cpArrowPosition)("top",t.arrowTop,"px")}}function Yt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onColorChange(s))})("dragStart",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDragStart("saturation-lightness"))})("dragEnd",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDragEnd("saturation-lightness"))}),e._UZ(1,"div",14),e.qZA()}if(2&l){const t=e.oxw();e.Udp("background-color",t.hueSliderColor),e.Q6J("rgX",1)("rgY",1),e.xp6(1),e.Udp("top",null==t.slider?null:t.slider.v,"px")("left",null==t.slider?null:t.slider.s,"px")}}function Ut(l,o){1&l&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30)(2,"path",31),e.qZA())}function Wt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAddPresetColor(s,c.selectedColor))}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw();e.Tol(t.cpAddColorButtonClass),e.Q6J("disabled",t.cpPresetColors&&t.cpPresetColors.length>=t.cpMaxPresetColorsLength),e.xp6(1),e.hij(" ",t.cpAddColorButtonText," ")}}function Qt(l,o){1&l&&e._UZ(0,"div",33)}function jt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAlphaInput(s))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("rg",1)("value",null==t.cmykText?null:t.cmykText.a)}}function Xt(l,o){1&l&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function $t(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",35)(2,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onCyanInput(s))}),e.qZA(),e.TgZ(3,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onMagentaInput(s))}),e.qZA(),e.TgZ(4,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onYellowInput(s))}),e.qZA(),e.TgZ(5,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onBlackInput(s))}),e.qZA(),e.YNc(6,jt,1,2,"input",37),e.qZA(),e.TgZ(7,"div",35)(8,"div"),e._uU(9,"C"),e.qZA(),e.TgZ(10,"div"),e._uU(11,"M"),e.qZA(),e.TgZ(12,"div"),e._uU(13,"Y"),e.qZA(),e.TgZ(14,"div"),e._uU(15,"K"),e.qZA(),e.YNc(16,Xt,2,0,"div",38),e.qZA()()}if(2&l){const t=e.oxw();e.Udp("display",3!==t.format?"none":"block"),e.xp6(2),e.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.c),e.xp6(1),e.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.m),e.xp6(1),e.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.y),e.xp6(1),e.Q6J("rg",100)("value",null==t.cmykText?null:t.cmykText.k),e.xp6(1),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel),e.xp6(10),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function ei(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAlphaInput(s))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function ti(l,o){1&l&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function ii(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",35)(2,"input",41),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onHueInput(s))}),e.qZA(),e.TgZ(3,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onSaturationInput(s))}),e.qZA(),e.TgZ(4,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onLightnessInput(s))}),e.qZA(),e.YNc(5,ei,1,2,"input",37),e.qZA(),e.TgZ(6,"div",35)(7,"div"),e._uU(8,"H"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"S"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"L"),e.qZA(),e.YNc(13,ti,2,0,"div",38),e.qZA()()}if(2&l){const t=e.oxw();e.Udp("display",2!==t.format?"none":"block"),e.xp6(2),e.Q6J("rg",360)("value",null==t.hslaText?null:t.hslaText.h),e.xp6(1),e.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.s),e.xp6(1),e.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.l),e.xp6(1),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel),e.xp6(8),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function ni(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAlphaInput(s))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("rg",1)("value",null==t.rgbaText?null:t.rgbaText.a)}}function ri(l,o){1&l&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function oi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",42)(1,"div",35)(2,"input",43),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onRedInput(s))}),e.qZA(),e.TgZ(3,"input",43),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onGreenInput(s))}),e.qZA(),e.TgZ(4,"input",43),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onBlueInput(s))}),e.qZA(),e.YNc(5,ni,1,2,"input",37),e.qZA(),e.TgZ(6,"div",35)(7,"div"),e._uU(8,"R"),e.qZA(),e.TgZ(9,"div"),e._uU(10,"G"),e.qZA(),e.TgZ(11,"div"),e._uU(12,"B"),e.qZA(),e.YNc(13,ri,2,0,"div",38),e.qZA()()}if(2&l){const t=e.oxw();e.Udp("display",1!==t.format?"none":"block"),e.xp6(2),e.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.r),e.xp6(1),e.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.g),e.xp6(1),e.Q6J("rg",255)("value",null==t.rgbaText?null:t.rgbaText.b),e.xp6(1),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel),e.xp6(8),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function si(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAlphaInput(s))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("rg",1)("value",t.hexAlpha)}}function ai(l,o){1&l&&(e.TgZ(0,"div"),e._uU(1,"A"),e.qZA())}function li(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",44)(1,"div",35)(2,"input",45),e.NdJ("blur",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onHexInput(null))})("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onHexInput(s))}),e.qZA(),e.YNc(3,si,1,2,"input",37),e.qZA(),e.TgZ(4,"div",35)(5,"div"),e._uU(6,"Hex"),e.qZA(),e.YNc(7,ai,2,0,"div",38),e.qZA()()}if(2&l){const t=e.oxw();e.Udp("display",0!==t.format?"none":"block"),e.ekj("hex-alpha","forced"===t.cpAlphaChannel),e.xp6(2),e.Q6J("value",t.hexText),e.xp6(1),e.Q6J("ngIf","forced"===t.cpAlphaChannel),e.xp6(4),e.Q6J("ngIf","forced"===t.cpAlphaChannel)}}function ci(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAlphaInput(s))}),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function hi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",35)(2,"input",36),e.NdJ("keyup.enter",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onAcceptColor(s))})("newValue",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onValueInput(s))}),e.qZA(),e.YNc(3,ci,1,2,"input",37),e.qZA(),e.TgZ(4,"div",35)(5,"div"),e._uU(6,"V"),e.qZA(),e.TgZ(7,"div"),e._uU(8,"A"),e.qZA()()()}if(2&l){const t=e.oxw();e.xp6(2),e.Q6J("rg",100)("value",null==t.hslaText?null:t.hslaText.l),e.xp6(1),e.Q6J("ngIf","disabled"!==t.cpAlphaChannel)}}function di(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",47)(1,"span",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onFormatToggle(-1))}),e.qZA(),e.TgZ(2,"span",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onFormatToggle(1))}),e.qZA()()}}function ui(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"span",55),e.NdJ("click",function(s){e.CHM(t);const c=e.oxw().$implicit,p=e.oxw(3);return e.KtG(p.onRemovePresetColor(s,c))}),e.qZA()}if(2&l){const t=e.oxw(4);e.Tol(t.cpRemoveColorButtonClass)}}function pi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.setColorFromString(c))}),e.YNc(1,ui,1,3,"span",54),e.qZA()}if(2&l){const t=o.$implicit,n=e.oxw(3);e.Udp("background-color",t),e.xp6(1),e.Q6J("ngIf",n.cpAddColorButton)}}function fi(l,o){if(1&l&&(e.TgZ(0,"div"),e.YNc(1,pi,2,3,"div",52),e.qZA()),2&l){const t=e.oxw(2);e.Tol(t.cpPresetColorsClass),e.xp6(1),e.Q6J("ngForOf",t.cpPresetColors)}}function gi(l,o){if(1&l&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&l){const t=e.oxw(2);e.Tol(t.cpPresetEmptyMessageClass),e.xp6(1),e.Oqu(t.cpPresetEmptyMessage)}}function mi(l,o){if(1&l&&(e.TgZ(0,"div",49),e._UZ(1,"hr"),e.TgZ(2,"div",50),e._uU(3),e.qZA(),e.YNc(4,fi,2,4,"div",51),e.YNc(5,gi,2,4,"div",51),e.qZA()),2&l){const t=e.oxw();e.xp6(3),e.Oqu(t.cpPresetLabel),e.xp6(1),e.Q6J("ngIf",null==t.cpPresetColors?null:t.cpPresetColors.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.cpPresetColors&&t.cpPresetColors.length)&&t.cpAddColorButton)}}function _i(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onCancelColor(s))}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw(2);e.Tol(t.cpCancelButtonClass),e.xp6(1),e.Oqu(t.cpCancelButtonText)}}function vi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.onAcceptColor(s))}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw(2);e.Tol(t.cpOKButtonClass),e.xp6(1),e.Oqu(t.cpOKButtonText)}}function yi(l,o){if(1&l&&(e.TgZ(0,"div",56),e.YNc(1,_i,2,4,"button",57),e.YNc(2,vi,2,4,"button",57),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.cpCancelButton),e.xp6(1),e.Q6J("ngIf",t.cpOKButton)}}function Ci(l,o){1&l&&e.GkF(0)}function xi(l,o){if(1&l&&(e.TgZ(0,"div",59),e.YNc(1,Ci,1,0,"ng-container",60),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.cpExtraTemplate)}}var oe=(()=>{return(l=oe||(oe={}))[l.HEX=0]="HEX",l[l.RGBA=1]="RGBA",l[l.HSLA=2]="HSLA",l[l.CMYK=3]="CMYK",oe;var l})();class ye{constructor(o,t,n,s){this.r=o,this.g=t,this.b=n,this.a=s}}class $e{constructor(o,t,n,s){this.h=o,this.s=t,this.v=n,this.a=s}}class ke{constructor(o,t,n,s){this.h=o,this.s=t,this.l=n,this.a=s}}class Je{constructor(o,t,n,s,c=1){this.c=o,this.m=t,this.y=n,this.k=s,this.a=c}}let Di=(()=>{class l{constructor(){this.newValue=new e.vpe}inputChange(t){const n=t.target.value;if(void 0===this.rg)this.newValue.emit(n);else{const s=parseFloat(n);this.newValue.emit({v:s,rg:this.rg})}}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275dir=e.lG2({type:l,selectors:[["","text",""]],hostBindings:function(t,n){1&t&&e.NdJ("input",function(c){return n.inputChange(c)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),l})(),Ei=(()=>{class l{constructor(t){this.elRef=t,this.dragEnd=new e.vpe,this.dragStart=new e.vpe,this.newValue=new e.vpe,this.listenerMove=n=>this.move(n),this.listenerStop=()=>this.stop()}mouseDown(t){this.start(t)}touchStart(t){this.start(t)}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-n.left-window.pageXOffset}getY(t){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-n.top-window.pageYOffset}setCursor(t){const n=this.elRef.nativeElement.offsetWidth,s=this.elRef.nativeElement.offsetHeight,c=Math.max(0,Math.min(this.getX(t),n)),p=Math.max(0,Math.min(this.getY(t),s));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:c/n,v:1-p/s,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:p/s,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:c/n,rgX:this.rgX})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.SBq))},l.\u0275dir=e.lG2({type:l,selectors:[["","slider",""]],hostBindings:function(t,n){1&t&&e.NdJ("mousedown",function(c){return n.mouseDown(c)})("touchstart",function(c){return n.touchStart(c)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),l})();class bt{constructor(o,t,n,s){this.h=o,this.s=t,this.v=n,this.a=s}}class Dt{constructor(o,t,n,s){this.h=o,this.s=t,this.v=n,this.a=s}}let ct=(()=>{class l{constructor(){this.active=null}setActive(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t}hsva2hsla(t){const n=t.h,s=t.s,c=t.v,p=t.a;if(0===c)return new ke(n,0,0,p);if(0===s&&1===c)return new ke(n,1,1,p);{const f=c*(2-s)/2;return new ke(n,c*s/(1-Math.abs(2*f-1)),f,p)}}hsla2hsva(t){const n=Math.min(t.h,1),s=Math.min(t.s,1),c=Math.min(t.l,1),p=Math.min(t.a,1);if(0===c)return new $e(n,0,0,p);{const f=c+s*(1-Math.abs(2*c-1))/2;return new $e(n,2*(f-c)/f,f,p)}}hsvaToRgba(t){let n,s,c;const p=t.h,f=t.s,_=t.v,y=t.a,A=Math.floor(6*p),O=6*p-A,M=_*(1-f),j=_*(1-O*f),ie=_*(1-(1-O)*f);switch(A%6){case 0:n=_,s=ie,c=M;break;case 1:n=j,s=_,c=M;break;case 2:n=M,s=_,c=ie;break;case 3:n=M,s=j,c=_;break;case 4:n=ie,s=M,c=_;break;case 5:n=_,s=M,c=j;break;default:n=0,s=0,c=0}return new ye(n,s,c,y)}cmykToRgb(t){return new ye((1-t.c)*(1-t.k),(1-t.m)*(1-t.k),(1-t.y)*(1-t.k),t.a)}rgbaToCmyk(t){const n=1-Math.max(t.r,t.g,t.b);return 1===n?new Je(0,0,0,1,t.a):new Je((1-t.r-n)/(1-n),(1-t.g-n)/(1-n),(1-t.b-n)/(1-n),n,t.a)}rgbaToHsva(t){let n,s;const c=Math.min(t.r,1),p=Math.min(t.g,1),f=Math.min(t.b,1),_=Math.min(t.a,1),y=Math.max(c,p,f),A=Math.min(c,p,f),O=y,M=y-A;if(s=0===y?0:M/y,y===A)n=0;else{switch(y){case c:n=(p-f)/M+(p<f?6:0);break;case p:n=(f-c)/M+2;break;case f:n=(c-p)/M+4;break;default:n=0}n/=6}return new $e(n,s,O,_)}rgbaToHex(t,n){let s="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return n&&(s+=(256|Math.round(255*t.a)).toString(16).substr(1)),s}normalizeCMYK(t){return new Je(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new Je(Math.floor(100*t.c),Math.floor(100*t.m),Math.floor(100*t.y),Math.floor(100*t.k),t.a)}denormalizeRGBA(t){return new ye(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",n=!1){let s=null;t=(t||"").toLowerCase();const c=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(p){return new ye(parseInt(p[2],10)/255,parseInt(p[3],10)/255,parseInt(p[4],10)/255,isNaN(parseFloat(p[5]))?1:parseFloat(p[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(p){return new ke(parseInt(p[2],10)/360,parseInt(p[3],10)/100,parseInt(p[4],10)/100,isNaN(parseFloat(p[5]))?1:parseFloat(p[5]))}}];c.push(n?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(p){return new ye(parseInt(p[1],16)/255,parseInt(p[2],16)/255,parseInt(p[3],16)/255,parseInt(p[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(p){return new ye(parseInt(p[1],16)/255,parseInt(p[2],16)/255,parseInt(p[3],16)/255,1)}}),c.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(p){return new ye(parseInt(p[1]+p[1],16)/255,parseInt(p[2]+p[2],16)/255,parseInt(p[3]+p[3],16)/255,1)}});for(const p in c)if(c.hasOwnProperty(p)){const f=c[p],_=f.re.exec(t),y=_&&f.parse(_);if(y)return y instanceof ye?s=this.rgbaToHsva(y):y instanceof ke&&(s=this.hsla2hsva(y)),s}return s}outputFormat(t,n,s){switch("auto"===n&&(n=t.a<1?"rgba":"hex"),n){case"hsla":const c=this.hsva2hsla(t),p=new ke(Math.round(360*c.h),Math.round(100*c.s),Math.round(100*c.l),Math.round(100*c.a)/100);return t.a<1||"always"===s?"hsla("+p.h+","+p.s+"%,"+p.l+"%,"+p.a+")":"hsl("+p.h+","+p.s+"%,"+p.l+"%)";case"rgba":const f=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===s?"rgba("+f.r+","+f.g+","+f.b+","+Math.round(100*f.a)/100+")":"rgb("+f.r+","+f.g+","+f.b+")";default:const _="always"===s||"forced"===s;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),_)}}}return l.\u0275fac=function(t){return new(t||l)},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac}),l})();const Et=typeof window<"u"&&"ontouchstart"in window;let Si=(()=>{class l{constructor(t,n,s,c,p,f){this.ngZone=t,this.elRef=n,this.cdRef=s,this.document=c,this.platformId=p,this.service=f,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[oe.HEX,oe.RGBA,oe.HSLA,oe.CMYK],this.useRootViewContainer=!1,this.eyeDropperSupported=(0,G.NF)(this.platformId)&&"EyeDropper"in this.document.defaultView}handleEsc(t){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(t)}handleEnter(t){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(t)}ngOnInit(){this.slider=new bt(0,0,0,0),this.sliderDimMax=new Dt(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?oe.CMYK:"rgba"===this.cpOutputFormat?oe.RGBA:"hsla"===this.cpOutputFormat?oe.HSLA:oe.HEX,this.listenerMouseDown=s=>{this.onMouseDown(s)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new Dt(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(t,n=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(t),this.setColorFromString(t,n),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(t,n,s,c,p,f,_,y,A,O,M,j,ie,ge,ne,De,ot,Ue,st,fr,gr,mr,_r,vr,yr,Cr,xr,wr,br,Dr,Er,Sr,kr,Ar,Ir,Tr,Pr,Or){this.setInitialColor(s),this.setColorMode(y),this.isIE10=10===function bi(){let l="";typeof navigator<"u"&&(l=navigator.userAgent.toLowerCase());const o=l.indexOf("msie ");return o>0&&parseInt(l.substring(o+5,l.indexOf(".",o)),10)}(),this.directiveInstance=t,this.directiveElementRef=n,this.cpDisableInput=j,this.cpCmykEnabled=A,this.cpAlphaChannel=O,this.cpOutputFormat=M,this.cpDialogDisplay=f,this.cpIgnoredElements=ie,this.cpSaveClickOutside=ge,this.cpCloseClickOutside=ne,this.useRootViewContainer=De,this.width=this.cpWidth=parseInt(c,10),this.height=this.cpHeight=parseInt(p,10),this.cpPosition=ot,this.cpPositionOffset=parseInt(Ue,10),this.cpOKButton=Cr,this.cpOKButtonText=wr,this.cpOKButtonClass=xr,this.cpCancelButton=br,this.cpCancelButtonText=Er,this.cpCancelButtonClass=Dr,this.cpEyeDropper=Tr,this.fallbackColor=_||"#fff",this.setPresetConfig(fr,gr),this.cpPresetColorsClass=mr,this.cpMaxPresetColorsLength=_r,this.cpPresetEmptyMessage=vr,this.cpPresetEmptyMessageClass=yr,this.cpAddColorButton=Sr,this.cpAddColorButtonText=Ar,this.cpAddColorButtonClass=kr,this.cpRemoveColorButtonClass=Ir,this.cpTriggerElement=Pr,this.cpExtraTemplate=Or,st||(this.dialogArrowOffset=0),"inline"===f&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===M&&"always"!==O&&"forced"!==O&&(this.cpAlphaChannel="disabled")}setColorMode(t){switch(t.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(t){this.initialColor=t}setPresetConfig(t,n){this.cpPresetLabel=t,this.cpPresetColors=n}setColorFromString(t,n=!0,s=!0){let c;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(c=this.service.stringToHsva(t,!0),!c&&!this.hsva&&(c=this.service.stringToHsva(t,!1))):c=this.service.stringToHsva(t,!1),!c&&!this.hsva&&(c=this.service.stringToHsva(this.fallbackColor,!1)),c&&(this.hsva=c,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,s))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(t){this.directiveInstance.sliderDragEnd({slider:t,color:this.outputColor})}onDragStart(t){this.directiveInstance.sliderDragStart({slider:t,color:this.outputColor})}onMouseDown(t){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&t.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,t.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,t.target)&&0===this.cpIgnoredElements.filter(n=>n===t.target).length&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(t){t.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(t){this.hsva=null,t.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){this.eyeDropperSupported&&(new window.EyeDropper).open().then(n=>{this.setColorFromString(n.sRGBHex,!0)})}onFormatToggle(t){const n=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),s=((this.dialogInputFields.indexOf(this.format)+t)%n+n)%n;this.format=this.dialogInputFields[s]}onColorChange(t){this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(t){this.hsva.h=t.v/t.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(t){this.hsva.v=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(t){this.hsva.a=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(t){if(null===t)this.updateColorPicker();else{t&&"#"!==t[0]&&(t="#"+t);let n=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(n=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const s=n.test(t);s&&(t.length<5&&(t="#"+t.substring(1).split("").map(c=>c+c).join("")),"forced"===this.cpAlphaChannel&&(t+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(t,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:s,value:t,color:this.outputColor})}}onRedInput(t){const n=this.service.hsvaToRgba(this.hsva),s=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;s&&(n.r=t.v/t.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:s,value:n.r,color:this.outputColor})}onBlueInput(t){const n=this.service.hsvaToRgba(this.hsva),s=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;s&&(n.b=t.v/t.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:s,value:n.b,color:this.outputColor})}onGreenInput(t){const n=this.service.hsvaToRgba(this.hsva),s=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;s&&(n.g=t.v/t.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:s,value:n.g,color:this.outputColor})}onHueInput(t){const n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:n,value:this.hsva.h,color:this.outputColor})}onValueInput(t){const n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(this.hsva.v=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:n,value:this.hsva.v,color:this.outputColor})}onAlphaInput(t){const n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(this.hsva.a=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:n,value:this.hsva.a,color:this.outputColor})}onLightnessInput(t){const n=this.service.hsva2hsla(this.hsva),s=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;s&&(n.l=t.v/t.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:s,value:n.l,color:this.outputColor})}onSaturationInput(t){const n=this.service.hsva2hsla(this.hsva),s=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;s&&(n.s=t.v/t.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:s,value:n.s,color:this.outputColor})}onCyanInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.c=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.m=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.y=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.k=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(t,n){t.stopPropagation(),this.cpPresetColors.filter(s=>s===n).length||(this.cpPresetColors=this.cpPresetColors.concat(n),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(t,n){t.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(s=>s!==n),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{Et?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(Et?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(t=!0,n=!0,s=!1){if(this.sliderDimMax){let c,p,f;2===this.cpColorMode&&(this.hsva.s=0);const _=this.outputColor;if(p=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(s?(f=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(f)):(f=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(f))),f=this.service.denormalizeRGBA(f),this.sliderH=this.hsva.h):f=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),c=this.service.denormalizeRGBA(this.service.hsvaToRgba(new $e(this.sliderH||this.hsva.h,1,1,1))),n&&(this.hslaText=new ke(Math.round(360*p.h),Math.round(100*p.s),Math.round(100*p.l),Math.round(100*p.a)/100),this.rgbaText=new ye(f.r,f.g,f.b,Math.round(100*f.a)/100),this.cpCmykEnabled&&(this.cmykText=new Je(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(f,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==oe.RGBA&&this.format!==oe.CMYK&&this.format!==oe.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?oe.RGBA:oe.HEX),this.hueSliderColor="rgb("+c.r+","+c.g+","+c.b+")",this.alphaSliderColor="rgb("+f.r+","+f.g+","+f.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==oe.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const y=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${y})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new bt((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),t&&_!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let s,t="static",n="",c=null,p=null,f=this.directiveElementRef.nativeElement.parentNode;const _=this.dialogElement.nativeElement.offsetHeight;for(;null!==f&&"HTML"!==f.tagName;){if(s=window.getComputedStyle(f),t=s.getPropertyValue("position"),n=s.getPropertyValue("transform"),"static"!==t&&null===c&&(c=f),n&&"none"!==n&&null===p&&(p=f),"fixed"===t){c=p;break}f=f.parentNode}const y=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!c||c instanceof HTMLUnknownElement))this.top=y.top,this.left=y.left;else{null===c&&(c=f);const O=this.createDialogBox(c,"fixed"!==t);this.top=y.top-O.top,this.left=y.left-O.left}"fixed"===t&&(this.position="fixed");let A=this.cpPosition;if("auto"===this.cpPosition){const O=this.dialogElement.nativeElement.getBoundingClientRect(),M=window.innerHeight,j=window.innerWidth,ie=this.elRef.nativeElement.getBoundingClientRect();this.top+O.height>M&&(this.top=M-O.height,this.cpArrowPosition=ie.x/2-20),this.left+O.width>j&&(this.left=j-O.width,this.cpArrowPosition=ie.x/2-20),A=function wi(l,o){let t="right",n="bottom";const{height:s,width:c}=l,{top:p,left:f}=o,_=p+o.height,y=f+o.width,A=p-s<0,O=_+s>(window.innerHeight||document.documentElement.clientHeight),M=f-c<0,j=y+c>(window.innerWidth||document.documentElement.clientWidth);return O&&(n="top"),A&&(n="bottom"),M&&(t="right"),j&&(t="left"),A&&O&&M&&j?["left","right","top","bottom"].reduce((ne,De)=>l[ne]>l[De]?ne:De):M&&j?A?"bottom":O||p>_?"top":"bottom":A&&O?M?"right":j||f>y?"left":"right":`${n}-${t}`}(O,this.cpTriggerElement.nativeElement.getBoundingClientRect())}"top"===A?(this.arrowTop=_-1,this.top-=_+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*y.width-this.dialogArrowOffset):"bottom"===A?(this.top+=y.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*y.width-this.dialogArrowOffset):"top-left"===A||"left-top"===A?(this.top-=_-y.height+y.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===A||"right-top"===A?(this.top-=_-y.height+y.height*this.cpPositionOffset/100,this.left+=y.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===A||"bottom-left"===A||"left-bottom"===A?(this.top+=y.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=y.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=y.width+this.dialogArrowSize-2),this.cpUsePosition=A}}isDescendant(t,n){let s=n.parentNode;for(;null!==s;){if(s===t)return!0;s=s.parentNode}return!1}createDialogBox(t,n){const{top:s,left:c}=t.getBoundingClientRect();return{top:s+(n?window.pageYOffset:0),left:c+(n?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(G.K0),e.Y36(e.Lbi),e.Y36(ct))},l.\u0275cmp=e.Xpm({type:l,selectors:[["color-picker"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Jt,7),e.Gf(Ht,7),e.Gf(Gt,7)),2&t){let s;e.iGM(s=e.CRH())&&(n.dialogElement=s.first),e.iGM(s=e.CRH())&&(n.hueSlider=s.first),e.iGM(s=e.CRH())&&(n.alphaSlider=s.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keyup.esc",function(c){return n.handleEsc(c)},!1,e.evT)("keyup.enter",function(c){return n.handleEnter(c)},!1,e.evT)},decls:30,vars:51,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"left","class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(c){return c.stopPropagation()}),e.YNc(2,Kt,1,7,"div",2),e.YNc(3,Yt,2,8,"div",3),e.TgZ(4,"div",4)(5,"div",5),e._UZ(6,"div",6),e.TgZ(7,"div",7),e.NdJ("click",function(){return n.eyeDropperSupported&&n.cpEyeDropper&&n.onEyeDropper()}),e.YNc(8,Ut,3,0,"svg",8),e.qZA(),e.YNc(9,Wt,2,5,"button",9),e.qZA(),e.TgZ(10,"div",10),e.YNc(11,Qt,1,0,"div",11),e.TgZ(12,"div",12,13),e.NdJ("newValue",function(c){return n.onHueChange(c)})("dragStart",function(){return n.onDragStart("hue")})("dragEnd",function(){return n.onDragEnd("hue")}),e._UZ(14,"div",14),e.qZA(),e.TgZ(15,"div",15,16),e.NdJ("newValue",function(c){return n.onValueChange(c)})("dragStart",function(){return n.onDragStart("value")})("dragEnd",function(){return n.onDragEnd("value")}),e._UZ(17,"div",14),e.qZA(),e.TgZ(18,"div",17,18),e.NdJ("newValue",function(c){return n.onAlphaChange(c)})("dragStart",function(){return n.onDragStart("alpha")})("dragEnd",function(){return n.onDragEnd("alpha")}),e._UZ(20,"div",14),e.qZA()()(),e.YNc(21,$t,17,12,"div",19),e.YNc(22,ii,14,10,"div",20),e.YNc(23,oi,14,10,"div",21),e.YNc(24,li,8,7,"div",22),e.YNc(25,hi,9,3,"div",23),e.YNc(26,di,3,0,"div",24),e.YNc(27,mi,6,3,"div",25),e.YNc(28,yi,3,2,"div",26),e.YNc(29,xi,2,1,"div",27),e.qZA()),2&t&&(e.Udp("display",n.show?"block":"none")("visibility",n.hidden?"hidden":"visible")("top",n.top,"px")("left",n.left,"px")("position",n.position)("height",n.cpHeight,"px")("width",n.cpWidth,"px"),e.ekj("open",n.show),e.xp6(2),e.Q6J("ngIf","popup"===n.cpDialogDisplay),e.xp6(1),e.Q6J("ngIf",1===(n.cpColorMode||1)),e.xp6(4),e.Udp("background-color",n.selectedColor)("cursor",n.eyeDropperSupported&&n.cpEyeDropper?"pointer":null),e.xp6(1),e.Q6J("ngIf",n.eyeDropperSupported&&n.cpEyeDropper),e.xp6(1),e.Q6J("ngIf",n.cpAddColorButton),e.xp6(2),e.Q6J("ngIf","disabled"===n.cpAlphaChannel),e.xp6(1),e.Udp("display",1===(n.cpColorMode||1)?"block":"none"),e.Q6J("rgX",1),e.xp6(2),e.Udp("left",null==n.slider?null:n.slider.h,"px"),e.xp6(1),e.Udp("display",2===(n.cpColorMode||1)?"block":"none"),e.Q6J("rgX",1),e.xp6(2),e.Udp("right",null==n.slider?null:n.slider.v,"px"),e.xp6(1),e.Udp("display","disabled"===n.cpAlphaChannel?"none":"block")("background-color",n.alphaSliderColor),e.Q6J("rgX",1),e.xp6(2),e.Udp("left",null==n.slider?null:n.slider.a,"px"),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&2===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),e.xp6(1),e.Q6J("ngIf",(null==n.cpPresetColors?null:n.cpPresetColors.length)||n.cpAddColorButton),e.xp6(1),e.Q6J("ngIf",n.cpOKButton||n.cpCancelButton),e.xp6(1),e.Q6J("ngIf",n.cpExtraTemplate))},dependencies:[G.sg,G.O5,G.tP,Di,Ei],styles:['.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,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)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}\n'],encapsulation:2}),l})(),St=(()=>{class l{constructor(t,n,s,c,p,f){this.injector=t,this.cfr=n,this.appRef=s,this.vcRef=c,this.elRef=p,this._service=f,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpEyeDropper=!1,this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpArrowPosition=0,this.cpInputChange=new e.vpe(!0),this.cpToggleChange=new e.vpe(!0),this.cpSliderChange=new e.vpe(!0),this.cpSliderDragEnd=new e.vpe(!0),this.cpSliderDragStart=new e.vpe(!0),this.colorPickerOpen=new e.vpe(!0),this.colorPickerClose=new e.vpe(!0),this.colorPickerCancel=new e.vpe(!0),this.colorPickerSelect=new e.vpe(!0),this.colorPickerChange=new e.vpe(!1),this.cpCmykColorChange=new e.vpe(!0),this.cpPresetColorsChange=new e.vpe(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(t){this.inputChange(t)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(t){t.cpToggle&&!this.cpDisabled&&(t.cpToggle.currentValue?this.openDialog():t.cpToggle.currentValue||this.closeDialog()),t.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(t.colorPicker.currentValue),this.dialog.setColorFromString(t.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(t.cpPresetLabel||t.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const c=this.injector.get(this.appRef.componentTypes[0],e.zs3.NULL);c!==e.zs3.NULL?t=c.vcRef||c.viewContainerRef||this.vcRef:this.viewAttachedToAppRef=!0}const n=this.cfr.resolveComponentFactory(Si);if(this.viewAttachedToAppRef)this.cmpRef=n.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const s=e.zs3.create({providers:[],parent:t.injector});this.cmpRef=t.createComponent(n,0,s,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(t){this.cpCmykColorChange.emit(t)}stateChanged(t){this.cpToggleChange.emit(t),t?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(t,n=!0){this.ignoreChanges=n,this.colorPickerChange.emit(t)}colorSelected(t){this.colorPickerSelect.emit(t)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const t=this.elRef.nativeElement,n=this.cpIgnoredElements.filter(s=>s===t);!this.cpDisabled&&!n.length&&(typeof document<"u"&&t===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(t){this.dialog?this.dialog.setColorFromString(t.target.value,!0):(this.colorPicker=t.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(t){this.cpInputChange.emit(t)}sliderChanged(t){this.cpSliderChange.emit(t)}sliderDragEnd(t){this.cpSliderDragEnd.emit(t)}sliderDragStart(t){this.cpSliderDragStart.emit(t)}presetColorsChanged(t){this.cpPresetColorsChange.emit(t)}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.zs3),e.Y36(e._Vd),e.Y36(e.z2F),e.Y36(e.s_b),e.Y36(e.SBq),e.Y36(ct))},l.\u0275dir=e.lG2({type:l,selectors:[["","colorPicker",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n.handleClick()})("focus",function(){return n.handleFocus()})("input",function(c){return n.handleInput(c)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpArrowPosition:"cpArrowPosition",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[e.TTD]}),l})(),Ai=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({providers:[ct],imports:[G.ez]}),l})();var kt=P(1951),qe=P(5861),At=P(8372),W=P(6578),de=(()=>{return(l=de||(de={})).TOP="top",l.TOP_RIGHT="top-right",l.RIGHT="right",l.BOTTOM_RIGHT="bottom-right",l.BOTTOM="bottom",l.BOTTOM_LEFT="bottom-left",l.LEFT="left",l.TOP_LEFT="top-left",de;var l})();let It=(()=>{class l{constructor(t,n){this.elementRef=t,this.renderer2=n,this.applyClass="resizing",this.resizeStart=new e.vpe,this.resize=new e.vpe,this.resizeEnd=new e.vpe,this.listenMouseDownEvent()}ngOnChanges(t){t.useDrag&&this.listenMouseDownEvent()}ngOnDestroy(){this.mouseClickListener&&this.mouseClickListener(),this.mouseUpListener&&this.mouseUpListener(),this.mouseMoveListener&&this.mouseMoveListener()}listenMouseDownEvent(){this.mouseClickListener&&this.mouseClickListener(),this.mouseClickListener=this.renderer2.listen(this.elementRef.nativeElement,this.useDrag?"dragstart":"mousedown",n=>this.onMouseDown(n))}onMouseDown(t){t.preventDefault(),this.setOriginalData(t),this.resizeStart.emit(this.generateValuesForEvent(t)),this.mouseUpListener=this.renderer2.listen("document","mouseup",n=>this.onMouseUp(n)),this.mouseMoveListener=this.renderer2.listen("document","mousemove",n=>this.onMouseMove(n)),this.renderer2.addClass(this.targetNativeElement,this.applyClass)}onMouseUp(t){const n=this.generateValuesForEvent(t);this.resize.emit(n),this.mouseMoveListener(),this.mouseUpListener(),this.renderer2.removeClass(this.targetNativeElement,this.applyClass),this.resizeEnd.emit(n)}onMouseMove(t){this.resize.emit(this.generateValuesForEvent(t))}setOriginalData(t){if(this.originalEvent=t,this.targetElement){const n=this.targetNativeElement;this.targetElementWidthValue=n.offsetWidth,this.targetElementHeightValue=n.offsetHeight,this.targetElementTopValue=n.offsetTop,this.targetElementLeftValue=n.offsetLeft}else this.targetElementWidthValue=0,this.targetElementHeightValue=0,this.targetElementTopValue=0,this.targetElementLeftValue=0}get targetNativeElement(){return this.targetElement instanceof e.SBq?this.targetElement.nativeElement:this.targetElement}generateValuesForEvent(t){let c=t.clientX-this.originalEvent.clientX,p=t.clientY-this.originalEvent.clientY,f=p,_=c;switch(this.direction){case de.TOP:p*=-1,c=0,_=0;break;case de.TOP_RIGHT:p*=-1,_=0;break;case de.RIGHT:p=0,f=0,_=0;break;case de.BOTTOM_RIGHT:f=0,_=0;break;case de.BOTTOM:c=0,_=0,f=0;break;case de.BOTTOM_LEFT:c*=-1,f=0;break;case de.LEFT:c*=-1,p=0,f=0;break;case de.TOP_LEFT:p*=-1,c*=-1}let y=this.targetElementWidthValue+c,A=this.targetElementHeightValue+p;this.proportionalResize&&(y>A?y=A:A=y),A<=1&&(f+=A),y<=1&&(_+=y),y<=0&&(y=0),A<=0&&(A=0);let O=this.targetElementTopValue+f,M=this.targetElementLeftValue+_;return this.rect&&(O<this.rect.top&&(A=this.targetElementHeightValue+this.targetElementTopValue-this.rect.top,O=this.rect.top),A+O>this.rect.height&&(A=this.rect.height-O),M<this.rect.left&&(y=this.targetElementWidthValue+this.targetElementLeftValue-this.rect.left,M=this.rect.left),y+M>this.rect.width&&(y=this.rect.width-M)),{originalEvent:this.originalEvent,currentWidthValue:y,currentHeightValue:A,currentTopValue:O,currentLeftValue:M,originalWidthValue:this.targetElementWidthValue,originalHeightValue:this.targetElementHeightValue,originalTopValue:this.targetElementTopValue,originalLeftValue:this.targetElementLeftValue,differenceWidthValue:y-this.targetElementWidthValue,differenceHeightValue:A-this.targetElementHeightValue,differenceTopValue:O-this.targetElementTopValue,differenceLeftValue:M-this.targetElementLeftValue,direction:this.direction}}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.SBq),e.Y36(e.Qsj))},l.\u0275dir=e.lG2({type:l,selectors:[["","resize",""],["","resizeStart",""],["","resizeEnd",""]],hostVars:1,hostBindings:function(t,n){2&t&&e.uIk("draggable",n.useDrag)},inputs:{applyClass:"applyClass",targetElement:"targetElement",direction:"direction",proportionalResize:"proportionalResize",rect:"rect",useDrag:"useDrag"},outputs:{resizeStart:"resizeStart",resize:"resize",resizeEnd:"resizeEnd"},features:[e.TTD]}),l})(),Ii=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({}),l})();function ht(l,o){return l&&o?Math.abs(l.getTime()-o.getTime()):0}function Ae(l,o){return l&&o?Math.abs(l.getTime()-o.getTime())/1e3:0}var Ti=P(7340),dt=P(7312),Ie=P(1576),Tt=P(5829);const Pi=["wordOrLetterElementRef"],Oi=["pElementRef"];function Ri(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",11),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.colorBackground=s)}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.colorBackground)}}function Mi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize())}),e._uU(1,"add"),e.qZA()}}function Li(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize())}),e._uU(1,"remove"),e.qZA()}}function zi(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",11),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.colorCaracter=s)}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.colorCaracter)}}class He{constructor(o,t,n){this.animationBuilder=o,this.configurationService=t,this.hostEl=n,this.bufferDoDetectSensorial=100,this.mouseMovedEvent=new H.x,this.onResetDasherEvent=new H.x,this.onContentChangedEvent=new H.x,this.wordOrLetterSelectedEvent=new e.vpe,this.fontSize="18px",this.animateDivSelection=!1,this.wordOrLetterSelected=!1,this.AngularResizeElementDirection=de}ngOnInit(){this.mouseMovedEvent.subscribe(o=>{}),this.onResetDasherEvent.subscribe(()=>{this.wordOrLetterSelected=!1}),this.onContentChangedEvent.subscribe(o=>{o.id==this.elId&&(this.wordOrLetter=o.value)}),this.configurationService.isAnyControlConfigured()&&this.constantCheckElementOverAnother()}ngOnDestroy(){this.intervalCheckColision&&clearInterval(this.intervalCheckColision),this.intervalSensorialDetection&&clearInterval(this.intervalSensorialDetection)}mouseOverWordOrLetterEvent(){if(this.configurationService.isAnyControlConfigured())return;let o=()=>{this.enableLayoutEdition||(this.clearSensorialBufers(),this.wordOrLetterSelectedEvent.next(this.wordOrLetter))};this.doDetect()?o():this.intervalSensorialDetection||(this.intervalSensorialDetection=setInterval(()=>{o()},this.configurationService.sensorialSelectionDelayMs-this.bufferDoDetectSensorial))}mouseOutWordOrLetterEvent(){this.configurationService.isAnyControlConfigured()||this.clearSensorialBufers()}incFontSize(){this.fontSize=(Number(this.fontSize.split("px")[0])+1).toString()+"px"}decFontSize(){this.fontSize=(Number(this.fontSize.split("px")[0])-1).toString()+"px"}onResize(o){const t=this.wordOrLetterElementRef.nativeElement,n=t.parentElement.getBoundingClientRect().width,s=t.parentElement.getBoundingClientRect().height;t.style.position="absolute",t.style.flex="none",t.style.width=o.currentWidthValue+"px",t.style.height=o.currentHeightValue+"px",t.parentElement.style.width=n+"px",t.parentElement.style.height=s+"px",t.classList.add("el_changed")}cdkDragStarted(){this.wordOrLetterElementRef.nativeElement.classList.add("el_changed")}constantCheckElementOverAnother(){this.intervalCheckColision=setInterval(()=>{(0,W.ug)(document.getElementById("suportDiv"),this.pElementRef.nativeElement)?(this.wordOrLetterSelected=!0,this.doDetect()&&this.wordOrLetterSelectedEvent.next(this.wordOrLetter)):(this.wordOrLetterSelected=!1,this.clearSensorialBufers())},50)}clearSensorialBufers(){this.animateDivSelection=!1,this.lastSensorialDetectionTime=void 0,this.intervalSensorialDetection&&(clearInterval(this.intervalSensorialDetection),this.intervalSensorialDetection=void 0)}doDetect(){return!this.enableLayoutEdition&&(!this.configurationService.isDelayedDetectionAction()||(this.animateDivSelection||(this.hostEl.nativeElement.style.setProperty("--animation-duration",this.configurationService.sensorialSelectionDelayMs/1e3+"s"),this.animateDivSelection=!0),this.lastSensorialDetectionTime||(this.lastSensorialDetectionTime=new Date),ht(this.lastSensorialDetectionTime,new Date)>=this.configurationService.sensorialSelectionDelayMs))}static#e=this.\u0275fac=function(t){return new(t||He)(e.Y36(Ti._j),e.Y36(dt.x),e.Y36(e.SBq))};static#t=this.\u0275cmp=e.Xpm({type:He,selectors:[["app-dasher-on-screen-player"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Pi,5),e.Gf(Oi,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.wordOrLetterElementRef=s.first),e.iGM(s=e.CRH())&&(n.pElementRef=s.first)}},inputs:{elId:"elId",mouseMovedEvent:"mouseMovedEvent",onResetDasherEvent:"onResetDasherEvent",enableLayoutEdition:"enableLayoutEdition",onContentChangedEvent:"onContentChangedEvent",showBackGroundSelection:"showBackGroundSelection"},outputs:{wordOrLetterSelectedEvent:"wordOrLetterSelectedEvent"},decls:14,vars:25,consts:[["cdkDrag","",3,"id","cdkDragDisabled","ngClass","cdkDragStarted"],["wordOrLetterElementRef",""],[1,"resize","resize__right",3,"targetElement","direction","resize"],[1,"resize","resize__bottom",3,"targetElement","direction","resize"],[1,"resize","resize__top",3,"targetElement","direction","resize"],[1,"resize","resize__left",3,"targetElement","direction","resize"],["fxLayoutAlign","center center",1,"action-sized","action-border",3,"mouseover","mouseout"],["class","icon-display","style","width: 100%;",3,"colorPicker","colorPickerChange",4,"ngIf"],["class","icon-display","style","width: 100%;",3,"click",4,"ngIf"],["fxLayoutAlign","center center",2,"width","100%",3,"id"],["pElementRef",""],[1,"icon-display",2,"width","100%",3,"colorPicker","colorPickerChange"],[1,"icon-display",2,"width","100%",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.NdJ("cdkDragStarted",function(){return n.cdkDragStarted()}),e.TgZ(2,"div",2),e.NdJ("resize",function(c){return n.onResize(c)}),e.qZA(),e.TgZ(3,"div",3),e.NdJ("resize",function(c){return n.onResize(c)}),e.qZA(),e.TgZ(4,"div",4),e.NdJ("resize",function(c){return n.onResize(c)}),e.qZA(),e.TgZ(5,"div",5),e.NdJ("resize",function(c){return n.onResize(c)}),e.qZA(),e.TgZ(6,"div",6),e.NdJ("mouseover",function(){return n.mouseOverWordOrLetterEvent()})("mouseout",function(){return n.mouseOutWordOrLetterEvent()}),e.YNc(7,Ri,2,1,"mat-icon",7),e.YNc(8,Mi,2,0,"mat-icon",8),e.TgZ(9,"p",9,10),e._uU(11),e.qZA(),e.YNc(12,Li,2,0,"mat-icon",8),e.YNc(13,zi,2,1,"mat-icon",7),e.qZA()()),2&t){const s=e.MAs(1);e.Udp("background",n.colorBackground),e.ekj("fill-animation",n.animateDivSelection),e.Q6J("id",n.elId)("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.showBackGroundSelection?"full-div-selection":"full-div"),e.xp6(2),e.Q6J("targetElement",s)("direction",n.AngularResizeElementDirection.RIGHT),e.xp6(1),e.Q6J("targetElement",s)("direction",n.AngularResizeElementDirection.BOTTOM),e.xp6(1),e.Q6J("targetElement",s)("direction",n.AngularResizeElementDirection.TOP),e.xp6(1),e.Q6J("targetElement",s)("direction",n.AngularResizeElementDirection.LEFT),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.fontSize)("color",n.colorCaracter),e.Q6J("id",n.elId+"_caracter"),e.xp6(2),e.Oqu(n.wordOrLetter),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition)}},dependencies:[G.mk,G.O5,Ie.Wh,Tt.oO,Ve.Hw,wt,It,St],styles:["[_nghost-%COMP%]{--animation-duration: 5s}.action-border[_ngcontent-%COMP%]{border-width:2px;border-style:groove;border-color:#fafad2;margin:0!important}.action-sized[_ngcontent-%COMP%]{width:100%;height:100%;justify-content:space-between!important}.full-div[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;background:linear-gradient(to right,rgb(230,255,230) 50%,transparent 0);background-size:200% 100%;background-position:right;background-color:#fff}.full-div-selection[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;background:linear-gradient(to right,rgb(230,255,230) 50%,transparent 0);background-size:200% 100%;background-position:right;background-color:#fafad2}@keyframes _ngcontent-%COMP%_makeItfadeIn{to{background-position:left}}.fill-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_makeItfadeIn var(--animation-duration) 0s forwards}"]})}var Pt=P(7439);const Te=["b","c","d","f","g","j","l","m","n","p","s","t","h"].concat(["a","e","q","r"]),Pe=["a","e","i","o","u","q","r","v","w","x","y","k","z"].concat(["b","c","j","l"]),ut=["0","1","2","3","4","5","6","7","8","9","=","+","-","*","|","'",'"'],pt=[".",",",":","^","~","[","]","`","\xb4","!","?","/",";","(",")","{","}"],Ni=["S.1","c","d","f","g","S.2","S.3","m","n","p","s","t","h","a","e","q","r"],Zi=["S.1","e","i","o","u","S.2","S.3","v","w","x","y","k","z","b","c","j","l"],qi=["b","c","d","f","g","j","l","m","n","p","s","t","h","a","e","i","o","u","q","r","v","w","x","y","k","z"],Ot={"~":"\u0303","^":"\u0302","`":"\u0300","\xb4":"\u0301"};function ft(l){return l%2==0}var Rt=P(8933),gt=P(9476),et=P(7274);function Hi(l,o){1&l&&e._UZ(0,"mat-spinner",2)}class Ge{constructor(o,t){this.dialogRef=o,this.data=t,this.message=this.data.message,this.showSpinner=this.data.showSpinner}static#e=this.\u0275fac=function(t){return new(t||Ge)(e.Y36(et.so),e.Y36(et.WI))};static#t=this.\u0275cmp=e.Xpm({type:Ge,selectors:[["app-dasher-on-screen-feedback-modal"]],decls:4,vars:2,consts:[["fxLayoutAlign","center center","fxLayout","column",2,"padding","20px"],["diameter","40",4,"ngIf"],["diameter","40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.qZA(),e.YNc(3,Hi,1,0,"mat-spinner",1),e.qZA()),2&t&&(e.xp6(2),e.Oqu(n.message),e.xp6(1),e.Q6J("ngIf",n.showSpinner))},dependencies:[G.O5,Ie.xw,Ie.Wh,ce]})}var Gi=P(8333),Ki=P(290);class Ke{constructor(o,t,n,s){this.deviceService=o,this.identifierService=t,this.controlProviderService=n,this.dialog=s,this.firestore=(0,e.f3M)(gt.gg),this.miniumUsageSeconds=60*(W.h2?1:15),this.backSpaceDateList=new Array,this.predictonsDateList=new Array,this.predictionClassifierList=new Array,this.fullInput="",this.sendingFeedback=!1}start(){this.startDate=new Date}end(o=0){var t=this;return(0,qe.Z)(function*(){t.sendingFeedback||(t.sendingFeedback=!0,t.endDate=new Date,t.endDate.setMilliseconds(t.endDate.getMilliseconds()-o),Ae(t.startDate,t.endDate)>t.miniumUsageSeconds&&(yield t.sendPerfomaceIndicatior()),t.resetCache(),t.sendingFeedback=!1)})()}backSpace(){this.fullInput.length>1&&(this.backSpaceDateList.push(new Date),this.fullInput=this.fullInput.substring(0,this.fullInput.length-1))}blankSpace(){this.fullInput=this.fullInput+" "}wordSelected(o){if(o.length>1){const t=this.fullInput.split(" "),n=t[t.length-1],s=o.length-n.length;s>1&&(this.predictonsDateList.push(new Date),this.predictionClassifierList.push({charactersOtimization:s,predictionWord:o,word:n})),this.fullInput=this.fullInput.substring(0,this.fullInput.length-n.length),this.fullInput=this.fullInput+o}else this.fullInput=this.fullInput+o}sendPerfomaceIndicatior(){var o=this;return(0,qe.Z)(function*(){const n=o.fullInput.split("").length/Ae(o.startDate,o.endDate)*60,s=n/5;let c=0;o.backSpaceDateList.length>0&&(c=o.backSpaceDateList.length/Ae(o.startDate,o.endDate)*60);let p=0;o.predictonsDateList.length>0&&(p=o.predictonsDateList.length/Ae(o.startDate,o.endDate)*60);const f=o.deviceService.getDeviceInfo();if(W.h2){let _="",y="";"Sensorial"==window.Cypress.Tipo?(_=`Resultados dos Testes ${window.Cypress.Tipo} DelayMsEscolha ${window.Cypress.DelayMsEscolha}, DelayMsIteracao ${window.Cypress.DelayMsIteracao}}:`,y=window.Cypress.Tipo+"_DelayMsEscolha_"+window.Cypress.DelayMsEscolha+"_DelayMsIteracao_"+window.Cypress.DelayMsIteracao+"_Loop_"+window.Cypress.Loop):(_=`Resultados dos Testes ${window.Cypress.Tipo} Dpi ${window.Cypress.Dpi}}:`,y=window.Cypress.Tipo+"_DPI_"+window.Cypress.Dpi+"_Loop_"+window.Cypress.Loop),yield(0,gt.pl)((0,gt.JU)(o.firestore,"Testes",y),{date:new Date,browser:window.navigator.userAgent,os:f.os,os_version:f.os_version,device:f.deviceType,deviceId:o.identifierService.getDeviceId(),control:o.controlProviderService.getActiveControl(),data:{cpmIndicator:n,wpmIndicator:s,epmIndicator:c,ppmIndicator:p,startDate:o.startDate,endDate:o.endDate,predictionClassifierList:o.predictionClassifierList,totalUsageSeconds:Ae(o.startDate,o.endDate)}}),o.dialog.open(Ge,{data:{message:`${_}\n                    "cpmIndicator": ${n}\n                    "wpmIndicator": ${s}\n                    "epmIndicator": ${c}\n                    "ppmIndicator": ${p}\n                    "startDate": ${o.startDate}\n                    "endDate": ${o.endDate}\n                    "totalUsageSeconds": ${Ae(o.startDate,o.endDate)}\n                    `}})}else console.log("feedback sended",{browser:window.navigator.userAgent,os:f.os,os_version:f.os_version,device:f.deviceType,deviceId:o.identifierService.getDeviceId(),control:o.controlProviderService.getActiveControl(),data:{cpmIndicator:n,wpmIndicator:s,epmIndicator:c,ppmIndicator:p,startDate:o.startDate,endDate:o.endDate,predictionClassifierList:o.predictionClassifierList,totalUsageSeconds:Ae(o.startDate,o.endDate)}})})()}resetCache(){this.startDate=void 0,this.endDate=void 0,this.backSpaceDateList=new Array,this.predictonsDateList=new Array,this.predictionClassifierList=new Array,this.fullInput=""}static#e=this.\u0275fac=function(t){return new(t||Ke)(e.LFG(Gi.x0),e.LFG(Ki.u),e.LFG(dt.x),e.LFG(et.uw))};static#t=this.\u0275prov=e.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}var Yi=P(6805),Ui=P(930),Qi=P(2527),tt=P.n(Qi),ji=P(529);class Ye{constructor(o,t){this.http=o,this.dialog=t,this.rankTreshHoldWord=25e3}getWord(o){if(o.length<2)return[];const t=new RegExp("^"+o,"i");return this.dbLoki.getCollection(o.charAt(0)).chain().find({word:{$regex:t}}).simplesort("rank",{desc:!0}).limit(20).data().filter(c=>c.word!==o)}doAddWordOnDb(o){var t=this;return(0,qe.Z)(function*(){const n=t.dbLoki.getCollection(o.charAt(0)),s=n.chain().find({word:{$regex:o.charAt(0)+o.charAt(1)+o.charAt(2)}}).simplesort("rank",{desc:!0}).limit(10).data(),c=n.findOne({word:o});if(c)c.rank+=1,s.length>0&&c.rank<s[s.length-1].rank&&(c.rank=s[s.length-1].rank+1),n.update(c);else{let p=1;s.length>0&&(p=s[s.length-1].rank+1),n.insert({word:o,rank:p})}})()}ensureHasCreatedDatabases(){var o=this;return(0,qe.Z)(function*(){if(o.dialog.open(Ge,{data:{message:"Carregando Database",showSpinner:!0}}),"true"!=localStorage.getItem("CreatedLocalDatabase")){o.dbLoki=new(tt())("wordsDb",{adapter:new(tt().LokiLocalStorageAdapter)});let n=(yield function Wi(l,o){const t="object"==typeof o;return new Promise((n,s)=>{const c=new Ui.Hp({next:p=>{n(p),c.unsubscribe()},error:s,complete:()=>{t?n(o.defaultValue):s(new Yi.K)}});l.subscribe(c)})}(o.http.get("assets/tf.txt",{responseType:"text"}))).split("\n");n=n.filter(s=>s),n=n.filter(s=>Number(s.split(",")[1])>=o.rankTreshHoldWord),qi.forEach(s=>{o.inserOnColletion(n,s.normalize("NFD").replace(/[\u0300-\u036f]/g,""))}),o.dbLoki.saveDatabase(),localStorage.setItem("CreatedLocalDatabase","true"),o.dialog.closeAll()}else{const t=new(tt())("wordsDb",{adapter:new(tt().LokiLocalStorageAdapter)});t.loadDatabase({},()=>{console.log("Banco de dados carregado com sucesso."),o.dialog.closeAll(),o.dbLoki=t})}})()}inserOnColletion(o,t){const n=this.dbLoki.addCollection(t),c=o.filter(f=>{let _="";for(let y=0;y<t.length;y++)_+=f.charAt(y);return _==t}).map(f=>({word:f.split(",")[0],rank:Number(f.split(",")[1])}));c.sort((f,_)=>f.rank-_.rank),c.map((f,_)=>({word:f.word.normalize("NFD").replace(/[\u0300-\u036f]/g,""),rank:_+1})).forEach(f=>{n.insert(f)})}static#e=this.\u0275fac=function(t){return new(t||Ye)(e.LFG(ji.eN),e.LFG(et.uw))};static#t=this.\u0275prov=e.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"root"})}const Xi=["limparElementRef"],$i=["falarElementRef"],en=["limparTudoElementRef"],tn=["espacoElementRef"],nn=["simboloElementRef"],rn=["centerDivElementRef"],on=["playerDivElementRef"];function sn(l,o){1&l&&(e.TgZ(0,"mat-icon",48),e._uU(1,"stop"),e.qZA())}function an(l,o){1&l&&e._UZ(0,"mat-spinner",49)}function ln(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparTudoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(12);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.RIGHT)}}function cn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparTudoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(12);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.BOTTOM)}}function hn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparTudoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(12);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.TOP)}}function dn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparTudoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(12);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.LEFT)}}function un(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.limparTudoBackGround=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("limparTudoElementRef"))}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.limparTudoBackGround)}}function pn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize("limparTudoFontSize","limparTudoElementRef"))}),e._uU(1,"add"),e.qZA()}}function fn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize("limparTudoFontSize","limparTudoElementRef"))}),e._uU(1,"remove"),e.qZA()}}function gn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.limparTudoCaracterColor=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("limparTudoElementRef"))}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.limparTudoCaracterColor)}}function mn(l,o){1&l&&(e.TgZ(0,"div",56)(1,"p",57),e._uU(2," Limpar Toda Digita\xe7\xe3o "),e.qZA()())}function _n(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"simboloElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(27);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.RIGHT)}}function vn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"simboloElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(27);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.BOTTOM)}}function yn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"simboloElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(27);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.TOP)}}function Cn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"simboloElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(27);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.LEFT)}}function xn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",58),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.simboloBackGround=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("simboloElementRef"))}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.simboloBackGround)}}function wn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",59),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize("simboloFontSize","simboloElementRef"))}),e._uU(1,"add"),e.qZA()}}function bn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",59),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize("simboloFontSize","simboloElementRef"))}),e._uU(1,"remove"),e.qZA()}}function Dn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",58),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.simboloCaracterColor=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("simboloElementRef"))}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.simboloCaracterColor)}}function En(l,o){1&l&&(e.TgZ(0,"div",60)(1,"p",57),e._uU(2," Simbolos "),e.qZA()())}function Sn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"falarElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(42);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.RIGHT)}}function kn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"falarElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(42);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.BOTTOM)}}function An(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"falarElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(42);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.TOP)}}function In(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"falarElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(42);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.LEFT)}}function Tn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.falarBackGround=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("falarElementRef"))}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.falarBackGround)}}function Pn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize("falarFontSize","falarElementRef"))}),e._uU(1,"add"),e.qZA()}}function On(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize("falarFontSize","falarElementRef"))}),e._uU(1,"remove"),e.qZA()}}function Rn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.falarCaracterColor=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("falarElementRef"))}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.falarCaracterColor)}}function Mn(l,o){1&l&&(e.TgZ(0,"div",61)(1,"p",57),e._uU(2," Falar Texto Completo "),e.qZA()())}function Ln(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"espacoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(57);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.RIGHT)}}function zn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"espacoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(57);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.BOTTOM)}}function Fn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"espacoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(57);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.TOP)}}function Bn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"espacoElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(57);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.LEFT)}}function Nn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.espacoBackGround=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("espacoElementRef"))}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.espacoBackGround)}}function Zn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize("espacoFontSize","espacoElementRef"))}),e._uU(1,"add"),e.qZA()}}function qn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize("espacoFontSize","espacoElementRef"))}),e._uU(1,"remove"),e.qZA()}}function Vn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.espacoCaracterColor=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("espacoElementRef"))}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.espacoCaracterColor)}}function Jn(l,o){1&l&&(e.TgZ(0,"div",62)(1,"p",57),e._uU(2," Inserir Espa\xe7o "),e.qZA()())}function Hn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",50),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(74);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.RIGHT)}}function Gn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",51),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(74);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.BOTTOM)}}function Kn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(74);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.TOP)}}function Yn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("resize",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.onResize(s,"limparElementRef"))}),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(74);e.Q6J("targetElement",n)("direction",t.AngularResizeElementDirection.LEFT)}}function Un(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.limparBackGround=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("limparElementRef"))}),e._uU(1,"format_color_fill"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.limparBackGround)}}function Wn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.incFontSize("limparFontSize","limparElementRef"))}),e._uU(1,"add"),e.qZA()}}function Qn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.decFontSize("limparFontSize","limparElementRef"))}),e._uU(1,"remove"),e.qZA()}}function jn(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("colorPickerChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.limparCaracterColor=s)})("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setChanged("limparElementRef"))}),e._uU(1,"format_color_text"),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("colorPicker",t.limparCaracterColor)}}function Xn(l,o){1&l&&(e.TgZ(0,"div",63)(1,"p",57),e._uU(2," Limpar \xdaltimo "),e.qZA()())}function $n(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index,c=e.oxw(2);return e.KtG(c.onClickElementCalibration(s,"top"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(3);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=e.oxw().index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"ptop"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("top_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function er(l,o){if(1&l&&e.YNc(0,$n,1,6,"app-dasher-on-screen-player",75),2&l){const t=o.index,n=e.oxw(2);e.Q6J("ngIf",t>=n.splitIndexHeader)}}function tr(l,o){1&l&&e._UZ(0,"div",46)}function ir(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index,c=e.oxw(2);return e.KtG(c.onClickElementCalibration(s,"top"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(3);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=e.oxw().index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"ptop"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("top_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function nr(l,o){if(1&l&&(e.YNc(0,tr,1,0,"div",77),e.YNc(1,ir,1,6,"app-dasher-on-screen-player",75)),2&l){const t=o.index,n=e.oxw(2);e.Q6J("ngIf",3==t),e.xp6(1),e.Q6J("ngIf",t<n.splitIndexHeader)}}function rr(l,o){1&l&&e._UZ(0,"div",46)}function or(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index,c=e.oxw(2);return e.KtG(c.onClickElementCalibration(s,"bottom"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(3);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=e.oxw().index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"pbottom"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("bottom_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function sr(l,o){if(1&l&&(e.YNc(0,rr,1,0,"div",77),e.YNc(1,or,1,6,"app-dasher-on-screen-player",75)),2&l){const t=o.index,n=e.oxw(2);e.Q6J("ngIf",3==t),e.xp6(1),e.Q6J("ngIf",t<n.splitIndexBottom)}}function ar(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index,c=e.oxw(2);return e.KtG(c.onClickElementCalibration(s,"bottom"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(3);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=e.oxw().index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"pbottom"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("bottom_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function lr(l,o){if(1&l&&e.YNc(0,ar,1,6,"app-dasher-on-screen-player",75),2&l){const t=o.index,n=e.oxw(2);e.Q6J("ngIf",t>=n.splitIndexBottom)}}function cr(l,o){if(1&l&&(e.TgZ(0,"div",64)(1,"div",65)(2,"div",66)(3,"div",67),e.YNc(4,er,1,1,"ng-template",68),e.qZA()(),e._UZ(5,"div",69),e.TgZ(6,"div",70)(7,"div",67),e.YNc(8,nr,2,2,"ng-template",68),e.qZA()(),e._UZ(9,"div",71),e.TgZ(10,"div",72)(11,"div",67),e.YNc(12,sr,2,2,"ng-template",68),e.qZA()(),e._UZ(13,"div",73),e.TgZ(14,"div",74)(15,"div",67),e.YNc(16,lr,1,1,"ng-template",68),e.qZA()()()()),2&l){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.initialTopLetters),e.xp6(4),e.Q6J("ngForOf",t.initialTopLetters),e.xp6(4),e.Q6J("ngForOf",t.initialBottomLetters),e.xp6(4),e.Q6J("ngForOf",t.initialBottomLetters)}}function hr(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){const c=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.onClickElementCalibration(c,"top"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=o.index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"ptop"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("top_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function dr(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"app-dasher-on-screen-player",76),e.NdJ("click",function(){const c=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.onClickElementCalibration(c,"bottom"))})("wordOrLetterSelectedEvent",function(s){e.CHM(t);const c=e.oxw(2);return e.KtG(c.wordOrLetterSelectedEvent(s))}),e.qZA()}if(2&l){const t=o.index,n=e.oxw(2);e.Q6J("elId",n.getIdPrefix()+"pbottom"+t.toString())("showBackGroundSelection",n.clickElementsCount.get("bottom_"+t)==n.defaultCalibrationCount)("mouseMovedEvent",n.mouseMovedEvent)("onResetDasherEvent",n.onResetDasherEvent)("enableLayoutEdition",n.enableLayoutEdition)("onContentChangedEvent",n.onContentChangedEvent)}}function ur(l,o){if(1&l&&(e.TgZ(0,"div",64)(1,"div",78)(2,"div",66)(3,"div",67),e.YNc(4,hr,1,6,"ng-template",68),e.qZA()(),e._UZ(5,"div",71),e.TgZ(6,"div",72)(7,"div",67),e.YNc(8,dr,1,6,"ng-template",68),e.qZA()()()()),2&l){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.initialTopLetters),e.xp6(4),e.Q6J("ngForOf",t.initialBottomLetters)}}class it{constructor(o,t,n,s){this.configurationService=o,this.perfomanceIndicatorService=t,this.predicionsService=n,this.hostEl=s,this.lastActionExecuted=new Date,this.afkCheckDelayMs=1e3*(W.h2?10:45),this.showingSimbols=!1,this.canSelectWordLetter=!0,this.actionSensorialDetectionBuffer={top:void 0,right:void 0,bottom:void 0,left:void 0},this.bufferDoDetectSensorial=100,this.limparFontSize="18px",this.falarFontSize="18px",this.limparTudoFontSize="18px",this.espacoFontSize="18px",this.simboloFontSize="18px",this.mouseMovedEvent=new H.x,this.onResetDasherEvent=new H.x,this.onContentChangedEvent=new H.x,this.isAfk=!1,this.input="",this.initialTopLetters=Te,this.splitIndexHeader=Math.ceil(this.initialTopLetters.length/2),this.initialBottomLetters=Pe,this.splitIndexBottom=Math.ceil(this.initialBottomLetters.length/2),this.layoutTypes=Rt.m,this.layoutType=this.configurationService.layoutType,this.lastLayoutType=this.configurationService.lastLayoutType,this.animateDivSelectionSpace=!1,this.animateDivSelectionClear=!1,this.animateDivSelectionClearAll=!1,this.animateDivSelectionSpeak=!1,this.animateDivSelectionSimbols=!1,this.AngularResizeElementDirection=de,this.enableLayoutEdition=!1,this.getIdPrefix=()=>this.showingSimbols?"simb_":"default_",this.clickElementsCount=new Map,this.defaultCalibrationCount=1,speechSynthesis.addEventListener("voiceschanged",()=>{}),this.listenEditLayout()}ngAfterViewInit(){var o=this;return(0,qe.Z)(function*(){yield o.predicionsService.ensureHasCreatedDatabases(),o.initHidControl(),o.lastActionExecuted=new Date,o.perfomanceIndicatorService.start(),o.afkInterval=setInterval(()=>o.checkDasherAfk(),1e3),o.doSetDynamicLayout(),o.redefinedWords(!0)})()}ngOnDestroy(){var o=this;return(0,qe.Z)(function*(){clearInterval(o.afkInterval),yield o.perfomanceIndicatorService.end()})()}onClickElementCalibration(o,t){if(this.configurationService.isOcularDeviceConfigured()&&"true"!=localStorage.getItem("CalibratedEyeControl")){const n=5+this.initialBottomLetters.length+this.initialTopLetters.length,s=this.clickElementsCount.get(t+"_"+o);s&&s<this.defaultCalibrationCount?this.clickElementsCount.set(t+"_"+o,s+1):s||this.clickElementsCount.set(t+"_"+o,1);let c=0;for(let p of this.clickElementsCount.values())c+=p;c>1&&(0,Pt.Yc)(),c==n*this.defaultCalibrationCount&&(this.clickElementsCount=new Map,(0,Pt.sQ)(),this.configurationService.initializeControl())}}checkDasherAfk(){const o=this.isAfk;this.isAfk=ht(new Date,this.lastActionExecuted)>this.afkCheckDelayMs,this.isAfk&&this.isAfk!=o?this.perfomanceIndicatorService.end(this.afkCheckDelayMs):this.isAfk!=o&&this.perfomanceIndicatorService.start()}mouseMovedDasher(o){this.configurationService.isAnyControlConfigured()||this.mouseMovedEvent.next(o)}mouseOverBlankSpace(){if(!this.configurationService.isAnyControlConfigured()&&!this.enableLayoutEdition){let o=()=>{this.doResetSensorialDetection(),this.insertBlankSpace()};this.doDetect("animateDivSelectionSpace")?o():this.intervalSensorialDetection||(this.intervalSensorialDetection=setInterval(()=>{o()},this.configurationService.sensorialSelectionDelayMs-this.bufferDoDetectSensorial))}}mouseOutBlankSpace(){this.configurationService.isAnyControlConfigured()||this.doResetSensorialDetection()}insertBlankSpace(o=!0){if(this.input){const t=this.input.split(" ");this.input=this.input+" ",this.perfomanceIndicatorService.blankSpace(),t[t.length-1].trim().length>3&&this.predicionsService.doAddWordOnDb(t[t.length-1]),o&&this.redefinedWords(),this.lastActionExecuted=new Date}}mouseOverReset(o=!1){if(!this.configurationService.isAnyControlConfigured()&&!this.enableLayoutEdition){let t=()=>{this.doResetSensorialDetection(),this.reset(o)};this.doDetect(o?"animateDivSelectionClearAll":"animateDivSelectionClear")?t():this.intervalSensorialDetection||(this.intervalSensorialDetection=setInterval(()=>{t()},this.configurationService.sensorialSelectionDelayMs-this.bufferDoDetectSensorial))}}mouseOutReset(){this.configurationService.isAnyControlConfigured()||this.doResetSensorialDetection()}reset(o=!1){o?this.input="":(this.input=this.input.substring(0,this.input.length-1),this.perfomanceIndicatorService.backSpace()),this.redefinedWords(o),this.lastActionExecuted=new Date}mouseOverSpeak(){if(!this.configurationService.isAnyControlConfigured()&&!this.enableLayoutEdition){let o=()=>{this.doResetSensorialDetection(),this.speak()};this.doDetect("animateDivSelectionSpeak")?o():this.intervalSensorialDetection||(this.intervalSensorialDetection=setInterval(()=>{o()},this.configurationService.sensorialSelectionDelayMs-this.bufferDoDetectSensorial))}}mouseOutSpeak(){this.configurationService.isAnyControlConfigured()||this.doResetSensorialDetection()}speak(){this.synthesizeSpeechFromText(this.input),this.lastActionExecuted=new Date}mouseOverSimbols(){if(!this.configurationService.isAnyControlConfigured()&&!this.enableLayoutEdition){let o=()=>{this.changeToSimbols(),this.doResetSensorialDetection()};this.doDetect("animateDivSelectionSimbols")?o():this.intervalSensorialDetection||(this.intervalSensorialDetection=setInterval(()=>{o()},this.configurationService.sensorialSelectionDelayMs-this.bufferDoDetectSensorial))}}mouseOutSimbols(){this.configurationService.isAnyControlConfigured()||this.doResetSensorialDetection()}changeToSimbols(){this.showingSimbols?(this.redefinedWords(),this.showingSimbols=!1,setTimeout(()=>{this.doSetDynamicLayout()},1)):(ut.forEach((o,t)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+t.toString(),value:o})}),pt.forEach((o,t)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+t.toString(),value:o})}),this.showingSimbols=!0,setTimeout(()=>{this.doSetDynamicLayout()},1))}wordOrLetterSelectedEvent(o){if(this.canSelectWordLetter||this.enableLayoutEdition){if(this.canSelectWordLetter=!1,this.resetAuxDisplay(),this.showingSimbols)Ot[o]?this.input+=Ot[o]:this.input=this.input+o;else if(this.perfomanceIndicatorService.wordSelected(o),o.length>1){const t=this.input.split(" ");this.input=this.input.substring(0,this.input.length-t[t.length-1].length),this.input=this.input+o,this.insertBlankSpace(!1)}else this.input=this.input+o;this.redefinedWords(),this.doResetSensorialDetection(),this.onResetDasherEvent.next(),this.lastActionExecuted=new Date,setTimeout(()=>{const t=document.getElementById("input");t.focus(),t.setSelectionRange(this.input.length,this.input.length),this.canSelectWordLetter=!0},100)}}synthesizeSpeechFromText(o){var t=new SpeechSynthesisUtterance(o);t.voice=speechSynthesis.getVoices()[0],speechSynthesis.speak(t)}redefinedWords(o=!1){if(o)Te.forEach((n,s)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+s.toString(),value:n})}),Pe.forEach((n,s)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+s.toString(),value:n})});else{const n=this.input.split(" ");var t=this.predicionsService.getWord(n[n.length-1]);if(t.length>0){const c=function Ji(l,o){const t=[],n=[],s=l.slice(0,6);if(s.length>=2&&(t.push(s[0].word),n.push(s[1].word)),o){Te.forEach((f,_)=>{5==_&&_<7&&(s.length>=3&&t.push(s[2].word),s.length>=4&&t.push(s[3].word)),t.push(f)});let c=Te.length-t.length;for(;c>0;)t.pop(),c-=1;Pe.forEach((f,_)=>{5==_&&_<7&&(s.length>=5&&n.push(s[4].word),s.length>=6&&n.push(s[5].word)),n.push(f)});let p=Pe.length-n.length;for(;p>0;)n.pop(),p-=1}else{(function Vi(l){const o={};l.forEach(s=>{s=s.replace(/\s/g,"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(let c=0;c<s.length;c++){const p=s[c];o[p]=(o[p]||0)+1}});const t=Object.entries(o);return t.sort((s,c)=>c[1]-s[1]),t.map(s=>s[0])})(l.map(_=>_.word)).forEach((_,y)=>{y<8&&(ft(y)?t.push(_):n.push(_))});for(let _=2;_<6;_++)s[_]&&(ft(_)?t.push(s[_].word):n.push(s[_].word));const p=Te.concat(Pe),f=[];p.forEach((_,y)=>{const A=t.findIndex(M=>M==_),O=n.findIndex(M=>M==_);-1==A&&-1==O&&f.push(_)}),f.forEach((_,y)=>{ft(y)?t.push(_):n.push(_)})}return{topWords:t,bottomWords:n}}(t,this.configurationService.keepOrderLetters);c.topWords.forEach((p,f)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+f.toString(),value:p})}),c.bottomWords.forEach((p,f)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+f.toString(),value:p})})}else Te.forEach((c,p)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+p.toString(),value:c})}),Pe.forEach((c,p)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+p.toString(),value:c})})}}doDetect(o){return!this.enableLayoutEdition&&(!this.configurationService.isDelayedDetectionAction()||(this[o]||(this.hostEl.nativeElement.style.setProperty("--animation-duration",this.configurationService.sensorialSelectionDelayMs/1e3+"s"),this[o]=!0),this.lastSensorialDetectionTime||(this.lastSensorialDetectionTime=new Date),ht(this.lastSensorialDetectionTime,new Date)>=this.configurationService.sensorialSelectionDelayMs))}doTriggerAction(){(0,W.ug)(this.suportDiv,this.limparElementRef.nativeElement)?(this.reset(),this.resetAuxDisplay()):(0,W.ug)(this.suportDiv,this.falarElementRef.nativeElement)?(this.speak(),this.resetAuxDisplay()):(0,W.ug)(this.suportDiv,this.limparTudoElementRef.nativeElement)?(this.reset(!0),this.resetAuxDisplay()):(0,W.ug)(this.suportDiv,this.espacoElementRef.nativeElement)?(this.insertBlankSpace(),this.resetAuxDisplay()):(0,W.ug)(this.suportDiv,this.simboloElementRef.nativeElement)&&(this.changeToSimbols(),this.resetAuxDisplay()),this.doResetSensorialDetection()}doResetSensorialDetection(){!this.configurationService.isDelayedDetectionAction()||(this.animateDivSelectionSpace=!1,this.animateDivSelectionClearAll=!1,this.animateDivSelectionClear=!1,this.animateDivSelectionSpeak=!1,this.animateDivSelectionSimbols=!1,this.lastSensorialDetectionTime=void 0,this.intervalSensorialDetection&&(clearInterval(this.intervalSensorialDetection),this.intervalSensorialDetection=void 0))}listenEditLayout(){this.configurationService.enablePageEdition.pipe((0,At.b)(500)).subscribe(o=>{o?this.showingSimbols?(ut.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+n.toString(),value:t})}),pt.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+n.toString(),value:t})})):(Ni.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+n.toString(),value:t})}),Zi.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+n.toString(),value:t})})):(this.showingSimbols?(ut.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+n.toString(),value:t})}),pt.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+n.toString(),value:t})})):(Te.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"ptop"+n.toString(),value:t})}),Pe.forEach((t,n)=>{this.onContentChangedEvent.next({id:this.getIdPrefix()+"pbottom"+n.toString(),value:t})})),this.saveLayout()),this.enableLayoutEdition=o})}doSetDynamicLayout(){if(this.configurationService.layoutType==Rt.m.Customized){const o=this.configurationService.getDynamicLayout(this.showingSimbols);o&&o.forEach(t=>{const n=document.getElementById(t.id);if(n){n.style.position="absolute",n.style.flex="none",n.style.transform=t.transform,n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.backgroundColor=t.backGroundColor,n.classList.add("el_changed");const s=document.getElementById(t.caracterId);s&&(s.style.color=t.fontColor,s.style.fontSize=t.fontSize)}})}}saveLayout(){const o=[];this.limparElementRef.nativeElement.parentElement.parentElement.classList.contains("el_changed")&&o.push({id:this.limparElementRef.nativeElement.parentElement.parentElement.id,transform:this.limparElementRef.nativeElement.parentElement.parentElement.style.transform,width:this.limparElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().width,height:this.limparElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().height,backGroundColor:this.limparElementRef.nativeElement.parentElement.parentElement.style.backgroundColor,caracterId:this.limparElementRef.nativeElement.id,fontColor:this.limparElementRef.nativeElement.style.color,fontSize:this.limparElementRef.nativeElement.style.fontSize}),this.limparTudoElementRef.nativeElement.parentElement.parentElement.classList.contains("el_changed")&&o.push({id:this.limparTudoElementRef.nativeElement.parentElement.parentElement.id,transform:this.limparTudoElementRef.nativeElement.parentElement.parentElement.style.transform,width:this.limparTudoElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().width,height:this.limparTudoElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().height,backGroundColor:this.limparTudoElementRef.nativeElement.parentElement.parentElement.style.backgroundColor,caracterId:this.limparTudoElementRef.nativeElement.id,fontColor:this.limparTudoElementRef.nativeElement.style.color,fontSize:this.limparTudoElementRef.nativeElement.style.fontSize}),this.simboloElementRef.nativeElement.parentElement.parentElement.classList.contains("el_changed")&&o.push({id:this.simboloElementRef.nativeElement.parentElement.parentElement.id,transform:this.simboloElementRef.nativeElement.parentElement.parentElement.style.transform,width:this.simboloElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().width,height:this.simboloElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().height,backGroundColor:this.simboloElementRef.nativeElement.parentElement.parentElement.style.backgroundColor,caracterId:this.simboloElementRef.nativeElement.id,fontColor:this.simboloElementRef.nativeElement.style.color,fontSize:this.simboloElementRef.nativeElement.style.fontSize}),this.espacoElementRef.nativeElement.parentElement.parentElement.classList.contains("el_changed")&&o.push({id:this.espacoElementRef.nativeElement.parentElement.parentElement.id,transform:this.espacoElementRef.nativeElement.parentElement.parentElement.style.transform,width:this.espacoElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().width,height:this.espacoElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().height,backGroundColor:this.espacoElementRef.nativeElement.parentElement.parentElement.style.backgroundColor,caracterId:this.espacoElementRef.nativeElement.id,fontColor:this.espacoElementRef.nativeElement.style.color,fontSize:this.espacoElementRef.nativeElement.style.fontSize}),this.falarElementRef.nativeElement.parentElement.parentElement.classList.contains("el_changed")&&o.push({id:this.falarElementRef.nativeElement.parentElement.parentElement.id,transform:this.falarElementRef.nativeElement.parentElement.parentElement.style.transform,width:this.falarElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().width,height:this.falarElementRef.nativeElement.parentElement.parentElement.getBoundingClientRect().height,backGroundColor:this.falarElementRef.nativeElement.parentElement.parentElement.style.backgroundColor,caracterId:this.falarElementRef.nativeElement.id,fontColor:this.falarElementRef.nativeElement.style.color,fontSize:this.falarElementRef.nativeElement.style.fontSize}),this.wordsOrLettersElements.forEach(t=>{o.push({id:t.wordOrLetterElementRef.nativeElement.id,transform:t.wordOrLetterElementRef.nativeElement.style.transform,width:t.wordOrLetterElementRef.nativeElement.getBoundingClientRect().width,height:t.wordOrLetterElementRef.nativeElement.getBoundingClientRect().height,backGroundColor:t.wordOrLetterElementRef.nativeElement.style.backgroundColor,caracterId:t.pElementRef.nativeElement.id,fontColor:t.pElementRef.nativeElement.style.color,fontSize:t.pElementRef.nativeElement.style.fontSize})}),this.configurationService.setDynamicLayout(o,this.showingSimbols)}onResize(o,t){const n=this[t].nativeElement.parentElement.parentElement,s=n.parentElement.getBoundingClientRect().width,c=n.parentElement.getBoundingClientRect().height;n.style.position="absolute",n.style.flex="none",n.style.width=o.currentWidthValue+"px",n.style.height=o.currentHeightValue+"px",n.parentElement.style.width=s+"px",n.parentElement.style.height=c+"px",n.classList.add("el_changed")}incFontSize(o,t){this[o]=(Number(this[o].split("px")[0])+1).toString()+"px",this.setChanged(t)}decFontSize(o,t){this[o]=(Number(this[o].split("px")[0])-1).toString()+"px",this.setChanged(t)}setChanged(o){this[o].nativeElement.parentElement.parentElement.classList.add("el_changed")}initHidControl(){this.configurationService.isAnyControlConfigured()&&(this.createAuxDisplay(),setTimeout(()=>{this.configurationService.initializeControl()}),this.configurationService.getPacketOutput().pipe((0,At.b)(this.configurationService.getControlDebounceTime())).subscribe(o=>{this.reciveControlMovedEvent(o.detail)}))}createAuxDisplay(){setTimeout(()=>{this.suportDiv=document.createElement("div"),this.suportDiv.id="suportDiv",this.suportDiv.style.position="absolute";const n=this.centerDivElementRef.nativeElement.offsetTop+this.centerDivElementRef.nativeElement.offsetHeight/2,s=this.playerDivElementRef.nativeElement.clientHeight;this.suportDiv.style.left=100*(this.centerDivElementRef.nativeElement.offsetLeft+this.centerDivElementRef.nativeElement.offsetWidth/2)/this.playerDivElementRef.nativeElement.clientWidth+"%",this.suportDiv.style.top=100*n/s+"%",this.suportDiv.style.width="20px",this.suportDiv.style.height="20px",this.suportDiv.style.zIndex="1",this.suportDiv.style.background="red",this.suportDiv.style.background=this.configurationService.isSensorialDeviceConfigured()?"unset":"red",this.playerDivElementRef.nativeElement.appendChild(this.suportDiv)})}resetAuxDisplay(){this.configurationService.isAnyControlConfigured()&&(this.playerDivElementRef.nativeElement.removeChild(this.suportDiv),this.createAuxDisplay())}setAuxDisplayPositionCenterOn(o){const s=o.offsetTop+o.offsetHeight/2,c=this.playerDivElementRef.nativeElement.clientHeight;this.suportDiv.style.left=100*(o.offsetLeft+o.offsetWidth/2)/this.playerDivElementRef.nativeElement.clientWidth+"%",this.suportDiv.style.top=100*s/c+"%"}identifyJoystickSide(o){this.joystickSide||(o?.analogStickLeft&&Math.abs(o.analogStickLeft.horizontal)!=Math.abs(o.analogStickLeft.vertical)&&(this.joystickSide="left"),o?.analogStickRight&&Math.abs(o.analogStickRight.horizontal)!=Math.abs(o.analogStickRight.vertical)&&(this.joystickSide="right"))}moveByJoystick(o){const t=Number(this.suportDiv.style.left.substring(0,this.suportDiv.style.left.indexOf("%"))),n=Number(this.suportDiv.style.top.substring(0,this.suportDiv.style.top.indexOf("%")));if(this.identifyJoystickSide(o),this.joystickSide){const s="left"==this.joystickSide?o?.analogStickLeft:o?.analogStickRight;(s.horizontal>.1||s.horizontal<-.1)&&(this.suportDiv.style.left=t+s.horizontal*(this.configurationService.dpiSpeed/1e3)>100?"100%":t+s.horizontal*(this.configurationService.dpiSpeed/1e3)<0?"0%":t+s.horizontal*(this.configurationService.dpiSpeed/1e3)+"%",this.mouseMovedEvent.next({clientX:this.suportDiv.getBoundingClientRect().x,clientY:this.suportDiv.getBoundingClientRect().y,HTMLDivElement:this.suportDiv})),(s.vertical>.1||s.vertical<-.1)&&(this.suportDiv.style.top=n+s.vertical*(this.configurationService.dpiSpeed/1e3)>100?"100%":n+s.vertical*(this.configurationService.dpiSpeed/1e3)<0?"0%":n+s.vertical*(this.configurationService.dpiSpeed/1e3)+"%")}}moveBySensorial(o){if(!o.actualAccelerometer?.y||!o.actualAccelerometer?.x)return;let t=o.actualAccelerometer.y>.005,n=o.actualAccelerometer.y<-.005,s=o.actualAccelerometer.x>.005,c=o.actualAccelerometer.x<-.005;if(this.actionSensorialDetectionBuffer.right!=t||this.actionSensorialDetectionBuffer.left!=n||this.actionSensorialDetectionBuffer.top!=s||this.actionSensorialDetectionBuffer.bottom!=c){const f=[this.limparElementRef.nativeElement,this.falarElementRef.nativeElement,this.limparTudoElementRef.nativeElement,this.simboloElementRef.nativeElement,this.espacoElementRef.nativeElement,...this.wordsOrLettersElements.map(A=>A.wordOrLetterElementRef.nativeElement)],_=(0,W.Zu)(this.suportDiv,f);let y;t?y=(0,W.TO)(this.suportDiv,_.right):n?y=(0,W.TO)(this.suportDiv,_.left):s?y=(0,W.TO)(this.suportDiv,_.above):c&&(y=(0,W.TO)(this.suportDiv,_.below)),y&&this.setAuxDisplayPositionCenterOn(y)}this.actionSensorialDetectionBuffer={top:s,right:t,bottom:c,left:n}}moveByCamera(o){this.suportDiv.style.top=o.y+"px",this.suportDiv.style.left=o.x+"px"}reciveControlMovedEvent(o){if(o)if(this.configurationService.isOcularDeviceConfigured()?this.moveByCamera(o):this.configurationService.isSensorialDeviceConfigured()?this.moveBySensorial(o):this.moveByJoystick(o),(0,W.ug)(this.suportDiv,this.limparElementRef.nativeElement)||(0,W.ug)(this.suportDiv,this.falarElementRef.nativeElement)||(0,W.ug)(this.suportDiv,this.limparTudoElementRef.nativeElement)||(0,W.ug)(this.suportDiv,this.espacoElementRef.nativeElement)||(0,W.ug)(this.suportDiv,this.simboloElementRef.nativeElement)){let n="";(0,W.ug)(this.suportDiv,this.limparElementRef.nativeElement)?n="animateDivSelectionClear":(0,W.ug)(this.suportDiv,this.falarElementRef.nativeElement)?n="animateDivSelectionSpeak":(0,W.ug)(this.suportDiv,this.limparTudoElementRef.nativeElement)?n="animateDivSelectionClearAll":(0,W.ug)(this.suportDiv,this.espacoElementRef.nativeElement)?n="animateDivSelectionSpace":(0,W.ug)(this.suportDiv,this.simboloElementRef.nativeElement)&&(n="animateDivSelectionSimbols"),this.doDetect(n)&&this.doTriggerAction()}else this.doResetSensorialDetection()}static#e=this.\u0275fac=function(t){return new(t||it)(e.Y36(dt.x),e.Y36(Ke),e.Y36(Ye),e.Y36(e.SBq))};static#t=this.\u0275cmp=e.Xpm({type:it,selectors:[["app-dasher-on-screen"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Xi,5),e.Gf($i,5),e.Gf(en,5),e.Gf(tn,5),e.Gf(nn,5),e.Gf(rn,5),e.Gf(on,5),e.Gf(He,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.limparElementRef=s.first),e.iGM(s=e.CRH())&&(n.falarElementRef=s.first),e.iGM(s=e.CRH())&&(n.limparTudoElementRef=s.first),e.iGM(s=e.CRH())&&(n.espacoElementRef=s.first),e.iGM(s=e.CRH())&&(n.simboloElementRef=s.first),e.iGM(s=e.CRH())&&(n.centerDivElementRef=s.first),e.iGM(s=e.CRH())&&(n.playerDivElementRef=s.first),e.iGM(s=e.CRH())&&(n.wordsOrLettersElements=s)}},decls:91,vars:101,consts:[["fxLayout","column","fxFill",""],["fxFlex","5"],["id","input","matInput","","type","text",3,"ngModel","ngModelChange"],["id","playerDivElementRef","fxFlex","",2,"background-color","lightgoldenrodyellow"],["playerDivElementRef",""],["fxLayoutAlign","center start",3,"ngClass"],["class","icon-display",4,"ngIf"],["diameter","40",4,"ngIf"],[1,"grid-start-actions"],["id","limparTudoBoxRef","cdkDrag","","fxLayoutAlign","center none",1,"mid-start-header",2,"z-index","99",3,"cdkDragDisabled","ngClass","cdkDragStarted","click"],["limparTudoBoxRef",""],["class","resize resize__right",3,"targetElement","direction","resize",4,"ngIf"],["class","resize resize__bottom",3,"targetElement","direction","resize",4,"ngIf"],["class","resize resize__top",3,"targetElement","direction","resize",4,"ngIf"],["class","resize resize__left",3,"targetElement","direction","resize",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",3,"mouseover","mouseout"],["class","icon-display","fxLayoutAlign","center center","style","width: 100%;",3,"colorPicker","colorPickerChange","click",4,"ngIf"],["class","icon-display","fxLayoutAlign","center center","style","width: 100%;",3,"click",4,"ngIf"],["id","limparTudoElementRef","fxLayoutAlign","center center",2,"width","100%"],["limparTudoElementRef",""],["class","mid-start-header ghost-container","fxLayoutAlign","center none",4,"ngIf"],["id","simbolosBoxRef","cdkDrag","","fxLayoutAlign","center none",1,"mid-start",2,"z-index","99",3,"cdkDragDisabled","ngClass","cdkDragStarted","click"],["simbolosBoxRef",""],["fxLayoutAlign","center center",3,"mouseover","mouseout"],["class","icon-display","style","width: 100%;",3,"colorPicker","colorPickerChange","click",4,"ngIf"],["class","icon-display","style","width: 100%;",3,"click",4,"ngIf"],["id","simboloElementRef","fxLayoutAlign","center center",2,"width","100%"],["simboloElementRef",""],["class","mid-start ghost-container","fxLayoutAlign","center none",4,"ngIf"],["id","falarBoxRef","cdkDrag","","fxLayoutAlign","center none",1,"mid-start-bottom",2,"z-index","99",3,"cdkDragDisabled","ngClass","cdkDragStarted","click"],["falarBoxRef",""],["id","falarElementRef","fxLayoutAlign","center center",2,"width","100%"],["falarElementRef",""],["class","mid-start-bottom ghost-container","fxLayoutAlign","center none",4,"ngIf"],["id","espacoBoxRef","cdkDrag","","fxLayoutAlign","center none",1,"mid-start-header2",2,"z-index","99",3,"cdkDragDisabled","ngClass","cdkDragStarted","click"],["espacoBoxRef",""],["id","espacoElementRef","fxLayoutAlign","center center",2,"width","100%"],["espacoElementRef",""],["class","mid-start-header2 ghost-container","fxLayoutAlign","center center",4,"ngIf"],["id","centerDivElementRef"],["centerDivElementRef",""],["id","limparBoxRef","cdkDrag","","fxLayoutAlign","center none",1,"mid-start-bottom2",2,"z-index","99",3,"cdkDragDisabled","ngClass","cdkDragStarted","click"],["limparBoxRef",""],["id","limparElementRef","fxLayoutAlign","center center",2,"width","100%"],["limparElementRef",""],["class","mid-start-bottom2 ghost-container","fxLayoutAlign","center none",4,"ngIf"],[2,"width","100px"],["fxFlex","","fxLayout","column","fxFill","",4,"ngIf"],[1,"icon-display"],["diameter","40"],[1,"resize","resize__right",3,"targetElement","direction","resize"],[1,"resize","resize__bottom",3,"targetElement","direction","resize"],[1,"resize","resize__top",3,"targetElement","direction","resize"],[1,"resize","resize__left",3,"targetElement","direction","resize"],["fxLayoutAlign","center center",1,"icon-display",2,"width","100%",3,"colorPicker","colorPickerChange","click"],["fxLayoutAlign","center center",1,"icon-display",2,"width","100%",3,"click"],["fxLayoutAlign","center none",1,"mid-start-header","ghost-container"],["fxLayoutAlign","center center",1,"label-default-font-size"],[1,"icon-display",2,"width","100%",3,"colorPicker","colorPickerChange","click"],[1,"icon-display",2,"width","100%",3,"click"],["fxLayoutAlign","center none",1,"mid-start","ghost-container"],["fxLayoutAlign","center none",1,"mid-start-bottom","ghost-container"],["fxLayoutAlign","center center",1,"mid-start-header2","ghost-container"],["fxLayoutAlign","center none",1,"mid-start-bottom2","ghost-container"],["fxFlex","","fxLayout","column","fxFill",""],["fxFill","",1,"grid-container-horizontal"],["fxFill","",1,"grid-header1"],["fxLayout","row","fxFill",""],["ngFor","",3,"ngForOf"],[1,"grid-mainh"],["fxFill","",1,"grid-header2"],[1,"grid-main"],["fxFill","",1,"grid-bottom1"],[1,"grid-mainb"],["fxFill","",1,"grid-bottom2"],["fxFlex","","fxFill","",3,"elId","showBackGroundSelection","mouseMovedEvent","onResetDasherEvent","enableLayoutEdition","onContentChangedEvent","click","wordOrLetterSelectedEvent",4,"ngIf"],["fxFlex","","fxFill","",3,"elId","showBackGroundSelection","mouseMovedEvent","onResetDasherEvent","enableLayoutEdition","onContentChangedEvent","click","wordOrLetterSelectedEvent"],["style","width: 100px;",4,"ngIf"],["fxFill","",1,"grid-container-vertical"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field")(3,"input",2),e.NdJ("ngModelChange",function(c){return n.input=c}),e.qZA()()(),e.TgZ(4,"div",3,4)(6,"div",5)(7,"div"),e.YNc(8,sn,2,0,"mat-icon",6),e.YNc(9,an,1,0,"mat-spinner",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9,10),e.NdJ("cdkDragStarted",function(){return n.setChanged("limparTudoElementRef")})("click",function(){return n.onClickElementCalibration(0,"limparTudoElementRef")}),e.YNc(13,ln,1,2,"div",11),e.YNc(14,cn,1,2,"div",12),e.YNc(15,hn,1,2,"div",13),e.YNc(16,dn,1,2,"div",14),e.TgZ(17,"div",15),e.NdJ("mouseover",function(){return n.mouseOverReset(!0)})("mouseout",function(){return n.mouseOutReset()}),e.YNc(18,un,2,1,"mat-icon",16),e.YNc(19,pn,2,0,"mat-icon",17),e.TgZ(20,"p",18,19),e._uU(22," Limpar Toda Digita\xe7\xe3o "),e.qZA(),e.YNc(23,fn,2,0,"mat-icon",17),e.YNc(24,gn,2,1,"mat-icon",16),e.qZA()(),e.YNc(25,mn,3,0,"div",20),e.TgZ(26,"div",21,22),e.NdJ("cdkDragStarted",function(){return n.setChanged("simboloElementRef")})("click",function(){return n.onClickElementCalibration(0,"simboloElementRef")}),e.YNc(28,_n,1,2,"div",11),e.YNc(29,vn,1,2,"div",12),e.YNc(30,yn,1,2,"div",13),e.YNc(31,Cn,1,2,"div",14),e.TgZ(32,"div",23),e.NdJ("mouseover",function(){return n.mouseOverSimbols()})("mouseout",function(){return n.mouseOutSimbols()}),e.YNc(33,xn,2,1,"mat-icon",24),e.YNc(34,wn,2,0,"mat-icon",25),e.TgZ(35,"p",26,27),e._uU(37,"Simbolos "),e.qZA(),e.YNc(38,bn,2,0,"mat-icon",25),e.YNc(39,Dn,2,1,"mat-icon",24),e.qZA()(),e.YNc(40,En,3,0,"div",28),e.TgZ(41,"div",29,30),e.NdJ("cdkDragStarted",function(){return n.setChanged("falarElementRef")})("click",function(){return n.onClickElementCalibration(0,"falarElementRef")}),e.YNc(43,Sn,1,2,"div",11),e.YNc(44,kn,1,2,"div",12),e.YNc(45,An,1,2,"div",13),e.YNc(46,In,1,2,"div",14),e.TgZ(47,"div",15),e.NdJ("mouseover",function(){return n.mouseOverSpeak()})("mouseout",function(){return n.mouseOutSpeak()}),e.YNc(48,Tn,2,1,"mat-icon",16),e.YNc(49,Pn,2,0,"mat-icon",17),e.TgZ(50,"p",31,32),e._uU(52,"Falar Texto Completo "),e.qZA(),e.YNc(53,On,2,0,"mat-icon",17),e.YNc(54,Rn,2,1,"mat-icon",16),e.qZA()(),e.YNc(55,Mn,3,0,"div",33),e.TgZ(56,"div",34,35),e.NdJ("cdkDragStarted",function(){return n.setChanged("espacoElementRef")})("click",function(){return n.onClickElementCalibration(0,"espacoElementRef")}),e.YNc(58,Ln,1,2,"div",11),e.YNc(59,zn,1,2,"div",12),e.YNc(60,Fn,1,2,"div",13),e.YNc(61,Bn,1,2,"div",14),e.TgZ(62,"div",15),e.NdJ("mouseover",function(){return n.mouseOverBlankSpace()})("mouseout",function(){return n.mouseOutBlankSpace()}),e.YNc(63,Nn,2,1,"mat-icon",16),e.YNc(64,Zn,2,0,"mat-icon",17),e.TgZ(65,"p",36,37),e._uU(67,"Inserir Espa\xe7o "),e.qZA(),e.YNc(68,qn,2,0,"mat-icon",17),e.YNc(69,Vn,2,1,"mat-icon",16),e.qZA()(),e.YNc(70,Jn,3,0,"div",38),e._UZ(71,"div",39,40),e.TgZ(73,"div",41,42),e.NdJ("cdkDragStarted",function(){return n.setChanged("limparElementRef")})("click",function(){return n.onClickElementCalibration(0,"limparElementRef")}),e.YNc(75,Hn,1,2,"div",11),e.YNc(76,Gn,1,2,"div",12),e.YNc(77,Kn,1,2,"div",13),e.YNc(78,Yn,1,2,"div",14),e.TgZ(79,"div",15),e.NdJ("mouseover",function(){return n.mouseOverReset(!1)})("mouseout",function(){return n.mouseOutReset()}),e.YNc(80,Un,2,1,"mat-icon",16),e.YNc(81,Wn,2,0,"mat-icon",17),e.TgZ(82,"p",43,44),e._uU(84,"Limpar \xdaltimo "),e.qZA(),e.YNc(85,Qn,2,0,"mat-icon",17),e.YNc(86,jn,2,1,"mat-icon",16),e.qZA()(),e.YNc(87,Xn,3,0,"div",45),e.qZA(),e._UZ(88,"div",46),e.YNc(89,cr,17,4,"div",47),e.YNc(90,ur,9,2,"div",47),e.qZA()()),2&t){const s=e.MAs(12),c=e.MAs(27),p=e.MAs(42),f=e.MAs(57),_=e.MAs(74);e.xp6(3),e.Q6J("ngModel",n.input),e.xp6(3),e.Q6J("ngClass",n.isAfk?"start-div":"stop-div"),e.xp6(2),e.Q6J("ngIf",n.isAfk),e.xp6(1),e.Q6J("ngIf",!n.isAfk),e.xp6(2),e.Udp("background",n.limparTudoBackGround),e.ekj("fill-animation",n.animateDivSelectionClearAll),e.Q6J("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.clickElementsCount.get("limparTudoElementRef_0")==n.defaultCalibrationCount?"action-div-border-color":"action-div-border"),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.limparTudoFontSize)("color",n.limparTudoCaracterColor),e.xp6(3),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf","absolute"===s.style.position),e.xp6(1),e.Udp("background",n.simboloBackGround),e.ekj("fill-animation",n.animateDivSelectionSimbols),e.Q6J("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.clickElementsCount.get("simboloElementRef_0")==n.defaultCalibrationCount?"action-div-border-color":"action-div-border"),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.simboloFontSize)("color",n.simboloCaracterColor),e.xp6(3),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf","absolute"===c.style.position),e.xp6(1),e.Udp("background",n.falarBackGround),e.ekj("fill-animation",n.animateDivSelectionSpeak),e.Q6J("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.clickElementsCount.get("falarElementRef_0")==n.defaultCalibrationCount?"action-div-border-color":"action-div-border"),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.falarFontSize)("color",n.falarCaracterColor),e.xp6(3),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf","absolute"===p.style.position),e.xp6(1),e.Udp("background",n.espacoBackGround),e.ekj("fill-animation",n.animateDivSelectionSpace),e.Q6J("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.clickElementsCount.get("espacoElementRef_0")==n.defaultCalibrationCount?"action-div-border-color":"action-div-border"),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.espacoFontSize)("color",n.espacoCaracterColor),e.xp6(3),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf","absolute"===f.style.position),e.xp6(3),e.Udp("background",n.limparBackGround),e.ekj("fill-animation",n.animateDivSelectionClear),e.Q6J("cdkDragDisabled",!n.enableLayoutEdition)("ngClass",n.clickElementsCount.get("limparElementRef_0")==n.defaultCalibrationCount?"action-div-border-color":"action-div-border"),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(2),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Udp("font-size",n.limparFontSize)("color",n.limparCaracterColor),e.xp6(3),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf",n.enableLayoutEdition),e.xp6(1),e.Q6J("ngIf","absolute"===_.style.position),e.xp6(2),e.Q6J("ngIf",n.layoutType==n.layoutTypes.TypeFourLines||n.layoutType==n.layoutTypes.Customized&&n.lastLayoutType==n.layoutTypes.TypeFourLines),e.xp6(1),e.Q6J("ngIf",n.layoutType==n.layoutTypes.TypeTwoLines||n.layoutType==n.layoutTypes.Customized&&n.lastLayoutType==n.layoutTypes.TypeTwoLines)}},dependencies:[G.mk,G.sg,G.O5,Ie.xw,Ie.Wh,Ie.s9,Ie.yH,Tt.oO,U.Nt,q.KE,I.Fj,I.JJ,I.On,Ve.Hw,ce,wt,It,St,He],styles:['[_nghost-%COMP%]{--animation-duration: 5s}.icon-display[_ngcontent-%COMP%]{margin-top:20px;transform:scale(1.5)}.start-div[_ngcontent-%COMP%]{width:50px;background-color:#fcafaf;align-items:center!important}.stop-div[_ngcontent-%COMP%]{width:50px;background-color:#67ff67;align-items:center!important}.action-div-border[_ngcontent-%COMP%]{border-width:2px;border-style:groove;border-color:#fafad2;background:linear-gradient(to right,rgb(230,255,230) 50%,transparent 0);background-size:200% 100%;background-position:right;position:relative;background-color:#fff}.action-div-border-color[_ngcontent-%COMP%]{border-width:2px;border-style:groove;border-color:#fafad2;background:linear-gradient(to right,rgb(230,255,230) 50%,transparent 0);background-size:200% 100%;background-position:right;position:relative;background-color:#fafad2}[_nghost-%COMP%]  mat-form-field{display:flex;height:100%}[_nghost-%COMP%]  mat-form-field .mat-mdc-text-field-wrapper{height:100%}[_nghost-%COMP%]  mat-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{height:100%}[_nghost-%COMP%]  mat-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-form-field-infix{padding:0!important;height:100%;min-height:unset}[_nghost-%COMP%]  mat-form-field .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-form-field-infix input{height:100%}[_nghost-%COMP%]  mat-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.grid-header1[_ngcontent-%COMP%]{grid-area:header1}.grid-mainh[_ngcontent-%COMP%]{grid-area:mainh}.grid-header2[_ngcontent-%COMP%]{grid-area:header2}.grid-main[_ngcontent-%COMP%]{grid-area:main}.grid-bottom1[_ngcontent-%COMP%]{grid-area:bottom1}.grid-mainb[_ngcontent-%COMP%]{grid-area:mainb}.grid-bottom2[_ngcontent-%COMP%]{grid-area:bottom2}.grid-container-horizontal[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header1" "mainh" "header2" "main" "bottom1" "mainb" "bottom2";grid-template-rows:repeat(7,1fr)}.grid-container-vertical[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header1" "main" "bottom1";grid-template-rows:repeat(3,1fr)}.mid-start-header[_ngcontent-%COMP%]{grid-area:mid-start-header}.mid-start-bottom[_ngcontent-%COMP%]{grid-area:mid-start-bottom}.mid-start-header2[_ngcontent-%COMP%]{grid-area:mid-start-header2}.mid-start-bottom2[_ngcontent-%COMP%]{grid-area:mid-start-bottom2}.mid-start[_ngcontent-%COMP%]{grid-area:mid-start}.ghost-container[_ngcontent-%COMP%]{opacity:0}.grid-start-actions[_ngcontent-%COMP%]{display:grid;grid-template-areas:"mid-start-header mid-start-header2" "mid-start-header mid-666" "mid-start mid-666" "mid-start-bottom mid-666" "mid-start-bottom mid-start-bottom2";grid-template-rows:2fr 1fr 100px 1fr 2fr;position:relative}@keyframes _ngcontent-%COMP%_makeItfadeIn{to{background-position:left}}.fill-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_makeItfadeIn var(--animation-duration) 0s forwards}']})}const pr=[{path:"dasher-on-screen",component:it},{path:"**",redirectTo:"dasher-on-screen"}];class nt{static#e=this.\u0275fac=function(t){return new(t||nt)};static#t=this.\u0275mod=e.oAB({type:nt});static#i=this.\u0275inj=e.cJS({imports:[kt.Bz.forChild(pr),kt.Bz]})}class rt{static#e=this.\u0275fac=function(t){return new(t||rt)};static#t=this.\u0275mod=e.oAB({type:rt});static#i=this.\u0275inj=e.cJS({imports:[G.ez,nt,Ce.o9,U.c,q.lN,I.u5,Ve.Ps,ae,Vt,Ii,Ai]})}},9820:function(We,Oe){var Ce;void 0!==(Ce=function(){return function(){function U(I,e){if(this.app="loki",this.options=e||{},typeof I<"u"&&(this.app=I),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}function q(I){this.db=null,this.initializeLokiCatalog(I)}return U.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},U.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},U.prototype.loadKey=U.prototype.loadDatabase=function(I,e){var C=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(this.app,I,function(D){if("function"==typeof e){if(0===D.id)return void e(null);e(D.val)}else console.log(D.val)}):this.catalog=new q(function(D){C.catalog=D,C.loadDatabase(I,e)})},U.prototype.saveKey=U.prototype.saveDatabase=function(I,e,z){var D=this;function R(V){z(V&&!0===V.success?null:new Error("Error saving database")),D.options.closeAfterSave&&D.closeDatabase()}null!==this.catalog&&null!==this.catalog.db?this.catalog.setAppKey(this.app,I,e,R):this.catalog=new q(function(V){D.saveDatabase(I,e,R)})},U.prototype.deleteKey=U.prototype.deleteDatabase=function(I,e){var C=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKey(this.app,I,function(D){var R=D.id;0!==R?C.catalog.deleteAppKey(R,e):"function"==typeof e&&e({success:!0})}):this.catalog=new q(function(D){C.catalog=D,C.deleteDatabase(I,e)})},U.prototype.deleteDatabasePartitions=function(I){var e=this;this.getDatabaseList(function(z){z.forEach(function(C){C.startsWith(I)&&e.deleteDatabase(C)})})},U.prototype.getKeyList=U.prototype.getDatabaseList=function(I){var z=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAppKeys(this.app,function(C){for(var D=[],R=0;R<C.length;R++)D.push(C[R].key);"function"==typeof I?I(D):D.forEach(function(V){console.log(V)})}):this.catalog=new q(function(C){z.catalog=C,z.getDatabaseList(I)})},U.prototype.getCatalogSummary=function(I){var z=this;null!==this.catalog&&null!==this.catalog.db?this.catalog.getAllKeys(function(C){for(var R,D=[],K=0;K<C.length;K++)D.push({app:(R=C[K]).app,key:R.key,size:2*(R.app||"").length+2*(R.key||"").length+(R.val||"").length+1});"function"==typeof I?I(D):D.forEach(function(ce){console.log(ce)})}):this.catalog=new q(function(C){z.catalog=C,z.getCatalogSummary(I)})},q.prototype.initializeLokiCatalog=function(I){var e=indexedDB.open("LokiCatalog",1),z=this;e.onupgradeneeded=function(C){var D=C.target.result;if(D.objectStoreNames.contains("LokiAKV")&&D.deleteObjectStore("LokiAKV"),!D.objectStoreNames.contains("LokiAKV")){var R=D.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});R.createIndex("app","app",{unique:!1}),R.createIndex("key","key",{unique:!1}),R.createIndex("appkey","appkey",{unique:!0})}},e.onsuccess=function(C){z.db=C.target.result,"function"==typeof I&&I(z)},e.onerror=function(C){throw C}},q.prototype.getAppKey=function(I,e,z){var Z,$=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").index("appkey").get(I+","+e);$.onsuccess=(Z=z,function(Q){var K=Q.target.result;(null===K||typeof K>"u")&&(K={id:0,success:!1}),"function"==typeof Z?Z(K):console.log(K)}),$.onerror=function(Z){return function(Q){if("function"!=typeof Z)throw Q;Z({id:0,success:!1})}}(z)},q.prototype.getAppKeyById=function(I,e,z){var V,$;this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").get(I).onsuccess=(V=z,$=e,function(Z){"function"==typeof $?$(Z.target.result,V):console.log(Z.target.result)})},q.prototype.setAppKey=function(I,e,z,C){var Q,R=this.db.transaction(["LokiAKV"],"readwrite").objectStore("LokiAKV"),Z=R.index("appkey").get(I+","+e);Z.onsuccess=function(Q){var K=Q.target.result;null==K?K={app:I,key:e,appkey:I+","+e,val:z}:K.val=z;var re,ce=R.put(K);ce.onerror=(re=C,function(ae){"function"==typeof re?re({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(Z.error))}),ce.onsuccess=function(re){return function(ae){"function"==typeof re&&re({success:!0})}}(C)},Z.onerror=(Q=C,function(K){"function"==typeof Q?Q({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(Z.error))})},q.prototype.deleteAppKey=function(I,e){var R,D=this.db.transaction(["LokiAKV"],"readwrite").objectStore("LokiAKV").delete(I);D.onsuccess=(R=e,function(V){"function"==typeof R&&R({success:!0})}),D.onerror=function(R){return function(V){"function"==typeof R?R({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(D.error))}}(e)},q.prototype.getAppKeys=function(I,e){var Z,Q,D=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").index("app"),R=IDBKeyRange.only(I),V=D.openCursor(R);V.onsuccess=(Z=[],Q=e,function(K){var ce=K.target.result;ce?(Z.push(ce.value),ce.continue()):"function"==typeof Q?Q(Z):console.log(Z)}),V.onerror=function(Z){return function(Q){"function"==typeof Z?Z(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(Q))}}(e)},q.prototype.getAllKeys=function(I){var R,V,C=this.db.transaction(["LokiAKV"],"readonly").objectStore("LokiAKV").openCursor();C.onsuccess=(R=[],V=I,function($){var Z=$.target.result;Z?(R.push(Z.value),Z.continue()):"function"==typeof V?V(R):console.log(R)}),C.onerror=function(R){return function(V){"function"==typeof R&&R(null)}}(I)},U}()}.apply(Oe,[]))&&(We.exports=Ce)},2527:function(We,Oe,P){var G,U;G=function(){return function(){"use strict";var q=Object.prototype.hasOwnProperty;function I(i){var r,a;if(Array.isArray(i)){for(a=0;a<i.length;a++)I(i[a]);e(i)}else if(null!==i&&"object"==typeof i){for(r in i)i.hasOwnProperty(r)&&I(i[r]);e(i)}}function e(i){Object.isFrozen(i)||Object.freeze(i)}function z(i){return Object.isFrozen(i)?J(i,"shallow"):i}var C={copyProperties:function(i,r){var a;for(a in i)r[a]=i[a]},resolveTransformObject:function(i,r,a){var h,d;if("number"!=typeof a&&(a=0),++a>=10)return i;for(h in i)"string"==typeof i[h]&&0===i[h].indexOf("[%lktxp]")?(d=i[h].substring(8),r.hasOwnProperty(d)&&(i[h]=r[d])):"object"==typeof i[h]&&(i[h]=C.resolveTransformObject(i[h],r,a));return i},resolveTransformParams:function(i,r){var a,h,d=[];if(typeof r>"u")return i;for(a=0;a<i.length;a++)h=J(i[a],"shallow-recurse-objects"),d.push(C.resolveTransformObject(h,r));return d},getIn:function(i,r,a){if(null!=i){if(!a)return i[r];if("string"==typeof r&&(r=r.split(".")),!Array.isArray(r))throw new Error("path must be a string or array. Found "+typeof r);for(var h=0,d=r.length;null!=i&&h<d;)i=i[r[h++]];return h&&h==d?i:void 0}}},D={aeq:R,lt:V,gt:$};function R(i,r){var a,h,d,u;if(i===r)return!0;if(!i||!r||!0===i||!0===r||i!=i||r!=r){switch(i){case void 0:case null:d=1;break;case!1:d=3;break;case!0:d=4;break;case"":d=5;break;default:d=i==i?9:0}switch(r){case void 0:case null:u=1;break;case!1:u=3;break;case!0:u=4;break;case"":u=5;break;default:u=r==r?9:0}if(9!==d||9!==u)return d===u}return a=Number(i),h=Number(r),a==a||h==h?a===h:(a=i.toString())==(h=r.toString())}function V(i,r,a){var h,d,u,g;if(!i||!r||!0===i||!0===r||i!=i||r!=r){switch(i){case void 0:case null:u=1;break;case!1:u=3;break;case!0:u=4;break;case"":u=5;break;default:u=i==i?9:0}switch(r){case void 0:case null:g=1;break;case!1:g=3;break;case!0:g=4;break;case"":g=5;break;default:g=r==r?9:0}if(9!==u||9!==g)return u===g?a:u<g}return h=Number(i),d=Number(r),h==h&&d==d?h<d||!(h>d)&&a:h==h&&d!=d||(d!=d||h==h)&&(i<r||!(i>r)&&(i==r?a:(h=i.toString())<(d=r.toString())||h==d&&a))}function $(i,r,a){var h,d,u,g;if(!i||!r||!0===i||!0===r||i!=i||r!=r){switch(i){case void 0:case null:u=1;break;case!1:u=3;break;case!0:u=4;break;case"":u=5;break;default:u=i==i?9:0}switch(r){case void 0:case null:g=1;break;case!1:g=3;break;case!0:g=4;break;case"":g=5;break;default:g=r==r?9:0}if(9!==u||9!==g)return u===g?a:u>g}return h=Number(i),d=Number(r),h==h&&d==d?h>d||!(h<d)&&a:(h!=h||d==d)&&(d==d&&h!=h||i>r||!(i<r)&&(i==r?a:(h=i.toString())>(d=r.toString())||h==d&&a))}function Z(i,r,a){return D.aeq(i,r)?0:D.lt(i,r,!1)?a?1:-1:D.gt(i,r,!1)?a?-1:1:0}function K(i,r,a,h,d,u){var w,g=u||0,m=r[g],v=!1;if("object"==typeof i&&m in i&&(w=i[m]),g+1>=r.length)v=a(w,h,d);else if(Array.isArray(w))for(var b=0,E=w.length;b<E&&!0!==(v=K(w[b],r,a,h,d,g+1));b+=1);else v=K(w,r,a,h,d,g+1);return v}function ce(i){return"string"==typeof i||Array.isArray(i)?function(r){return-1!==i.indexOf(r)}:"object"==typeof i&&null!==i?function(r){return q.call(i,r)}:null}function re(i,r,a){for(var h in r)if(q.call(r,h))return ae[h](i,r[h],a);return!1}var ae={$eq:function(i,r){return i===r},$aeq:function(i,r){return i==r},$ne:function(i,r){return r!=r?i==i:i!==r},$dteq:function(i,r){return D.aeq(i,r)},$gt:function(i,r){return D.gt(i,r,!1)},$gte:function(i,r){return D.gt(i,r,!0)},$lt:function(i,r){return D.lt(i,r,!1)},$lte:function(i,r){return D.lt(i,r,!0)},$jgt:function(i,r){return i>r},$jgte:function(i,r){return i>=r},$jlt:function(i,r){return i<r},$jlte:function(i,r){return i<=r},$between:function(i,r){return null!=i&&D.gt(i,r[0],!0)&&D.lt(i,r[1],!0)},$jbetween:function(i,r){return null!=i&&i>=r[0]&&i<=r[1]},$in:function(i,r){return-1!==r.indexOf(i)},$inSet:function(i,r){return r.has(i)},$nin:function(i,r){return-1===r.indexOf(i)},$keyin:function(i,r){return i in r},$nkeyin:function(i,r){return!(i in r)},$definedin:function(i,r){return void 0!==r[i]},$undefinedin:function(i,r){return void 0===r[i]},$regex:function(i,r){return r.test(i)},$containsString:function(i,r){return"string"==typeof i&&-1!==i.indexOf(r)},$containsNone:function(i,r){return!ae.$containsAny(i,r)},$containsAny:function(i,r){var a=ce(i);return null!==a&&(Array.isArray(r)?r.some(a):a(r))},$contains:function(i,r){var a=ce(i);return null!==a&&(Array.isArray(r)?r.every(a):a(r))},$elemMatch:function(i,r){return!!Array.isArray(i)&&i.some(function(a){return Object.keys(r).every(function(h){var d=r[h];return"object"==typeof d&&d||(d={$eq:d}),-1!==h.indexOf(".")?K(a,h.split("."),re,r[h],a):re(a[h],d,a)})})},$type:function(i,r,a){var h=typeof i;return"object"===h&&(Array.isArray(i)?h="array":i instanceof Date&&(h="date")),"object"!=typeof r?h===r:re(h,r,a)},$finite:function(i,r){return r===isFinite(i)},$size:function(i,r,a){return!!Array.isArray(i)&&("object"!=typeof r?i.length===r:re(i.length,r,a))},$len:function(i,r,a){return"string"==typeof i&&("object"!=typeof r?i.length===r:re(i.length,r,a))},$where:function(i,r){return!0===r(i)},$not:function(i,r,a){return!re(i,r,a)},$and:function(i,r,a){for(var h=0,d=r.length;h<d;h+=1)if(!re(i,r[h],a))return!1;return!0},$or:function(i,r,a){for(var h=0,d=r.length;h<d;h+=1)if(re(i,r[h],a))return!0;return!1},$exists:function(i,r){return r?void 0!==i:void 0===i}};["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"].forEach(function(i){var r=ae[i];ae["$"+i]=function(a,h,d){if("string"==typeof h)return r(a,d[h]);if("function"==typeof h)return r(a,h(d));throw new Error("Invalid argument to $$ matcher")}});var Re={$eq:ae.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function J(i,r){if(null==i)return null;var h;switch(r||"parse-stringify"){case"parse-stringify":h=JSON.parse(JSON.stringify(i));break;case"jquery-extend-deep":h=jQuery.extend(!0,{},i);break;case"shallow":h=Object.create(i.constructor.prototype),Object.keys(i).map(function(u){h[u]=i[u]});break;case"shallow-assign":h=Object.create(i.constructor.prototype),Object.assign(h,i);break;case"shallow-recurse-objects":h=J(i,"shallow"),Object.keys(i).forEach(function(u){"object"==typeof i[u]&&"Object"===i[u].constructor.name?h[u]=J(i[u],"shallow-recurse-objects"):Array.isArray(i[u])&&(h[u]=function Qe(i,r){if("parse-stringify"==r)return J(i,r);for(var a=[],h=0,d=i.length;h<d;h++)a[h]=J(i[h],r);return a}(i[u],"shallow-recurse-objects"))})}return h}function H(){try{return window&&void 0!==window.localStorage&&null!==window.localStorage}catch{return!1}}function se(){}function T(i,r){this.filename=i||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=!(!r||!r.hasOwnProperty("verbose"))&&r.verbose,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};this.ENV=r&&r.hasOwnProperty("env")?r.env:typeof global<"u"&&(global.android||global.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof global<"u"&&global.window&&typeof process<"u"?"NODEJS":typeof document<"u"?-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER":"CORDOVA","undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(r,!0),this.on("init",this.clearChanges)}function Ee(i){this.hashStore={},this.options=i||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}function me(i,r){if(this.mode="reference",this.adapter=null,this.options=r||{},this.dbref=null,this.dbname="",this.pageIterator={},!i)throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");if("reference"===i.mode)throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=i,this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=26214400),this.options.hasOwnProperty("delimiter")||(this.options.delimiter="$<\n")}function xe(){try{this.fs=P(Object(function(){var r=new Error("Cannot find module 'fs'");throw r.code="MODULE_NOT_FOUND",r}()))}catch{this.fs=null}}function _e(){}function F(i,r){return r=r||{},this.collection=i,this.filteredrows=[],this.filterInitialized=!1,this}function Me(i,r){if("$regex"===i)Array.isArray(r)?r=new RegExp(r[0],r[1]):r instanceof RegExp||(r=new RegExp(r));else if("object"==typeof r)for(var a in r)("$regex"===a||"object"==typeof r[a])&&(r[a]=Me(a,r[a]));return r}function N(i,r,a){this.collection=i,this.name=r,this.rebuildPending=!1,this.options=a||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new F(i),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}function x(i,r){this.name=i,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=i,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var a=this;(r=r||{}).hasOwnProperty("unique")&&(Array.isArray(r.unique)||(r.unique=[r.unique]),r.unique.forEach(function(w){a.uniqueNames.push(w)})),r.hasOwnProperty("exact")&&r.exact.forEach(function(w){a.constraints.exact[w]=new be(w)}),this.adaptiveBinaryIndices=!r.hasOwnProperty("adaptiveBinaryIndices")||r.adaptiveBinaryIndices,this.transactional=!!r.hasOwnProperty("transactional")&&r.transactional,this.cloneObjects=!!r.hasOwnProperty("clone")&&r.clone,this.cloneMethod=r.hasOwnProperty("cloneMethod")?r.cloneMethod:"parse-stringify",this.asyncListeners=!!r.hasOwnProperty("asyncListeners")&&r.asyncListeners,this.disableMeta=!!r.hasOwnProperty("disableMeta")&&r.disableMeta,this.disableChangesApi=!r.hasOwnProperty("disableChangesApi")||r.disableChangesApi,this.disableDeltaChangesApi=!r.hasOwnProperty("disableDeltaChangesApi")||r.disableDeltaChangesApi,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=!!r.hasOwnProperty("autoupdate")&&r.autoupdate,this.serializableIndices=!r.hasOwnProperty("serializableIndices")||r.serializableIndices,this.disableFreeze=!r.hasOwnProperty("disableFreeze")||r.disableFreeze,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(r.ttl||-1,r.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var h=[];if(r&&r.indices)if("[object Array]"===Object.prototype.toString.call(r.indices))h=r.indices;else{if("string"!=typeof r.indices)throw new TypeError("Indices needs to be a string or an array of strings");h=[r.indices]}for(var d=0;d<h.length;d++)this.ensureIndex(h[d]);function m(w,b){var E=null!==b&&"object"==typeof b?Object.keys(b):null;if(E&&E.length&&["string","boolean","number"].indexOf(typeof b)<0){for(var S={},k=0;k<E.length;k++){var L=E[k];if(b.hasOwnProperty(L))if(!w.hasOwnProperty(L)||a.uniqueNames.indexOf(L)>=0||"$loki"==L||"meta"==L)S[L]=b[L];else{var Y=m(w[L],b[L]);typeof Y<"u"&&Y!={}&&(S[L]=Y)}}return 0===Object.keys(S).length?void 0:S}return w===b?void 0:b}function v(){a.changes=[]}this.observerCallback=function u(w){var b="function"==typeof Set?new Set:[];b.add||(b.add=function(E){return-1===this.indexOf(E)&&this.push(E),this}),w.forEach(function(E){b.add(E.object)}),b.forEach(function(E){if(!q.call(E,"$loki"))return a.removeAutoUpdateObserver(E);try{a.update(E)}catch{}})},this.getChangeDelta=function g(w,b){return b?m(b,w):JSON.parse(JSON.stringify(w))},this.getObjectDelta=m,this.getChanges=function(){return a.changes},this.flushChanges=v,this.setChangesApi=function(w){a.disableChangesApi=!w,w||(a.disableDeltaChangesApi=!1)},this.on("delete",function(b){a.disableChangesApi||a.createChange(a.name,"R",b)}),this.on("warning",function(w){a.lokiConsoleWrapper.warn(w)}),v()}function Le(i){return-1!==i.indexOf(".")}function at(i){return parseFloat(i,10)}function lt(i,r){return i+r}function ze(i,r){return i-r}function Fe(i){return i.reduce(lt,0)/i.length}function pe(i,r,a){if(!1===a)return i[r];for(var h=r.split("."),d=i;h.length>0;)d=d[h.shift()];return d}function fe(i,r,a){for(var u,g,h=0,d=i.length;h<d;){if(0===(u=a.apply(null,[r,i[g=h+d>>1]])))return{found:!0,index:g};u<0?d=g:h=g+1}return{found:!1,index:d}}function we(i){return function(r,a){return fe(r,a,i)}}function Ne(){}function he(i){this.field=i,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}function be(i){this.index=Object.create(null),this.field=i}return se.prototype.events={},se.prototype.asyncListeners=!1,se.prototype.on=function(i,r){var a,h=this;return Array.isArray(i)?(i.forEach(function(d){h.on(d,r)}),r):((a=this.events[i])||(a=this.events[i]=[]),a.push(r),r)},se.prototype.emit=function(i){var a,r=this;if(!i||!this.events[i])throw new Error("No event "+i+" defined");this.events[i].length&&(a=Array.prototype.slice.call(arguments,1),this.events[i].forEach(function(h){r.asyncListeners?setTimeout(function(){h.apply(r,a)},1):h.apply(r,a)}))},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(i,r){var a=this;if(Array.isArray(i))i.forEach(function(d){a.removeListener(d,r)});else if(this.events[i]){var h=this.events[i];h.splice(h.indexOf(r),1)}},(T.prototype=new se).constructor=T,T.prototype.getIndexedAdapter=function(){return P(9820)},T.prototype.configureOptions=function(i,r){var h={fs:xe,localStorage:_e,memory:Ee};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof i<"u"){if(this.options=i,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof h[i.persistenceMethod]&&(this.persistenceMethod=i.persistenceMethod,this.persistenceAdapter=new h[i.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=i.adapter,this.options.adapter=null,this.isIncremental="incremental"===this.persistenceAdapter.mode),i.autoload&&r){var d=this;setTimeout(function(){d.loadDatabase(i,i.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(i,i.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter="$<\n"),null===this.persistenceAdapter&&(this.persistenceMethod={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"}[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new h[this.persistenceMethod]))},T.prototype.copy=function(i){var a,h,r=new T(this.filename,{env:"NA"});if(i=i||{},r.loadJSONObject(this,{retainDirtyFlags:!0}),i.hasOwnProperty("removeNonSerializable")&&!0===i.removeNonSerializable)for(r.autosaveHandle=null,r.persistenceAdapter=null,a=r.collections.length,h=0;h<a;h++)r.collections[h].constraints=null,r.collections[h].ttl=null;return r},T.prototype.addCollection=function(i,r){var a,h=this.collections.length;if(r&&!0===r.disableMeta){if(!1===r.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===r.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"==typeof r.ttl&&r.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(a=0;a<h;a+=1)if(this.collections[a].name===i)return this.collections[a];var d=new x(i,r);return d.isIncremental=this.isIncremental,this.collections.push(d),this.verbose&&(d.lokiConsoleWrapper=console),d},T.prototype.loadCollection=function(i){if(!i.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(i)},T.prototype.getCollection=function(i){var r,a=this.collections.length;for(r=0;r<a;r+=1)if(this.collections[r].name===i)return this.collections[r];return this.emit("warning","collection "+i+" not found"),null},T.prototype.renameCollection=function(i,r){var a=this.getCollection(i);return a&&(a.name=r),a},T.prototype.listCollections=function(){for(var i=this.collections.length,r=[];i--;)r.push({name:this.collections[i].name,type:this.collections[i].objType,count:this.collections[i].data.length});return r},T.prototype.removeCollection=function(i){var r,a=this.collections.length;for(r=0;r<a;r+=1)if(this.collections[r].name===i){var h=new x(i,{}),d=this.collections[r];for(var u in d)d.hasOwnProperty(u)&&h.hasOwnProperty(u)&&(d[u]=h[u]);return void this.collections.splice(r,1)}},T.prototype.getName=function(){return this.name},T.prototype.serializeReplacer=function(i,r){switch(i){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":case"lokiConsoleWrapper":return null;case"throttledSavePending":case"throttledCallbacks":return;default:return r}},T.prototype.toJson=T.prototype.serialize=function(i){switch((i=i||{}).hasOwnProperty("serializationMethod")||(i.serializationMethod=this.options.serializationMethod),i.serializationMethod){case"normal":default:return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured()}},T.prototype.serializeDestructured=function(i){var r,a,h,d,g,u=[];if((i=i||{}).hasOwnProperty("partitioned")||(i.partitioned=!1),i.hasOwnProperty("delimited")||(i.delimited=!0),i.hasOwnProperty("delimiter")||(i.delimiter=this.options.destructureDelimiter),!0===i.partitioned&&i.hasOwnProperty("partition")&&i.partition>=0)return this.serializeCollection({delimited:i.delimited,delimiter:i.delimiter,collectionIndex:i.partition});for((g=new T(this.filename)).loadJSONObject(this),r=0;r<g.collections.length;r++)g.collections[r].data=[];if(!0===i.partitioned&&-1===i.partition)return g.serialize({serializationMethod:"normal"});for(u.push(g.serialize({serializationMethod:"normal"})),g=null,r=0;r<this.collections.length;r++)if(h=this.serializeCollection({delimited:i.delimited,delimiter:i.delimiter,collectionIndex:r}),!1===i.partitioned&&!1===i.delimited){if(!Array.isArray(h))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(d=h.length,a=0;a<d;a++)u.push(h[a]),h[a]=null;u.push("")}else u.push(h);return i.partitioned?u:i.delimited?(u.push(""),u.join(i.delimiter)):(u.push(""),u)},T.prototype.serializeCollection=function(i){var r,a,h=[];if((i=i||{}).hasOwnProperty("delimited")||(i.delimited=!0),!i.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(r=this.collections[i.collectionIndex].data.length,h=[],a=0;a<r;a++)h.push(JSON.stringify(this.collections[i.collectionIndex].data[a]));return i.delimited?(h.push(""),h.join(i.delimiter)):h},T.prototype.deserializeDestructured=function(i,r){var d,m,E,a=[],g=0,v=1,w=!1;if((r=r||{}).hasOwnProperty("partitioned")||(r.partitioned=!1),r.hasOwnProperty("delimited")||(r.delimited=!0),r.hasOwnProperty("delimiter")||(r.delimiter=this.options.destructureDelimiter),r.partitioned){if(r.hasOwnProperty("partition"))return-1===r.partition?d=JSON.parse(i[0]):this.deserializeCollection(i[r.partition+1],r);for(m=(d=JSON.parse(i[0])).collections.length,g=0;g<m;g++)d.collections[g].data=this.deserializeCollection(i[g+1],r);return d}if(r.delimited){if(a=i.split(r.delimiter),i=null,0===a.length)return null}else a=i;for(m=(d=JSON.parse(a[0])).collections.length,a[0]=null;!w;)""===a[v]?++g>m&&(w=!0):(E=JSON.parse(a[v]),d.collections[g].data.push(E)),a[v++]=null;return d},T.prototype.deserializeCollection=function(i,r){var h,d,a=[];for((r=r||{}).hasOwnProperty("partitioned")||(r.partitioned=!1),r.hasOwnProperty("delimited")||(r.delimited=!0),r.hasOwnProperty("delimiter")||(r.delimiter=this.options.destructureDelimiter),r.delimited?(a=i.split(r.delimiter)).pop():a=i,d=a.length,h=0;h<d;h++)a[h]=JSON.parse(a[h]);return a},T.prototype.loadJSON=function(i,r){var a;if(0===i.length)a={};else switch(this.options.serializationMethod){case"normal":case"pretty":default:a=JSON.parse(i);break;case"destructured":a=this.deserializeDestructured(i)}this.loadJSONObject(a,r)},T.prototype.loadJSONObject=function(i,r){var d,u,g,m,v,w,a=0,h=i.collections?i.collections.length:0;function b(L){var te,Y=r[L.name];return Y.proto?(te=Y.inflate||C.copyProperties,function(ee){var B=new Y.proto;return te(ee,B),B}):Y.inflate}for(this.name=i.name,i.hasOwnProperty("throttledSaves")&&r&&!r.hasOwnProperty("throttledSaves")&&(this.throttledSaves=i.throttledSaves),this.collections=[];a<h;a+=1){if((u=this.addCollection((d=i.collections[a]).name,{disableChangesApi:d.disableChangesApi,disableDeltaChangesApi:d.disableDeltaChangesApi,disableMeta:d.disableMeta,disableFreeze:!d.hasOwnProperty("disableFreeze")||d.disableFreeze})).adaptiveBinaryIndices=!!d.hasOwnProperty("adaptiveBinaryIndices")&&!0===d.adaptiveBinaryIndices,u.transactional=d.transactional,u.asyncListeners=d.asyncListeners,u.cloneObjects=d.cloneObjects,u.cloneMethod=d.cloneMethod||"parse-stringify",u.autoupdate=d.autoupdate,u.changes=d.changes,u.dirtyIds=d.dirtyIds||[],u.dirty=!(!r||!0!==r.retainDirtyFlags)&&d.dirty,g=d.data.length,m=0,r&&r.hasOwnProperty(d.name))for(v=b(d);m<g;m++)w=v(d.data[m]),u.data[m]=w,u.addAutoUpdateObserver(w),u.disableFreeze||I(u.data[m]);else for(;m<g;m++)u.data[m]=d.data[m],u.addAutoUpdateObserver(u.data[m]),u.disableFreeze||I(u.data[m]);if(u.maxId=typeof d.maxId>"u"?0:d.maxId,typeof d.binaryIndices<"u"&&(u.binaryIndices=d.binaryIndices),typeof d.transforms<"u"&&(u.transforms=d.transforms),u.uniqueNames=[],d.hasOwnProperty("uniqueNames")&&(u.uniqueNames=d.uniqueNames),!(typeof d.DynamicViews>"u")){for(var E=0;E<d.DynamicViews.length;E++){var S=d.DynamicViews[E],k=u.addDynamicView(S.name,S.options);k.resultdata=S.resultdata,k.resultsdirty=S.resultsdirty,k.filterPipeline=S.filterPipeline,k.sortCriteriaSimple=S.sortCriteriaSimple,k.sortCriteria=S.sortCriteria,k.sortFunction=null,k.sortDirty=S.sortDirty,u.disableFreeze||(I(k.filterPipeline),k.sortCriteriaSimple?I(k.sortCriteriaSimple):k.sortCriteria&&I(k.sortCriteria)),k.resultset.filteredrows=S.resultset.filteredrows,k.resultset.filterInitialized=S.resultset.filterInitialized,k.rematerialize({removeWhereFilters:!0})}i.databaseVersion<1.5&&(u.ensureAllIndexes(!0),u.dirty=!0)}}},T.prototype.close=function(i){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(i),i=void 0)),i&&this.on("close",i),this.emit("close")},T.prototype.generateChangesNotification=function(i){function r(d){return d.name}var a=[],h=i||this.collections.map(r);return this.collections.forEach(function(d){-1!==h.indexOf(r(d))&&(a=a.concat(d.getChanges()))}),a},T.prototype.serializeChanges=function(i){return JSON.stringify(this.generateChangesNotification(i))},T.prototype.clearChanges=function(){this.collections.forEach(function(i){i.flushChanges&&i.flushChanges()})},Ee.prototype.loadDatabase=function(i,r){var a=this;this.options.asyncResponses?setTimeout(function(){a.hashStore.hasOwnProperty(i)?r(a.hashStore[i].value):r(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(i)?r(this.hashStore[i].value):r(null)},Ee.prototype.saveDatabase=function(i,r,a){var d,h=this;this.options.asyncResponses?setTimeout(function(){d=h.hashStore.hasOwnProperty(i)?h.hashStore[i].savecount:0,h.hashStore[i]={savecount:d+1,lastsave:new Date,value:r},a()},this.options.asyncTimeout):(d=this.hashStore.hasOwnProperty(i)?this.hashStore[i].savecount:0,this.hashStore[i]={savecount:d+1,lastsave:new Date,value:r},a())},Ee.prototype.deleteDatabase=function(i,r){this.hashStore.hasOwnProperty(i)&&delete this.hashStore[i],"function"==typeof r&&r()},me.prototype.loadDatabase=function(i,r){var a=this;this.dbname=i,this.dbref=new T(i),this.adapter.loadDatabase(i,function(h){if(h){"string"!=typeof h&&r(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var d=JSON.parse(h);a.dbref.loadJSONObject(d),d=null,0!==a.dbref.collections.length?(a.pageIterator={collection:0,pageIndex:0},a.loadNextPartition(0,function(){r(a.dbref)})):r(a.dbref)}else r(h)})},me.prototype.loadNextPartition=function(i,r){var a=this.dbname+"."+i,h=this;if(!0===this.options.paging)return this.pageIterator.pageIndex=0,void this.loadNextPage(r);this.adapter.loadDatabase(a,function(d){var u=h.dbref.deserializeCollection(d,{delimited:!0,collectionIndex:i});h.dbref.collections[i].data=u,++i<h.dbref.collections.length?h.loadNextPartition(i,r):r()})},me.prototype.loadNextPage=function(i){var a=this;this.adapter.loadDatabase(this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,function(h){var d=h.split(a.options.delimiter);h="";var g,u=d.length,m=""===d[u-1];for(m&&(d.pop(),""===d[(u=d.length)-1]&&1===u&&(d.pop(),u=d.length)),g=0;g<u;g++)a.dbref.collections[a.pageIterator.collection].data.push(JSON.parse(d[g])),d[g]=null;d=[],m?++a.pageIterator.collection<a.dbref.collections.length?a.loadNextPartition(a.pageIterator.collection,i):i():(a.pageIterator.pageIndex++,a.loadNextPage(i))})},me.prototype.exportDatabase=function(i,r,a){var d,u=r.collections.length;for(this.dbref=r,this.dbname=i,this.dirtyPartitions=[-1],d=0;d<u;d++)r.collections[d].dirty&&this.dirtyPartitions.push(d);this.saveNextPartition(function(g){a(g)})},me.prototype.saveNextPartition=function(i){var r=this,a=this.dirtyPartitions.shift(),h=this.dbname+(-1===a?"":"."+a);if(this.options.paging&&-1!==a)return this.pageIterator={collection:a,docIndex:0,pageIndex:0},void this.saveNextPage(function(u){0===r.dirtyPartitions.length?i(u):r.saveNextPartition(i)});var d=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:a});this.adapter.saveDatabase(h,d,function(u){u?i(u):0===r.dirtyPartitions.length?i(null):r.saveNextPartition(i)})},me.prototype.saveNextPage=function(i){var r=this,a=this.dbref.collections[this.pageIterator.collection],h=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,d=0,u=a.data.length,g=this.options.delimiter.length,m="",v="",w=!1,b=!1,E=function(S){v="",S&&i(S),w?i(null):(r.pageIterator.pageIndex++,r.saveNextPage(i))};for(0===a.data.length&&(w=!0);;)if(w||(m=JSON.stringify(a.data[this.pageIterator.docIndex]),v+=m,d+=m.length,++this.pageIterator.docIndex>=u&&(w=!0)),d>=this.options.pageSize&&(b=!0),(!b||w)&&(v+=this.options.delimiter,d+=g),w||b)return void this.adapter.saveDatabase(h,v,E)},xe.prototype.loadDatabase=function(r,a){var h=this;this.fs.stat(r,function(d,u){!d&&u.isFile()?h.fs.readFile(r,{encoding:"utf8"},function(m,v){a(m?new Error(m):v)}):a(null)})},xe.prototype.saveDatabase=function(r,a,h){var d=this,u=r+"~";this.fs.writeFile(u,a,function(m){m?h(new Error(m)):d.fs.rename(u,r,h)})},xe.prototype.deleteDatabase=function(r,a){this.fs.unlink(r,function(d){d?a(new Error(d)):a()})},_e.prototype.loadDatabase=function(r,a){H()?a(localStorage.getItem(r)):a(new Error("localStorage is not available"))},_e.prototype.saveDatabase=function(r,a,h){H()?(localStorage.setItem(r,a),h(null)):h(new Error("localStorage is not available"))},_e.prototype.deleteDatabase=function(r,a){H()?(localStorage.removeItem(r),a(null)):a(new Error("localStorage is not available"))},T.prototype.throttledSaveDrain=function(i,r){var a=this,h=(new Date).getTime();if(this.throttledSaves||i(!0),(r=r||{}).hasOwnProperty("recursiveWait")||(r.recursiveWait=!0),r.hasOwnProperty("recursiveWaitLimit")||(r.recursiveWaitLimit=!1),r.hasOwnProperty("recursiveWaitLimitDuration")||(r.recursiveWaitLimitDuration=2e3),r.hasOwnProperty("started")||(r.started=(new Date).getTime()),this.throttledSaves&&this.throttledSavePending){if(!r.recursiveWait)return void this.throttledCallbacks.push(i);this.throttledCallbacks.push(function(){return a.throttledSavePending?r.recursiveWaitLimit&&h-r.started>r.recursiveWaitLimitDuration?void i(!1):void a.throttledSaveDrain(i,r):void i(!0)})}else i(!0)},T.prototype.loadDatabaseInternal=function(i,r){var a=r||function(d,u){if(d)throw d},h=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(u){if("string"==typeof u){var g=!1;try{h.loadJSON(u,i||{}),g=!0}catch(m){a(m)}g&&(a(null),h.emit("loaded","database "+h.filename+" loaded"))}else{if(!u)return a(null),void h.emit("loaded","empty database "+h.filename+" loaded");if(u instanceof Error)return void a(u);if("object"==typeof u)return h.loadJSONObject(u,i||{}),a(null),void h.emit("loaded","database "+h.filename+" loaded");a("unexpected adapter response : "+u)}}):a(new Error("persistenceAdapter not configured"))},T.prototype.loadDatabase=function(i,r){var a=this;this.throttledSaves?this.throttledSaveDrain(function(h){if(h)return a.throttledSavePending=!0,void a.loadDatabaseInternal(i,function(d){0===a.throttledCallbacks.length?a.throttledSavePending=!1:a.saveDatabase(),"function"==typeof r&&r(d)});"function"==typeof r&&r(new Error("Unable to pause save throttling long enough to read database"))},i):this.loadDatabaseInternal(i,r)},T.prototype.saveDatabaseInternal=function(i){var h,r=i||function(d){if(d)throw d},a=this;this.persistenceAdapter?"incremental"===this.persistenceAdapter.mode?(this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(a.ignoreAutosave=!1,!h){var u=a.copy({removeNonSerializable:!0});return h=a.collections.map(function(g){return[g.dirty,g.dirtyIds]}),a.collections.forEach(function(g){g.dirty=!1,g.dirtyIds=[]}),u}r(new Error("adapter error - getLokiCopy called more than once"))},function(u){a.ignoreAutosave=!1,u&&h&&a.collections.forEach(function(g,m){var v=h[m];g.dirty=g.dirty||v[0],g.dirtyIds=g.dirtyIds.concat(v[1])}),r(u)})):"reference"===this.persistenceAdapter.mode&&"function"==typeof this.persistenceAdapter.exportDatabase?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(u){a.autosaveClearFlags(),r(u)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(u){r(u)})):r(new Error("persistenceAdapter not configured"))},T.prototype.save=T.prototype.saveDatabase=function(i){if(this.throttledSaves)if(this.throttledSavePending)this.throttledCallbacks.push(i);else{var r=this.throttledCallbacks;this.throttledCallbacks=[],r.unshift(i),this.throttledSavePending=!0;var a=this;this.saveDatabaseInternal(function(h){a.throttledSavePending=!1,r.forEach(function(d){"function"==typeof d&&setTimeout(function(){d(h)},1)}),a.throttledCallbacks.length>0&&a.saveDatabase()})}else this.saveDatabaseInternal(i)},T.prototype.deleteDatabase=function(i,r){var a=r||function(h,d){if(h)throw h};"function"==typeof i&&!r&&(a=i),null!==this.persistenceAdapter?this.persistenceAdapter.deleteDatabase(this.filename,function(d){a(d)}):a(new Error("persistenceAdapter not configured"))},T.prototype.autosaveDirty=function(){for(var i=0;i<this.collections.length;i++)if(this.collections[i].dirty)return!0;return!1},T.prototype.autosaveClearFlags=function(){for(var i=0;i<this.collections.length;i++)this.collections[i].dirty=!1},T.prototype.autosaveEnable=function(i,r){this.autosave=!0;var a=5e3,h=this;typeof this.autosaveInterval<"u"&&null!==this.autosaveInterval&&(a=this.autosaveInterval),this.autosaveHandle=setInterval(function(){h.autosaveDirty()&&!h.ignoreAutosave&&h.saveDatabase(r)},a)},T.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},F.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},F.prototype.toJSON=function(){var i=this.copy();return i.collection=null,i},F.prototype.limit=function(i){!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex());var r=new F(this.collection);return r.filteredrows=this.filteredrows.slice(0,i),r.filterInitialized=!0,r},F.prototype.offset=function(i){!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex());var r=new F(this.collection);return r.filteredrows=this.filteredrows.slice(i),r.filterInitialized=!0,r},F.prototype.copy=function(){var i=new F(this.collection);return this.filteredrows.length>0&&(i.filteredrows=this.filteredrows.slice()),i.filterInitialized=this.filterInitialized,i},F.prototype.branch=F.prototype.copy,F.prototype.transform=function(i,r){var a,h,d=this;if("string"==typeof i&&this.collection.transforms.hasOwnProperty(i)&&(i=this.collection.transforms[i]),"object"!=typeof i||!Array.isArray(i))throw new Error("Invalid transform");for(typeof r<"u"&&(i=C.resolveTransformParams(i,r)),a=0;a<i.length;a++)switch(h=i[a],h.type){case"find":d.find(h.value);break;case"where":d.where(h.value);break;case"simplesort":d.simplesort(h.property,h.desc||h.options);break;case"compoundsort":d.compoundsort(h.value);break;case"sort":d.sort(h.value);break;case"limit":d=d.limit(h.value);break;case"offset":d=d.offset(h.value);break;case"map":d=d.map(h.value,h.dataOptions);break;case"eqJoin":d=d.eqJoin(h.joinData,h.leftJoinKey,h.rightJoinKey,h.mapFun,h.dataOptions);break;case"mapReduce":d=d.mapReduce(h.mapFunction,h.reduceFunction);break;case"update":d.update(h.value);break;case"remove":d.remove()}return d},F.prototype.sort=function(i){!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex());var a,h,r=(a=i,h=this.collection.data,function(d,u){return a(h[d],h[u])});return this.filteredrows.sort(r),this},F.prototype.simplesort=function(i,r){var h=10,d=this.collection.data.length,u=this.filteredrows.length,g=this.collection.binaryIndices.hasOwnProperty(i);if((typeof r>"u"||!1===r)&&(r={desc:!1}),!0===r&&(r={desc:!0}),0===u){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(i))return this.collection.ensureIndex(i),this.filteredrows=this.collection.binaryIndices[i].values.slice(0),r.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!r.disableIndexIntersect&&g&&(r.useJavascriptSorting&&(h=6),d/u<=h||r.forceIndexIntersect)){var m,v=this.filteredrows,w={};for(m=0;m<u;m++)w[v[m]]=!0;return this.filteredrows=this.collection.binaryIndices[i].values.filter(function(S){return w[S]}),r.desc&&this.filteredrows.reverse(),this}if(r.useJavascriptSorting)return this.sort(function(S,k){return S[i]===k[i]?0:S[i]>k[i]?1:S[i]<k[i]?-1:void 0});var S,k,L,Y,te,ee,E=(S=i,k=r.desc,L=this.collection.data,function(B,X){return~S.indexOf(".")?(ee=S.split("."),Y=C.getIn(L[B],ee,!0),te=C.getIn(L[X],ee,!0)):(Y=L[B][S],te=L[X][S]),Z(Y,te,k)});return this.filteredrows.sort(E),this},F.prototype.compoundsort=function(i){if(0===i.length)throw new Error("Invalid call to compoundsort, need at least one property");var r;if(1===i.length)return r=i[0],Array.isArray(r)?this.simplesort(r[0],r[1]):this.simplesort(r,!1);for(var a=0,h=i.length;a<h;a+=1)r=i[a],Array.isArray(r)||(i[a]=[r,!1]);!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex());var u,g,d=(u=i,g=this.collection.data,function(m,v){return function Q(i,r,a){for(var d,u,g,m,v,h=0,b=0,E=i.length;b<E;b++)if(~(u=(d=i[b])[0]).indexOf(".")?(v=u.split("."),g=C.getIn(r,v,!0),m=C.getIn(a,v,!0)):(g=r[u],m=a[u]),0!==(h=Z(g,m,d[1])))return h;return 0}(u,g[m],g[v])});return this.filteredrows.sort(d),this},F.prototype.$or=F.prototype.findOr=function(i){for(var r=null,a=0,h=0,d=[],u=[],g=0,v=(this.count(),0),w=i.length;v<w;v++)for(h=(r=this.branch().find(i[v]).filteredrows).length,a=0;a<h;a++)void 0===u[g=r[a]]&&(u[g]=!0,d.push(g));return this.filteredrows=d,this.filterInitialized=!0,this},F.prototype.$and=F.prototype.findAnd=function(i){for(var r=0,a=i.length;r<a;r++){if(0===this.count())return this;this.find(i[r])}return this},F.prototype.find=function(i,r){if(0===this.collection.data.length)return this.filteredrows=[],this.filterInitialized=!0,this;var h,d,u,g,m,v,w,a=i||"getAll",b=!1,E=[],S=[],k=null;if(r=r||!1,"object"==typeof a){for(h in a)(g={})[h]=a[h],S.push(g),q.call(a,h)&&(d=h,u=a[h]);if(S.length>1)return this.find({$and:S},r)}if(!d||"getAll"===a)return r&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if("$and"===d||"$or"===d)return this[d](u),r&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(null===u||"object"!=typeof u||u instanceof Date)m="$eq",v=u;else{if("object"!=typeof u)throw new Error("Do not know what you want to do.");for(w in u)if(q.call(u,w)){m=w,v=u[w];break}}("$regex"===m||"object"==typeof v)&&(v=Me(m,v));var L=-1!==d.indexOf(".");!this.filterInitialized&&this.collection.binaryIndices[d]&&Re[m]&&(!0!==this.collection.adaptiveBinaryIndices&&this.collection.ensureIndex(d),b=!0,k=this.collection.binaryIndices[d]),!b&&"$in"===m&&Array.isArray(v)&&typeof Set<"u"&&(v=new Set(v),m="$inSet");var ue,le,te=ae[m],ee=this.collection.data,B=0,X=0,ve=0;if(this.filterInitialized){if(X=(ue=this.filteredrows).length,L){for(d=d.split("."),B=0;B<X;B++)if(K(le=ee[ve=ue[B]],d,te,v,le)&&(E.push(ve),r))return this.filteredrows=E,this}else for(B=0;B<X;B++)if(te((le=ee[ve=ue[B]])[d],v,le)&&(E.push(ve),r))return this.filteredrows=E,this}else if(b){var Ze=this.collection.calculateRange(m,d,v);if("$in"!==m){for(B=Ze[0];B<=Ze[1];B++)if(!0!==Re[m]){if(Re[m](C.getIn(ee[k.values[B]],d,L),v)&&(E.push(k.values[B]),r))return this.filteredrows=E,this.filterInitialized=!0,this}else if(E.push(k.values[B]),r)return this.filteredrows=E,this.filterInitialized=!0,this}else for(B=0,X=Ze.length;B<X;B++)if(E.push(k.values[Ze[B]]),r)return this.filteredrows=E,this.filterInitialized=!0,this}else if(X=ee.length,L){for(d=d.split("."),B=0;B<X;B++)if(K(le=ee[B],d,te,v,le)&&(E.push(B),r))return this.filteredrows=E,this.filterInitialized=!0,this}else for(B=0;B<X;B++)if(te((le=ee[B])[d],v,le)&&(E.push(B),r))return this.filteredrows=E,this.filterInitialized=!0,this;return this.filteredrows=E,this.filterInitialized=!0,this},F.prototype.where=function(i){var r,a=[];if("function"!=typeof i)throw new TypeError("Argument is not a stored view or a function");r=i;try{if(this.filterInitialized){for(var h=this.filteredrows.length;h--;)!0===r(this.collection.data[this.filteredrows[h]])&&a.push(this.filteredrows[h]);return this.filteredrows=a,this}for(var d=this.collection.data.length;d--;)!0===r(this.collection.data[d])&&a.push(d);return this.filteredrows=a,this.filterInitialized=!0,this}catch(u){throw u}},F.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},F.prototype.data=function(i){var h,d,u,g,r=[],a=this.collection.data;if((i=i||{}).removeMeta&&!i.forceClones&&(i.forceClones=!0,i.forceCloneMethod=i.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(i.forceClones=!0,i.forceCloneMethod="parse-stringify"),!this.filterInitialized){if(0===this.filteredrows.length){if(this.collection.cloneObjects||i.forceClones){for(d=a.length,g=i.forceCloneMethod||this.collection.cloneMethod,u=0;u<d;u++)h=J(a[u],g),i.removeMeta&&(delete h.$loki,delete h.meta),r.push(h);return r}return a.slice()}this.filterInitialized=!0}var m=this.filteredrows;if(d=m.length,this.collection.cloneObjects||i.forceClones)for(g=i.forceCloneMethod||this.collection.cloneMethod,u=0;u<d;u++)h=J(a[m[u]],g),i.removeMeta&&(delete h.$loki,delete h.meta),r.push(h);else for(u=0;u<d;u++)r.push(a[m[u]]);return r},F.prototype.update=function(i){if("function"!=typeof i)throw new TypeError("Argument is not a function");!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var r,a=this.filteredrows.length,h=this.collection.data,d=0;d<a;d++)this.disableFreeze&&!this.collection.cloneObjects&&this.collection.disableDeltaChangesApi?(i(h[this.filteredrows[d]]),this.collection.update(h[this.filteredrows[d]])):(i(r=J(h[this.filteredrows[d]],this.collection.cloneMethod)),this.collection.update(r));return this},F.prototype.remove=function(){return!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},F.prototype.mapReduce=function(i,r){try{return r(this.data().map(i))}catch(a){throw a}},F.prototype.eqJoin=function(i,r,a,h,d){var g,v,w,u,m=[],b=[],E="function"==typeof r,S="function"==typeof a,k={};if(g=(u=this.data(d)).length,i instanceof x)m=i.chain().data(d);else if(i instanceof F)m=i.data(d);else{if(!Array.isArray(i))throw new TypeError("joinData needs to be an array or result set");m=i}v=m.length;for(var L=0;L<v;L++)k[w=S?a(m[L]):m[L][a]]=m[L];h||(h=function(te,ee){return{left:te,right:ee}});for(var Y=0;Y<g;Y++)w=E?r(u[Y]):u[Y][r],b.push(h(u[Y],k[w]||{}));return this.collection=new x("joinData"),this.collection.insert(b),this.filteredrows=[],this.filterInitialized=!1,this},F.prototype.map=function(i,r){var a=this.data(r).map(i);return this.collection=new x("mappedData"),this.collection.insert(a),this.filteredrows=[],this.filterInitialized=!1,this},(N.prototype=new se).constructor=N,N.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},N.prototype.rematerialize=function(i){var r,a,h;i=i||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new F(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var d=Object.isFrozen(this.filterPipeline);if(i.hasOwnProperty("removeWhereFilters"))for(d&&(this.filterPipeline=this.filterPipeline.slice()),a=r=this.filterPipeline.length;a--;)"where"===this.filterPipeline[a].type&&(a!==this.filterPipeline.length-1&&(this.filterPipeline[a]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var u=this.filterPipeline;for(this.filterPipeline=[],r=u.length,h=0;h<r;h++)this.applyFind(u[h].val,u[h].uid);return d&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},N.prototype.branchResultset=function(i,r){var a=this.resultset.branch();return typeof i>"u"?a:a.transform(i,r)},N.prototype.toJSON=function(){var i=new N(this.collection,this.name,this.options);return i.resultset=this.resultset,i.resultdata=[],i.resultsdirty=!0,i.filterPipeline=this.filterPipeline,i.sortFunction=this.sortFunction,i.sortCriteria=this.sortCriteria,i.sortCriteriaSimple=this.sortCriteriaSimple||null,i.sortDirty=this.sortDirty,i.collection=null,i},N.prototype.removeFilters=function(i){i=i||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var r=Object.isFrozen(this.filterPipeline),a=this.filterPipeline.length>0;this.filterPipeline=[],r&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,!0===i.queueSortPhase&&this.queueSortPhase(),a&&this.emit("filter")},N.prototype.applySort=function(i){return this.sortFunction=i,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},N.prototype.applySimpleSort=function(i,r){return this.sortCriteriaSimple={propname:i,options:r||!1},this.collection.disableFreeze||I(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},N.prototype.applySortCriteria=function(i){return this.sortCriteria=i,this.collection.disableFreeze||I(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},N.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},N.prototype.commit=function(){return this.cachedresultset=null,this},N.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},N.prototype._indexOfFilterWithId=function(i){if("string"==typeof i||"number"==typeof i)for(var r=0,a=this.filterPipeline.length;r<a;r+=1)if(i===this.filterPipeline[r].uid)return r;return-1},N.prototype._addFilter=function(i){var r=Object.isFrozen(this.filterPipeline);r&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||I(i),this.filterPipeline.push(i),r&&Object.freeze(this.filterPipeline),this.resultset[i.type](i.val)},N.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var i=this.filterPipeline,r=Object.isFrozen(i);this.filterPipeline=[];for(var a=0,h=i.length;a<h;a+=1)this._addFilter(i[a]);return r&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},N.prototype.applyFilter=function(i){var r=this._indexOfFilterWithId(i.uid);if(r>=0){var a=Object.isFrozen(this.filterPipeline);return a&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[r]=i,a&&(e(i),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(i),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},N.prototype.applyFind=function(i,r){return this.applyFilter({type:"find",val:i,uid:r}),this},N.prototype.applyWhere=function(i,r){return this.applyFilter({type:"where",val:i,uid:r}),this},N.prototype.removeFilter=function(i){var r=this._indexOfFilterWithId(i);if(r<0)throw new Error("Dynamic view does not contain a filter with ID: "+i);var a=Object.isFrozen(this.filterPipeline);return a&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(r,1),a&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},N.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},N.prototype.data=function(i){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(i)},N.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var i=this;setTimeout(function(){i.rebuildPending&&(i.rebuildPending=!1,i.emit("rebuild",i))},this.options.minRebuildInterval)}},N.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var i=this;"active"===this.options.sortPriority?setTimeout(function(){i.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},N.prototype.performSortPhase=function(i){!this.sortDirty&&!this.resultsdirty||(i=i||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),i.suppressRebuildEvent||this.emit("rebuild",this))},N.prototype.evaluateDocument=function(i,r){if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var a=this.resultset.filteredrows,h=r?-1:a.indexOf(+i),d=a.length,u=new F(this.collection);u.filteredrows=[i],u.filterInitialized=!0;for(var g,m=0,v=this.filterPipeline.length;m<v;m++)u[(g=this.filterPipeline[m]).type](g.val);var w=0===u.filteredrows.length?-1:0;if(-1!==h||-1!==w){if(-1===h&&-1!==w)return a.push(i),this.options.persistent&&this.resultdata.push(this.collection.data[i]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());if(-1!==h&&-1===w)return h<d-1?(a.splice(h,1),this.options.persistent&&this.resultdata.splice(h,1)):(a.length=d-1,this.options.persistent&&(this.resultdata.length=d-1)),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());if(-1!==h&&-1!==w)return this.options.persistent&&(this.resultdata[h]=this.collection.data[i]),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent())}},N.prototype.removeDocument=function(i){var r,a,h,d={},u={},g=[],m=this.resultset,v=this.resultset.filteredrows,w=v.length;if(!this.resultset.filterInitialized)return this.options.persistent&&(this.resultdata=this.resultset.data()),void(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());for(Array.isArray(i)||(i=[i]),h=i.length,a=0;a<h;a++)d[i[a]]=!0;for(r=0;r<w;r++)d[v[r]]&&(u[r]=!0);Object.keys(u).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(E,S){return!u[S]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(E,S){return!u[S]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var b=function(E){return function(S){return S<m.filteredrows[E]}};for(w=m.filteredrows.length,r=0;r<w;r++)g=i.filter(b(r)),m.filteredrows[r]-=g.length},N.prototype.mapReduce=function(i,r){try{return r(this.data().map(i))}catch(a){throw a}},(x.prototype=new se).contructor=x,x.prototype.createChange=function(i,r,a,h){this.changes.push({name:i,operation:r,obj:"U"!=r||this.disableDeltaChangesApi?JSON.parse(JSON.stringify(a)):this.getChangeDelta(a,h)})},x.prototype.insertMeta=function(i){var r,a;if(!this.disableMeta&&i){if(Array.isArray(i)){for(r=i.length,a=0;a<r;a++)i[a].hasOwnProperty("meta")||(i[a].meta={}),i[a].meta.created=(new Date).getTime(),i[a].meta.revision=0;return}i.meta||(i.meta={}),i.meta.created=(new Date).getTime(),i.meta.revision=0}},x.prototype.updateMeta=function(i){return this.disableMeta||!i||(this.disableFreeze||((i=z(i)).meta=z(i.meta)),i.meta.updated=(new Date).getTime(),i.meta.revision+=1),i},x.prototype.createInsertChange=function(i){this.createChange(this.name,"I",i)},x.prototype.createUpdateChange=function(i,r){this.createChange(this.name,"U",i,r)},x.prototype.insertMetaWithChange=function(i){this.insertMeta(i),this.createInsertChange(i)},x.prototype.updateMetaWithChange=function(i,r,a){return i=this.updateMeta(i,a),this.createUpdateChange(i,r),i},x.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},x.prototype.addAutoUpdateObserver=function(i){!this.autoupdate||"function"!=typeof Object.observe||Object.observe(i,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},x.prototype.removeAutoUpdateObserver=function(i){!this.autoupdate||"function"!=typeof Object.observe||Object.unobserve(i,this.observerCallback)},x.prototype.addTransform=function(i,r){if(this.transforms.hasOwnProperty(i))throw new Error("a transform by that name already exists");this.transforms[i]=r},x.prototype.getTransform=function(i){return this.transforms[i]},x.prototype.setTransform=function(i,r){this.transforms[i]=r},x.prototype.removeTransform=function(i){delete this.transforms[i]},x.prototype.byExample=function(i){var r,a,h;for(r in h=[],i)!i.hasOwnProperty(r)||h.push(((a={})[r]=i[r],a));return{$and:h}},x.prototype.findObject=function(i){return this.findOne(this.byExample(i))},x.prototype.findObjects=function(i){return this.find(this.byExample(i))},x.prototype.ttlDaemonFuncGen=function(){var i=this,r=this.ttl.age;return function(){var h=Date.now();i.chain().where(function(g){return r<h-(g.meta.updated||g.meta.created)}).remove()}},x.prototype.setTTL=function(i,r){i<0?clearInterval(this.ttl.daemon):(this.ttl.age=i,this.ttl.ttlInterval=r,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),r))},x.prototype.prepareFullDocIndex=function(){for(var i=this.data.length,r=new Array(i),a=0;a<i;a+=1)r[a]=a;return r},x.prototype.configureOptions=function(i){(i=i||{}).hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=i.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},x.prototype.ensureIndex=function(i,r){if(typeof r>"u"&&(r=!1),null==i)throw new Error("Attempting to set index without an associated property");if((!this.binaryIndices[i]||r||this.binaryIndices[i].dirty)&&(!0!==this.adaptiveBinaryIndices||!this.binaryIndices.hasOwnProperty(i)||r)){var a={name:i,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[i]=a;var h=(u=this.data,v=!!~(d=i).indexOf(".")&&d.split("."),function(w,b){if(v?(g=C.getIn(u[w],v,!0),m=C.getIn(u[b],v,!0)):(g=u[w][d],m=u[b][d]),g!==m){if(D.lt(g,m,!1))return-1;if(D.gt(g,m,!1))return 1}return 0});a.values.sort(h),a.dirty=!1,this.dirty=!0}var d,u,g,m,v},x.prototype.checkAllIndexes=function(i){var r,a=this.binaryIndices,h=[];for(r in a)q.call(a,r)&&(this.checkIndex(r,i)||h.push(r));return h},x.prototype.checkIndex=function(i,r){(r=r||{}).randomSamplingFactor&&!1!==r.randomSampling&&(r.randomSampling=!0),r.randomSamplingFactor=r.randomSamplingFactor||.1,(r.randomSamplingFactor<0||r.randomSamplingFactor>1)&&(r.randomSamplingFactor=.1);var h,d,u,g,m,a=!0;if(!this.binaryIndices.hasOwnProperty(i))throw new Error("called checkIndex on property without an index: "+i);if(this.adaptiveBinaryIndices||this.ensureIndex(i),(g=(m=this.binaryIndices[i].values).length)!==this.data.length)return r.repair&&this.ensureIndex(i,!0),!1;if(0===g)return!0;var v=-1!==i.indexOf(".");if(1===g)a=0===m[0];else if(r.randomSampling){if(ae.$lte(C.getIn(this.data[m[0]],i,v),C.getIn(this.data[m[1]],i,v))||(a=!1),ae.$lte(C.getIn(this.data[m[g-2]],i,v),C.getIn(this.data[m[g-1]],i,v))||(a=!1),a)for(d=Math.floor((g-1)*r.randomSamplingFactor),h=0;h<d-1;h++)if(u=Math.floor(Math.random()*(g-1)),!ae.$lte(C.getIn(this.data[m[u]],i,v),C.getIn(this.data[m[u+1]],i,v))){a=!1;break}}else for(h=0;h<g-1;h++)if(!ae.$lte(C.getIn(this.data[m[h]],i,v),C.getIn(this.data[m[h+1]],i,v))){a=!1;break}return!a&&r.repair&&this.ensureIndex(i,!0),a},x.prototype.getBinaryIndexValues=function(i){var r,a=this.binaryIndices[i].values,h=[];for(r=0;r<a.length;r++)h.push(C.getIn(this.data[a[r]],i,!0));return h},x.prototype.getUniqueIndex=function(i,r){var a=this.constraints.unique[i];return!a&&r?this.ensureUniqueIndex(i):a},x.prototype.ensureUniqueIndex=function(i){var r=this.constraints.unique[i];return r||-1==this.uniqueNames.indexOf(i)&&this.uniqueNames.push(i),this.constraints.unique[i]=r=new he(i),this.data.forEach(function(a){r.set(a)}),r},x.prototype.ensureAllIndexes=function(i){var r,a=this.binaryIndices;for(r in a)q.call(a,r)&&this.ensureIndex(r,i)},x.prototype.flagBinaryIndexesDirty=function(){var i,r=this.binaryIndices;for(i in r)q.call(r,i)&&(r[i].dirty=!0)},x.prototype.flagBinaryIndexDirty=function(i){this.binaryIndices[i]&&(this.binaryIndices[i].dirty=!0)},x.prototype.count=function(i){return i?this.chain().find(i).filteredrows.length:this.data.length},x.prototype.ensureId=function(){if(!this.idIndex){for(var i=this.data,r=0,a=i.length,h=new Array(a);r<a;r++)h[r]=i[r].$loki;this.idIndex=h}},x.prototype.ensureIdAsync=function(i){this.async(function(){this.ensureId()},i)},x.prototype.addDynamicView=function(i,r){var a=new N(this,i,r);return this.DynamicViews.push(a),a},x.prototype.removeDynamicView=function(i){this.DynamicViews=this.DynamicViews.filter(function(r){return r.name!==i})},x.prototype.getDynamicView=function(i){for(var r=0;r<this.DynamicViews.length;r++)if(this.DynamicViews[r].name===i)return this.DynamicViews[r];return null},x.prototype.findAndUpdate=function(i,r){"function"==typeof i?this.updateWhere(i,r):this.chain().find(i).update(r)},x.prototype.findAndRemove=function(i){this.chain().find(i).remove()},x.prototype.insert=function(i,r){if(!Array.isArray(i))return this.insertOne(i);var a,h=[],d=r&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;d&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",i);for(var u=0,g=i.length;u<g;u++){if(!(a=this.insertOne(i[u],!0)))return;h.push(a)}}finally{d&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",h),1===(h=this.cloneObjects?J(h,this.cloneMethod):h).length?h[0]:h},x.prototype.insertOne=function(i,r){var h,a=null;if("object"!=typeof i?a=new TypeError("Document needs to be an object"):null===i&&(a=new TypeError("Object cannot be null")),null!==a)throw this.emit("error",a),a;var d=this.cloneObjects?J(i,this.cloneMethod):i;if(this.disableFreeze||(d=z(d)),this.disableMeta||(typeof d.meta>"u"?d.meta={revision:0,created:0}:this.disableFreeze||(d.meta=z(d.meta))),r||this.emit("pre-insert",d),this.add(d))return this.disableChangesApi?this.insertMeta(d):this.insertMetaWithChange(d),this.disableFreeze||I(d),h=this.cloneObjects?J(d,this.cloneMethod):d,r||this.emit("insert",h),this.addAutoUpdateObserver(h),h},x.prototype.clear=function(i){var r=this;i=i||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},!0===i.removeIndices?(this.binaryIndices={},this.uniqueNames=[]):Object.keys(this.binaryIndices).forEach(function(h){r.binaryIndices[h].dirty=!1,r.binaryIndices[h].values=[]})},x.prototype.update=function(i){var r,a,h;if(Array.isArray(i)){h=i.length,(r=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0)&&(this.adaptiveBinaryIndices=!1);try{for(a=0;a<h;a+=1)this.update(i[a])}finally{r&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}}else{if(!q.call(i,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var u,g,m,b,S,d=this.get(i.$loki,!0),v=this;if(!d)throw new Error("Trying to update a document not in collection.");u=d[0],m=d[1],g=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?J(i,this.cloneMethod):i,this.emit("pre-update",i),this.uniqueNames.forEach(function(k){v.getUniqueIndex(k,!0).update(u,g)}),this.data[m]=g,g!==i&&this.addAutoUpdateObserver(i);for(var w=0;w<this.DynamicViews.length;w++)this.DynamicViews[w].evaluateDocument(m,!1);if(this.adaptiveBinaryIndices){var E=this.binaryIndices;for(b in E)this.adaptiveBinaryIndexUpdate(m,b)}else this.flagBinaryIndexesDirty();return this.idIndex[m]=g.$loki,this.isIncremental&&this.dirtyIds.push(g.$loki),this.commit(),this.dirty=!0,g=this.disableChangesApi?this.updateMeta(g):this.updateMetaWithChange(g,u),this.disableFreeze||I(g),S=this.cloneObjects?J(g,this.cloneMethod):g,this.emit("update",S,u),S}catch(k){throw this.rollback(),this.lokiConsoleWrapper.error(k.message),this.emit("error",k),k}}},x.prototype.add=function(i){if("object"!=typeof i)throw new TypeError("Object being added needs to be an object");if(typeof i.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var r=this.maxId;i.$loki=r,this.disableMeta||(i.meta.version=0);for(var a=0,h=this.uniqueNames.length;a<h;a++)this.getUniqueIndex(this.uniqueNames[a],!0).set(i);this.idIndex&&this.idIndex.push(r),this.isIncremental&&this.dirtyIds.push(r),this.data.push(i);var d=this.data.length-1,u=this.DynamicViews.length;for(a=0;a<u;a++)this.DynamicViews[a].evaluateDocument(d,!0);if(this.adaptiveBinaryIndices){var g=this.binaryIndices;for(var m in g)this.adaptiveBinaryIndexInsert(d,m)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?J(i,this.cloneMethod):i}catch(v){throw this.rollback(),this.lokiConsoleWrapper.error(v.message),this.emit("error",v),v}},x.prototype.updateWhere=function(i,r){var d,a=this.where(i),h=0;try{for(;h<a.length;h++)d=r(a[h]),this.update(d)}catch(u){this.rollback(),this.lokiConsoleWrapper.error(u.message)}},x.prototype.removeWhere=function(i){var r;"function"==typeof i?(r=this.data.filter(i),this.remove(r)):this.chain().find(i).remove()},x.prototype.removeDataOnly=function(){this.remove(this.data.slice())},x.prototype.removeBatchByPositions=function(i){var h,d,u,w,r=i.length,a={},g=Object.keys(this.binaryIndices).length,m=Object.keys(this.constraints.unique).length,v=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,b=this;try{for(this.startTransaction(),this.ensureId(),u=0;u<r;u++)a[this.idIndex[i[u]]]=!0;if((h=this.DynamicViews.length)>0||g>0||m>0){if(h>0)for(d=0;d<h;d++)this.DynamicViews[d].removeDocument(i);if(this.adaptiveBinaryIndices&&!v){var E,S=this.binaryIndices;for(E in S)this.adaptiveBinaryIndexRemove(i,E)}else this.flagBinaryIndexesDirty();m&&this.uniqueNames.forEach(function(k){var L=b.getUniqueIndex(k);if(L)for(u=0;u<r;u++)null!=(w=b.data[i[u]])[k]&&L.remove(w[k])})}if(!this.disableChangesApi||this.events.delete.length>1)for(u=0;u<r;u++)this.emit("delete",this.data[i[u]]);if(this.data=this.data.filter(function(k){return!a[k.$loki]}),this.isIncremental)for(u=0;u<r;u++)this.dirtyIds.push(this.idIndex[i[u]]);this.idIndex=this.idIndex.filter(function(k){return!a[k]}),this.adaptiveBinaryIndices&&v&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(k){return this.rollback(),v&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(k.message),this.emit("error",k),null}},x.prototype.removeBatch=function(i){var h,r=i.length,a=this.data.length,d={},u=[];for(h=0;h<a;h++)d[this.data[h].$loki]=h;for(h=0;h<r;h++)u.push("object"==typeof i[h]?d[i[h].$loki]:d[i[h]]);this.removeBatchByPositions(u)},x.prototype.remove=function(i){if("number"==typeof i&&(i=this.get(i)),"object"!=typeof i)throw new Error("Parameter is not an object");if(Array.isArray(i))this.removeBatch(i);else{if(!q.call(i,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var a=this.get(i.$loki,!0),h=a[1],d=this;this.uniqueNames.forEach(function(v){if(null!==i[v]&&typeof i[v]<"u"){var w=d.getUniqueIndex(v);w&&w.remove(i[v])}});for(var u=0;u<this.DynamicViews.length;u++)this.DynamicViews[u].removeDocument(h);if(this.adaptiveBinaryIndices){var g,m=this.binaryIndices;for(g in m)this.adaptiveBinaryIndexRemove(h,g)}else this.flagBinaryIndexesDirty();return this.data.splice(h,1),this.removeAutoUpdateObserver(i),this.idIndex.splice(h,1),this.isIncremental&&this.dirtyIds.push(i.$loki),this.commit(),this.dirty=!0,this.emit("delete",a[0]),this.disableFreeze||(i=z(i)),delete i.$loki,delete i.meta,this.disableFreeze||e(i),i}catch(v){return this.rollback(),this.lokiConsoleWrapper.error(v.message),this.emit("error",v),null}}},x.prototype.get=function(i,r){this.idIndex||this.ensureId();var a=r||!1,h=this.idIndex,d=h.length-1,u=0,g=u+d>>1;if(i="number"==typeof i?i:parseInt(i,10),isNaN(i))throw new TypeError("Passed id is not an integer");for(;h[u]<h[d];)h[g=u+d>>1]<i?u=g+1:d=g;return d===u&&h[u]===i?a?[this.data[u],u]:this.data[u]:null},x.prototype.getBinaryIndexPosition=function(i,r){var a=C.getIn(this.data[i],r,!0),h=this.binaryIndices[r].values,d=this.calculateRange("$eq",r,a);if(0===d[0]&&-1===d[1])return null;for(var g=d[1],m=d[0];m<=g;m++)if(h[m]===i)return m;return null},x.prototype.adaptiveBinaryIndexInsert=function(i,r){var a=-1!==r.indexOf("."),h=this.binaryIndices[r].values,d=C.getIn(this.data[i],r,a);!0===this.serializableIndices&&d instanceof Date&&(this.data[i][r]=d.getTime(),d=C.getIn(this.data[i],r));var u=0===h.length?0:this.calculateRangeStart(r,d,!0,a);this.binaryIndices[r].values.splice(u,0,i)},x.prototype.adaptiveBinaryIndexUpdate=function(i,r){var a,h=this.binaryIndices[r].values,d=h.length;for(a=0;a<d&&h[a]!==i;a++);this.binaryIndices[r].values.splice(a,1),this.adaptiveBinaryIndexInsert(i,r)},x.prototype.adaptiveBinaryIndexRemove=function(i,r,a){var d,u,g,m,w,b,E,h=this.binaryIndices[r],v={};if(Array.isArray(i)){if(1!==(m=i.length)){for(g=0;g<m;g++)v[i[g]]=!0;if(h.values=h.values.filter(function(k){return!v[k]}),!0===a)return;var S=i.slice();for(S.sort(function(k,L){return k-L}),d=h.values.length,u=0;u<d;u++){for(w=h.values[u],b=0,g=0;g<m&&w>S[g];g++)b++;h.values[u]-=b}return}i=i[0]}if(null===(E=this.getBinaryIndexPosition(i,r)))return null;if(h.values.splice(E,1),!0!==a)for(d=h.values.length,u=0;u<d;u++)h.values[u]>i&&h.values[u]--},x.prototype.calculateRangeStart=function(i,r,a,h){var d=this.data,u=this.binaryIndices[i].values,g=0,m=u.length-1,v=0;if(0===u.length)return-1;for(C.getIn(d[u[g]],i,h),C.getIn(d[u[m]],i,h);g<m;)D.lt(C.getIn(d[u[v=g+m>>1]],i,h),r,!1)?g=v+1:m=v;var E=g;return D.aeq(r,C.getIn(d[u[E]],i,h))?E:D.lt(r,C.getIn(d[u[E]],i,h),!1)?a?E:E-1:a?E+1:E},x.prototype.calculateRangeEnd=function(i,r,a){var h=this.data,d=this.binaryIndices[i].values,u=0,g=d.length-1,m=0;if(0===d.length)return-1;for(C.getIn(h[d[u]],i,a),C.getIn(h[d[g]],i,a);u<g;)D.lt(r,C.getIn(h[d[m=u+g>>1]],i,a),!1)?g=m:u=m+1;var b=g;return D.aeq(r,C.getIn(h[d[b]],i,a))?b:D.gt(r,C.getIn(h[d[b]],i,a),!1)?b+1:D.aeq(r,C.getIn(h[d[b-1]],i,a))?b-1:b},x.prototype.calculateRange=function(i,r,a){var v,w,b,h=this.data,d=this.binaryIndices[r].values,g=d.length-1;if(0===h.length)return[0,-1];var S=-1!==r.indexOf("."),k=C.getIn(h[d[0]],r,S),L=C.getIn(h[d[g]],r,S);switch(i){case"$eq":case"$aeq":case"$dteq":if(D.lt(a,k,!1)||D.gt(a,L,!1))return[0,-1];break;case"$gt":if(D.gt(a,L,!0))return[0,-1];if(D.gt(k,a,!1))return[0,g];break;case"$gte":if(D.gt(a,L,!1))return[0,-1];if(D.gt(k,a,!0))return[0,g];break;case"$lt":if(D.lt(a,k,!0))return[0,-1];if(D.lt(L,a,!1))return[0,g];break;case"$lte":if(D.lt(a,k,!1))return[0,-1];if(D.lt(L,a,!0))return[0,g];break;case"$between":return D.gt(a[0],L,!1)||D.lt(a[1],k,!1)?[0,-1]:((v=this.calculateRangeStart(r,a[0],!1,S))<0&&v++,(b=this.calculateRangeEnd(r,a[1],S))>g&&b--,D.gt(C.getIn(h[d[v]],r,S),a[0],!0)||v++,D.lt(C.getIn(h[d[b]],r,S),a[1],!0)||b--,b<v?[0,-1]:[v,b]);case"$in":for(var Y=[],te=[],ee=0,B=a.length;ee<B;ee++)for(var X=this.calculateRange("$eq",r,a[ee]),ue=X[0];ue<=X[1];ue++)void 0===Y[ue]&&(Y[ue]=!0,te.push(ue));return te}switch(i){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":v=this.calculateRangeStart(r,a,!1,S),w=C.getIn(h[d[v]],r,S)}switch(i){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":b=this.calculateRangeEnd(r,a,S),C.getIn(h[d[b]],r,S)}switch(i){case"$eq":case"$aeq":case"$dteq":return D.aeq(w,a)?[v,b]:[0,-1];case"$gt":return D.aeq(C.getIn(h[d[b]],r,S),a)?[b+1,g]:[b,g];case"$gte":return D.aeq(C.getIn(h[d[v]],r,S),a)?[v,g]:[v+1,g];case"$lt":return D.aeq(C.getIn(h[d[v]],r,S),a)?[0,v-1]:[0,v];case"$lte":return D.aeq(C.getIn(h[d[b]],r,S),a)?[0,b]:[0,b-1];default:return[0,h.length-1]}},x.prototype.by=function(i,r){var a;if(void 0===r)return a=this,function(d){return a.by(i,d)};var h=this.getUniqueIndex(i,!0).get(r);return this.cloneObjects?J(h,this.cloneMethod):h},x.prototype.findOne=function(i){i=i||{};var r=this.chain().find(i,!0).data();return Array.isArray(r)&&0===r.length?null:this.cloneObjects?J(r[0],this.cloneMethod):r[0]},x.prototype.chain=function(i,r){var a=new F(this);return typeof i>"u"?a:a.transform(i,r)},x.prototype.find=function(i){return this.chain().find(i).data()},x.prototype.findOneUnindexed=function(i,r){for(var a=this.data.length;a--;)if(C.getIn(this.data[a],i,!0)===r)return this.data[a];return null},x.prototype.startTransaction=function(){if(this.transactional){this.cachedData=J(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var i=0;i<this.DynamicViews.length;i++)this.DynamicViews[i].startTransaction()}},x.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var i=0;i<this.DynamicViews.length;i++)this.DynamicViews[i].commit()}},x.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var i=0;i<this.DynamicViews.length;i++)this.DynamicViews[i].rollback()}},x.prototype.async=function(i,r){setTimeout(function(){if("function"!=typeof i)throw new TypeError("Argument passed for async execution is not a function");i(),r()},0)},x.prototype.where=function(i){return this.chain().where(i).data()},x.prototype.mapReduce=function(i,r){try{return r(this.data.map(i))}catch(a){throw a}},x.prototype.eqJoin=function(i,r,a,h,d){return new F(this).eqJoin(i,r,a,h,d)},x.prototype.stages={},x.prototype.getStage=function(i){return this.stages[i]||(this.stages[i]={}),this.stages[i]},x.prototype.commitLog=[],x.prototype.stage=function(i,r){var a=JSON.parse(JSON.stringify(r));return this.getStage(i)[r.$loki]=a,a},x.prototype.commitStage=function(i,r){var h,a=this.getStage(i),d=(new Date).getTime();for(h in a)this.update(a[h]),this.commitLog.push({timestamp:d,message:r,data:JSON.parse(JSON.stringify(a[h]))});this.stages[i]={}},x.prototype.no_op=function(){},x.prototype.extract=function(i){for(var r=0,a=this.data.length,h=Le(i),d=[];r<a;r+=1)d.push(pe(this.data[r],i,h));return d},x.prototype.max=function(i){return Math.max.apply(null,this.extract(i))},x.prototype.min=function(i){return Math.min.apply(null,this.extract(i))},x.prototype.maxRecord=function(i){for(var u,r=0,a=this.data.length,h=Le(i),d={index:0,value:void 0};r<a;r+=1)void 0!==u?u<pe(this.data[r],i,h)&&(u=pe(this.data[r],i,h),d.index=this.data[r].$loki):(u=pe(this.data[r],i,h),d.index=this.data[r].$loki);return d.value=u,d},x.prototype.minRecord=function(i){for(var u,r=0,a=this.data.length,h=Le(i),d={index:0,value:void 0};r<a;r+=1)void 0!==u?u>pe(this.data[r],i,h)&&(u=pe(this.data[r],i,h),d.index=this.data[r].$loki):(u=pe(this.data[r],i,h),d.index=this.data[r].$loki);return d.value=u,d},x.prototype.extractNumerical=function(i){return this.extract(i).map(at).filter(Number).filter(function(r){return!isNaN(r)})},x.prototype.avg=function(i){return Fe(this.extractNumerical(i))},x.prototype.stdDev=function(i){return function Be(i){var r=Fe(i),h=Fe(i.map(function(u){var g=u-r;return g*g}));return Math.sqrt(h)}(this.extractNumerical(i))},x.prototype.mode=function(i){var h,d,u,r={},a=this.extract(i);for(d in a.forEach(function(g){r[g]?r[g]+=1:r[g]=1}),r)h?h<r[d]&&(u=d):(u=d,h=r[d]);return u},x.prototype.median=function(i){var r=this.extractNumerical(i);r.sort(ze);var a=Math.floor(r.length/2);return r.length%2?r[a]:(r[a-1]+r[a])/2},Ne.prototype={keys:[],values:[],sort:function(i,r){return i<r?-1:i>r?1:0},setSort:function(i){this.bs=new we(i)},bs:function(){return new we(this.sort)},set:function(i,r){var a=this.bs(this.keys,i);a.found?this.values[a.index]=r:(this.keys.splice(a.index,0,i),this.values.splice(a.index,0,r))},get:function(i){return this.values[fe(this.keys,i,this.sort).index]}},he.prototype.keyMap={},he.prototype.lokiMap={},he.prototype.set=function(i){var r=i[this.field];if(null!==r&&typeof r<"u"){if(this.keyMap[r])throw new Error("Duplicate key for property "+this.field+": "+r);this.keyMap[r]=i,this.lokiMap[i.$loki]=r}},he.prototype.get=function(i){return this.keyMap[i]},he.prototype.byId=function(i){return this.keyMap[this.lokiMap[i]]},he.prototype.update=function(i,r){if(this.lokiMap[i.$loki]!==r[this.field]){var a=this.lokiMap[i.$loki];this.set(r),this.keyMap[a]=void 0}else this.keyMap[i[this.field]]=r},he.prototype.remove=function(i){var r=this.keyMap[i];if(!(null!==r&&typeof r<"u"))throw new Error("Key is not in unique index: "+this.field);this.keyMap[i]=void 0,this.lokiMap[r.$loki]=void 0},he.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)},be.prototype={set:function(r,a){this.index[r]?this.index[r].push(a):this.index[r]=[a]},remove:function(r,a){var h=this.index[r];for(var d in h)h[d]==a&&h.splice(d,1);h.length<1&&(this.index[r]=void 0)},get:function(r){return this.index[r]},clear:function(r){this.index={}}},T.deepFreeze=I,T.freeze=e,T.unFreeze=z,T.LokiOps=ae,T.Collection=x,T.DynamicView=N,T.Resultset=F,T.KeyValueStore=Ne,T.LokiMemoryAdapter=Ee,T.LokiPartitioningAdapter=me,T.LokiLocalStorageAdapter=_e,T.LokiFsAdapter=xe,T.persistenceAdapters={fs:xe,localStorage:_e},T.aeq=R,T.lt=V,T.gt=$,T.Comparators=D,T}()},void 0!==(U=G.apply(Oe,[]))&&(We.exports=U)}}]);